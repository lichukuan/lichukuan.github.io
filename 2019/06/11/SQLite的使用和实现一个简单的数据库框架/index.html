<!DOCTYPE html>



  



<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="SQLiteçš„åŸºæœ¬çŸ¥è¯†SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹   å­—æ®µ ä½œç”¨     char(n) å›ºå®šné•¿åº¦çš„å­—ä¸²   varchar(n) é•¿åº¦ä¸å›ºå®šçš„å­—ç¬¦ä¸²,nè¡¨ç¤ºæœ€å¤§çš„é•¿åº¦   nchar(n) åŒcharï¼Œä¸åŒçš„æ˜¯å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸­æ–‡   nvarchar(n) åŒvarcharï¼Œä¸åŒçš„æ˜¯å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸­æ–‡   text å­˜å‚¨æ–‡æœ¬   blob å­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶   int æ•´å½¢   integer æ•´å½¢">
<meta property="og:type" content="article">
<meta property="og:title" content="SQLiteçš„ä½¿ç”¨å’Œå®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åº“æ¡†æ¶">
<meta property="og:url" content="http://yoursite.com/2019/06/11/SQLiteçš„ä½¿ç”¨å’Œå®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åº“æ¡†æ¶/index.html">
<meta property="og:site_name" content="æˆ‘çš„ä¸ªäººåšå®¢">
<meta property="og:description" content="SQLiteçš„åŸºæœ¬çŸ¥è¯†SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹   å­—æ®µ ä½œç”¨     char(n) å›ºå®šné•¿åº¦çš„å­—ä¸²   varchar(n) é•¿åº¦ä¸å›ºå®šçš„å­—ç¬¦ä¸²,nè¡¨ç¤ºæœ€å¤§çš„é•¿åº¦   nchar(n) åŒcharï¼Œä¸åŒçš„æ˜¯å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸­æ–‡   nvarchar(n) åŒvarcharï¼Œä¸åŒçš„æ˜¯å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸­æ–‡   text å­˜å‚¨æ–‡æœ¬   blob å­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶   int æ•´å½¢   integer æ•´å½¢">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/9/16b3cc545772bec2?w=1065&h=310&f=jpeg&s=40933">
<meta property="og:updated_time" content="2019-06-16T16:08:01.897Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQLiteçš„ä½¿ç”¨å’Œå®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åº“æ¡†æ¶">
<meta name="twitter:description" content="SQLiteçš„åŸºæœ¬çŸ¥è¯†SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹   å­—æ®µ ä½œç”¨     char(n) å›ºå®šné•¿åº¦çš„å­—ä¸²   varchar(n) é•¿åº¦ä¸å›ºå®šçš„å­—ç¬¦ä¸²,nè¡¨ç¤ºæœ€å¤§çš„é•¿åº¦   nchar(n) åŒcharï¼Œä¸åŒçš„æ˜¯å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸­æ–‡   nvarchar(n) åŒvarcharï¼Œä¸åŒçš„æ˜¯å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸­æ–‡   text å­˜å‚¨æ–‡æœ¬   blob å­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶   int æ•´å½¢   integer æ•´å½¢">
<meta name="twitter:image" content="https://user-gold-cdn.xitu.io/2019/6/9/16b3cc545772bec2?w=1065&h=310&f=jpeg&s=40933">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/06/11/SQLiteçš„ä½¿ç”¨å’Œå®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åº“æ¡†æ¶/">





  <title>SQLiteçš„ä½¿ç”¨å’Œå®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åº“æ¡†æ¶ | æˆ‘çš„ä¸ªäººåšå®¢</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">æˆ‘çš„ä¸ªäººåšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">å“ªæœ‰ä»€ä¹ˆèƒœåˆ©å¯è¨€ï¼ŒæŒºç€å°±ä»£è¡¨ç€ä¸€åˆ‡</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/11/SQLiteçš„ä½¿ç”¨å’Œå®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åº“æ¡†æ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">SQLiteçš„ä½¿ç”¨å’Œå®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åº“æ¡†æ¶</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-06-11T23:57:41+08:00">
                2019-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="SQLiteçš„åŸºæœ¬çŸ¥è¯†"><a href="#SQLiteçš„åŸºæœ¬çŸ¥è¯†" class="headerlink" title="SQLiteçš„åŸºæœ¬çŸ¥è¯†"></a>SQLiteçš„åŸºæœ¬çŸ¥è¯†</h2><h3 id="SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹"><a href="#SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹" class="headerlink" title="SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹"></a>SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹</h3><table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>char(n)</td>
<td>å›ºå®š<code>n</code>é•¿åº¦çš„å­—ä¸²</td>
</tr>
<tr>
<td>varchar(n)</td>
<td>é•¿åº¦ä¸å›ºå®šçš„å­—ç¬¦ä¸²,<code>n</code>è¡¨ç¤ºæœ€å¤§çš„é•¿åº¦</td>
</tr>
<tr>
<td>nchar(n)</td>
<td>åŒcharï¼Œä¸åŒçš„æ˜¯å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸­æ–‡</td>
</tr>
<tr>
<td>nvarchar(n)</td>
<td>åŒvarcharï¼Œä¸åŒçš„æ˜¯å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸­æ–‡</td>
</tr>
<tr>
<td>text</td>
<td>å­˜å‚¨æ–‡æœ¬</td>
</tr>
<tr>
<td>blob</td>
<td>å­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶</td>
</tr>
<tr>
<td>int</td>
<td>æ•´å½¢</td>
</tr>
<tr>
<td>integer</td>
<td>æ•´å½¢</td>
</tr>
<tr>
<td>bigint</td>
<td>æ•´å½¢</td>
</tr>
<tr>
<td>float</td>
<td>å•ç²¾åº¦ç±»å‹</td>
</tr>
<tr>
<td>double</td>
<td>åŒç²¾åº¦æµ®ç‚¹</td>
</tr>
</tbody>
</table>
<p>è¿™é‡Œ<code>int</code>ã€<code>integer</code>ã€<code>bigint</code>çš„å…·ä½“åŒºåˆ«ï¼Œè¿˜æ²¡å¼„æ˜ç™½ã€‚å¦‚æœæœ‰å“ªä¸ªå¤§ä½¬äº†è§£ï¼Œè¯·åœ¨è¯„è®ºåŒºæŒ‡å¯¼ä¸€ä¸‹ğŸ˜„ğŸ˜„</p>
<h3 id="åˆ›å»ºå’Œåˆ é™¤æ•°æ®è¡¨"><a href="#åˆ›å»ºå’Œåˆ é™¤æ•°æ®è¡¨" class="headerlink" title="åˆ›å»ºå’Œåˆ é™¤æ•°æ®è¡¨"></a>åˆ›å»ºå’Œåˆ é™¤æ•°æ®è¡¨</h3><p>åˆ›å»ºè¡¨çš„ä¸ºè¯­æ³•ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> database_name.table_name(</span><br><span class="line">   column1 datatype  primary <span class="keyword">key</span>(one <span class="keyword">or</span> more <span class="keyword">columns</span>),</span><br><span class="line">   column2 datatype,</span><br><span class="line">   column3 datatype,</span><br><span class="line">   .....</span><br><span class="line">   columnN datatype,</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>åˆ é™¤æ•°æ®è¡¨çš„è¯­æ³•ä¸º<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> database_name.table_name;</span><br></pre></td></tr></table></figure></p>
<h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><p>æ’å…¥æ•°æ®è¡¨çš„è¯­æ³•ä¸ºï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> table_name [(column1, column2, column3,...columnN)]  </span><br><span class="line"><span class="keyword">values</span> (value1, value2, value3,...valueN);</span><br><span class="line">æˆ–</span><br><span class="line">//æ³¨æ„ï¼šè¿™ç§æ–¹å¼è¦ç¡®ä¿å€¼çš„é¡ºåºä¸åˆ—åœ¨è¡¨ä¸­çš„é¡ºåºä¸€è‡´</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> table_name <span class="keyword">values</span> (value1,value2,value3,...valueN);</span><br></pre></td></tr></table></figure></p>
<h3 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h3><p>åˆ é™¤æ•°æ®çš„è¯­æ³•ä¸ºï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> table_name [æ¡ä»¶];</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœæ²¡æœ‰åˆ é™¤æ•°æ®çš„æ¡ä»¶ï¼Œé»˜è®¤åˆ é™¤æ‰€æœ‰æ•°æ®ï¼›å¦‚æœæŒ‡å®šäº†æ¡ä»¶ï¼Œåˆ™åˆ é™¤ç¬¦åˆæ¡ä»¶çš„<br>æ•°æ®</p>
<h3 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h3><p>è¯­æ³•ä¸ºï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> table_name</span><br><span class="line"><span class="keyword">set</span> column1 = value1, column2 = value2...., columnN = valueN [æ¡ä»¶];</span><br></pre></td></tr></table></figure></p>
<h3 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h3><p>è¯­æ³•ä¸ºï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//æŸ¥è¯¢æŒ‡å®šå­—æ®µï¼ˆåˆ—ï¼‰çš„å€¼</span><br><span class="line"><span class="keyword">SELECT</span> column1, column2, columnN <span class="keyword">FROM</span> table_name;</span><br><span class="line">æˆ–</span><br><span class="line">//æŸ¥è¯¢æ‰€æœ‰å­—æ®µçš„å€¼</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> table_name;</span><br></pre></td></tr></table></figure></p>
<h3 id="SQLiteçš„é€»è¾‘è¿ç®—ç¬¦"><a href="#SQLiteçš„é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="SQLiteçš„é€»è¾‘è¿ç®—ç¬¦"></a>SQLiteçš„é€»è¾‘è¿ç®—ç¬¦</h3><table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AND</code></td>
<td>AND è¿ç®—ç¬¦å…è®¸åœ¨ä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶çš„å­˜åœ¨</td>
</tr>
<tr>
<td><code>BETWEEN</code></td>
<td>BETWEEN è¿ç®—ç¬¦ç”¨äºåœ¨ç»™å®šæœ€å°å€¼å’Œæœ€å¤§å€¼èŒƒå›´å†…çš„ä¸€ç³»åˆ—å€¼ä¸­æœç´¢å€¼</td>
</tr>
<tr>
<td><code>EXISTS</code></td>
<td>EXISTS è¿ç®—ç¬¦ç”¨äºåœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æŒ‡å®šè¡¨ä¸­æœç´¢è¡Œçš„å­˜åœ¨</td>
</tr>
<tr>
<td><code>IN</code></td>
<td>IN è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒ</td>
</tr>
<tr>
<td><code>NOT IN</code></td>
<td>IN è¿ç®—ç¬¦çš„å¯¹ç«‹é¢ï¼Œç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸åœ¨ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒ</td>
</tr>
<tr>
<td><code>LIKE</code></td>
<td>LIKE è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä½¿ç”¨é€šé…ç¬¦è¿ç®—ç¬¦çš„ç›¸ä¼¼å€¼è¿›è¡Œæ¯”è¾ƒ</td>
</tr>
<tr>
<td><code>GLOB</code></td>
<td>GLOB è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä½¿ç”¨é€šé…ç¬¦è¿ç®—ç¬¦çš„ç›¸ä¼¼å€¼è¿›è¡Œæ¯”è¾ƒã€‚GLOB ä¸ LIKE ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒæ˜¯å¤§å°å†™æ•æ„Ÿçš„</td>
</tr>
<tr>
<td><code>NOT</code></td>
<td>NOT è¿ç®—ç¬¦æ˜¯æ‰€ç”¨çš„é€»è¾‘è¿ç®—ç¬¦çš„å¯¹ç«‹é¢ã€‚æ¯”å¦‚ NOT EXISTSã€NOT BETWEENã€NOT INï¼Œç­‰ç­‰ã€‚å®ƒæ˜¯å¦å®šè¿ç®—ç¬¦</td>
</tr>
<tr>
<td><code>OR</code></td>
<td>OR è¿ç®—ç¬¦ç”¨äºç»“åˆä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶</td>
</tr>
<tr>
<td><code>IS NULL</code></td>
<td>NULL è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ NULL å€¼è¿›è¡Œæ¯”è¾ƒ</td>
</tr>
<tr>
<td><code>IS</code></td>
<td>IS è¿ç®—ç¬¦ä¸ = ç›¸ä¼¼</td>
</tr>
<tr>
<td><code>IS NOT</code></td>
<td><code>IS NOT</code> è¿ç®—ç¬¦ä¸ != ç›¸ä¼¼</td>
</tr>
<tr>
<td>`</td>
<td></td>
<td>`</td>
<td>è¿æ¥ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td><code>UNIQUE</code></td>
<td>UNIQUE è¿ç®—ç¬¦æœç´¢æŒ‡å®šè¡¨ä¸­çš„æ¯ä¸€è¡Œï¼Œç¡®ä¿å”¯ä¸€æ€§ï¼ˆæ— é‡å¤ï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><p><code>where</code>ç”¨æ¥è¿‡æ»¤æ•°æ®çš„ï¼Œä¾‹å¦‚<code>select * from employee where salary &gt;= 65000;</code>æ˜¯æŒ‡æŸ¥è¯¢å·¥èµ„é«˜äº65000çš„å‘˜å·¥çš„æ•°æ®ï¼Œä½¿ç”¨<code>where salary &gt;= 65000;</code>æ¥è¿‡æ»¤æ•°æ®</p>
<h3 id="and-or"><a href="#and-or" class="headerlink" title="and/or"></a>and/or</h3><p><code>and</code>ç›¸å½“äºé€»è¾‘ä¸è¿ç®—ï¼Œåªæœ‰æ¡ä»¶å…¨ä¸ºçœŸæ—¶ï¼Œç»“æœæ‰ä¸ºçœŸï¼›<code>or</code>ç›¸å½“äºé€»è¾‘æˆ–è¿ç®—ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªæ¡ä»¶ä¸ºçœŸï¼Œç»“æœå°±ä¸ºçœŸã€‚</p>
<h3 id="LIKE"><a href="#LIKE" class="headerlink" title="LIKE"></a>LIKE</h3><p><code>LIKE</code>è¿ç®—ç¬¦æ˜¯ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼ŒLIKE è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªé€šé…ç¬¦ä¸ LIKE è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼š</p>
<ul>
<li>ç™¾åˆ†å· ï¼ˆ%ï¼‰</li>
<li>ä¸‹åˆ’çº¿ ï¼ˆ_ï¼‰</li>
</ul>
<p>ç™¾åˆ†å·<code>ï¼ˆ%ï¼‰</code>ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚ä¸‹åˆ’çº¿<code>ï¼ˆ_ï¼‰</code>ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨ã€‚</p>
<p>ä¸‹é¢ä¸€äº›å®ä¾‹æ¼”ç¤ºäº† å¸¦æœ‰ â€˜%â€™ å’Œ â€˜_â€™ è¿ç®—ç¬¦çš„ LIKE å­å¥ä¸åŒçš„åœ°æ–¹ï¼š<br>|è¯­å¥|æè¿°|<br>|â€”-|â€”-|<br>|WHERE SALARY LIKE â€˜200%â€™|æŸ¥æ‰¾ä»¥ 200 å¼€å¤´çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜%200%â€™|æŸ¥æ‰¾ä»»æ„ä½ç½®åŒ…å« 200 çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜<em>00%â€™|æŸ¥æ‰¾ç¬¬äºŒä½å’Œç¬¬ä¸‰ä½ä¸º 00 çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜2</em>%_%â€™|æŸ¥æ‰¾ä»¥ 2 å¼€å¤´ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 3 ä¸ªå­—ç¬¦çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜%2â€™|æŸ¥æ‰¾ä»¥ 2 ç»“å°¾çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜_2%3â€™|æŸ¥æ‰¾ç¬¬äºŒä½ä¸º 2ï¼Œä¸”ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜2___3â€™|æŸ¥æ‰¾é•¿åº¦ä¸º 5 ä½æ•°ï¼Œä¸”ä»¥ 2 å¼€å¤´ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼|</p>
<h3 id="GLOB"><a href="#GLOB" class="headerlink" title="GLOB"></a>GLOB</h3><p><code>GLOB</code> è¿ç®—ç¬¦æ˜¯ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼Œ<code>GLOB</code> è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚ä¸ <code>LIKE</code> è¿ç®—ç¬¦ä¸åŒçš„æ˜¯ï¼Œ<code>GLOB</code> æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œå¯¹äºä¸‹é¢çš„é€šé…ç¬¦ï¼Œå®ƒéµå¾ª UNIX çš„è¯­æ³•ã€‚</p>
<ul>
<li>æ˜Ÿå· ï¼ˆ*ï¼‰</li>
<li>é—®å· ï¼ˆ?ï¼‰</li>
</ul>
<p>æ˜Ÿå·<code>ï¼ˆ*ï¼‰</code>ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚é—®å·<code>ï¼ˆ?ï¼‰</code>ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨ã€‚</p>
<table>
<thead>
<tr>
<th>è¯­å¥</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>WHERE SALARY GLOB â€˜200*â€™</td>
<td>æŸ¥æ‰¾ä»¥ 200 å¼€å¤´çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜<em>200</em>â€˜</td>
<td>æŸ¥æ‰¾ä»»æ„ä½ç½®åŒ…å« 200 çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜?00*â€™</td>
<td>æŸ¥æ‰¾ç¬¬äºŒä½å’Œç¬¬ä¸‰ä½ä¸º 00 çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜2??â€™</td>
<td>æŸ¥æ‰¾ä»¥ 2 å¼€å¤´ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 3 ä¸ªå­—ç¬¦çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜*2â€™</td>
<td>æŸ¥æ‰¾ä»¥ 2 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜?2*3â€™</td>
<td>æŸ¥æ‰¾ç¬¬äºŒä½ä¸º 2ï¼Œä¸”ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜2???3â€™</td>
<td>æŸ¥æ‰¾é•¿åº¦ä¸º 5 ä½æ•°ï¼Œä¸”ä»¥ 2 å¼€å¤´ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
</tbody>
</table>
<h3 id="LIMIT"><a href="#LIMIT" class="headerlink" title="LIMIT"></a>LIMIT</h3><p>å­å¥ç”¨äºé™åˆ¶ç”± SELECT è¯­å¥è¿”å›çš„æ•°æ®æ•°é‡</p>
<h3 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h3><p>å­å¥æ˜¯ç”¨æ¥åŸºäºä¸€ä¸ªæˆ–å¤šä¸ªåˆ—æŒ‰å‡åºæˆ–é™åºé¡ºåºæ’åˆ—æ•°æ®ã€‚</p>
<p>ORDER BY å­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>-<span class="keyword">list</span> </span><br><span class="line"><span class="keyword">FROM</span> table_name </span><br><span class="line">[<span class="keyword">WHERE</span> condition] </span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> column1, column2, .. columnN] [<span class="keyword">ASC</span> | <span class="keyword">DESC</span>];//ASCå‡åºæ’åº,DESCé™åºæ’åº</span><br></pre></td></tr></table></figure></p>
<h3 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a>GROUP BY</h3><p>å­å¥ç”¨äºä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å¯¹ç›¸åŒçš„æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚<br>åœ¨ SELECT è¯­å¥ä¸­ï¼ŒGROUP BY å­å¥æ”¾åœ¨ WHERE å­å¥ä¹‹åï¼Œæ”¾åœ¨ ORDER BY å­å¥ä¹‹å‰</p>
<h3 id="HAVING"><a href="#HAVING" class="headerlink" title="HAVING"></a>HAVING</h3><p>å­å¥å…è®¸æŒ‡å®šæ¡ä»¶æ¥è¿‡æ»¤å°†å‡ºç°åœ¨æœ€ç»ˆç»“æœä¸­çš„åˆ†ç»„ç»“æœã€‚<br>WHERE å­å¥åœ¨æ‰€é€‰åˆ—ä¸Šè®¾ç½®æ¡ä»¶ï¼Œè€Œ HAVING å­å¥åˆ™åœ¨ç”± GROUP BY å­å¥åˆ›å»ºçš„åˆ†ç»„ä¸Šè®¾ç½®æ¡ä»¶ã€‚</p>
<h3 id="DISTINCT"><a href="#DISTINCT" class="headerlink" title="DISTINCT"></a>DISTINCT</h3><p>å…³é”®å­—ä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥æ¶ˆé™¤æ‰€æœ‰é‡å¤çš„è®°å½•ï¼Œå¹¶åªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ã€‚<br>æœ‰å¯èƒ½å‡ºç°ä¸€ç§æƒ…å†µï¼Œåœ¨ä¸€ä¸ªè¡¨ä¸­æœ‰å¤šä¸ªé‡å¤çš„è®°å½•ã€‚å½“æå–è¿™æ ·çš„è®°å½•æ—¶ï¼ŒDISTINCT å…³é”®å­—å°±æ˜¾å¾—ç‰¹åˆ«æœ‰æ„ä¹‰ï¼Œå®ƒåªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ï¼Œè€Œä¸æ˜¯è·å–é‡å¤è®°å½•ã€‚<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> <span class="keyword">name</span> <span class="keyword">from</span> company;</span><br></pre></td></tr></table></figure></p>
<h2 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h2><blockquote>
<p>æ“ä½œæ•°æ®åº“ï¼Œè¦ä½¿ç”¨SQLiteOpenHelperï¼Œç”±äºSQLiteOpenHelperæ˜¯æŠ½è±¡ç±»ï¼Œä½¿ç”¨è¦å®ç°å®ƒï¼Œå¹¶é‡å†™å®ƒçš„ onCreate(), onUpgrade()æ–¹æ³•</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDatabase</span> <span class="keyword">extends</span> <span class="title">SQLiteOpenHelper</span> </span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºè¡¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CreateTable_my=<span class="string">"create Table user("</span> +</span><br><span class="line">            <span class="string">"id primary key, name text, sex text , age integer, password text)"</span>;</span><br><span class="line"></span><br><span class="line">    Context myContext;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name    åˆ›å»ºæ•°æ®åº“çš„åå­—</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> factory ç”¨äºè¿”å›è‡ªå®šä¹‰çš„Cursorï¼Œä¸€èˆ¬å¡«null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> version è¡¨ç¤ºå½“å‰æ•°æ®åº“çš„ç‰ˆæœ¬å·ï¼Œå¯ç”¨äºå¯¹æ•°æ®åº“è¿›è¡Œå‡çº§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Mydatabase</span><span class="params">(Context context, String name, SQLiteDatabase.CursorFactory factory, <span class="keyword">int</span> version)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, name, factory, version);</span><br><span class="line">        myContext=context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase sqLiteDatabase)</span> </span>&#123;</span><br><span class="line">          sqLiteDatabase.execSQL(CreateTable_my);<span class="comment">//åˆ›å»ºè¡¨</span></span><br><span class="line">          Toast.makeText(myContext, <span class="string">"æ•°æ®è¡¨åˆ›å»ºæˆåŠŸ"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase sqLiteDatabase, <span class="keyword">int</span> i, <span class="keyword">int</span> i1)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ›å»ºMyDatabaseçš„å¯¹è±¡</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//first.dbæ˜¯æ•°æ®åº“å</span><br><span class="line">private Mydatabase base=new Mydatabase(DatabaseActivity.this,&quot;first.db&quot;,null,1);</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆæ•°æ®åº“(ä¼šåœ¨<code>/data/data/&lt;package name&gt;/databases/</code>ç›®å½•ä¸‹å»ºç«‹æ•°æ®åº“)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">base.getWritableDatabase();</span><br><span class="line">//æˆ–è€…</span><br><span class="line">base.getReadableDatabase()</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>ä¸¤ä¸ªæ–¹æ³•çš„ä¸åŒå¤„ï¼š<br><br><code>getWritableDatabase()</code>è¿”å›ä¸€ä¸ªå¯å¯¹æ•°æ®åº“è¿›è¡Œè¯»å†™æ“ä½œçš„å¯¹è±¡ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸<br><br><code>getReadableDatabase()</code>è¿”å›ä¸€ä¸ªä»¥åªè¯»æ–¹æ³•æ‰“å¼€çš„æ•°æ®åº“ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸</p>
</blockquote>
<h3 id="æ·»åŠ è¡¨"><a href="#æ·»åŠ è¡¨" class="headerlink" title="æ·»åŠ è¡¨"></a>æ·»åŠ è¡¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mydatabase</span> <span class="keyword">extends</span> <span class="title">SQLiteOpenHelper</span> </span>&#123;</span><br><span class="line"><span class="comment">//ç”¨æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CreateTable_user=<span class="string">"create Table user("</span> +</span><br><span class="line">            <span class="string">"id primary key, name text, sex text , age integer, password text)"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¦ä¸€ä¸ªè¡¨ï¼Œç­çº§è¡¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CreateTable_me=<span class="string">"create Table clazz("</span> +</span><br><span class="line">            <span class="string">"id primary key, className text, teacher text)"</span>;</span><br><span class="line"></span><br><span class="line">    Context myContext;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name    åˆ›å»ºæ•°æ®åº“çš„åå­—</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> factory ç”¨äºè¿”å›è‡ªå®šä¹‰çš„Cursorï¼Œä¸€èˆ¬å¡«null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> version è¡¨ç¤ºå½“å‰æ•°æ®åº“çš„ç‰ˆæœ¬å·ï¼Œå¯ç”¨äºå¯¹æ•°æ®åº“è¿›è¡Œå‡çº§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Mydatabase</span><span class="params">(Context context, String name, SQLiteDatabase.CursorFactory factory, <span class="keyword">int</span> version)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, name, factory, version);</span><br><span class="line">        myContext=context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase sqLiteDatabase)</span> </span>&#123;</span><br><span class="line">          sqLiteDatabase.execSQL(CreateTable_user);</span><br><span class="line">          sqLiteDatabase.execSQL(CreateTable_me);</span><br><span class="line">          Toast.makeText(myContext, <span class="string">"æ•°æ®åº“åˆ›å»ºæˆåŠŸ"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å½“ version ä¸­çš„å€¼æ”¹å˜æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œåˆ é™¤åŸæ¥çš„è¡¨ï¼Œå†è°ƒç”¨onCreate()æ–¹æ³•ç”Ÿæˆä¸¤ä¸ªè¡¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase sqLiteDatabase, <span class="keyword">int</span> i, <span class="keyword">int</span> i1)</span> </span>&#123;</span><br><span class="line">           sqLiteDatabase.execSQL(<span class="string">"drop table if exists user"</span>);</span><br><span class="line">           sqLiteDatabase.execSQL(<span class="string">"drop table if exists clazz"</span>);</span><br><span class="line">           onCreate(sqLiteDatabase);</span><br><span class="line">           Toast.makeText(myContext, <span class="string">"æˆåŠŸ"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ“ä½œè¡¨"><a href="#æ“ä½œè¡¨" class="headerlink" title="æ“ä½œè¡¨"></a>æ“ä½œè¡¨</h3><ul>
<li>æ·»åŠ æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡getWritableDatabase()è·å–SQLiteOpenHelperæ¥æ“ä½œæ•°æ®åº“</span></span><br><span class="line">SQLiteDatabase database= base.getWritableDatabase();</span><br><span class="line">                ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">                values.put(<span class="string">"name"</span>,<span class="string">"å°æ˜"</span>);</span><br><span class="line">                values.put(<span class="string">"sex"</span>,<span class="string">"ç”·"</span>);</span><br><span class="line">                values.put(<span class="string">"password"</span>,<span class="string">"12hjfgikldgislk"</span>);</span><br><span class="line">                values.put(<span class="string">"age"</span>,<span class="number">18</span>);</span><br><span class="line">                <span class="comment">//å‚æ•° 1.è¡¨çš„åå­— 2.ç”¨äºæœªæŒ‡å®šæ·»åŠ æ•°æ®çš„æƒ…å†µä¸‹ç»™æŸäº›å¯ä¸ºç©ºçš„åˆ—è‡ªåŠ¨èµ‹å€¼NULL </span></span><br><span class="line">                <span class="comment">//3. ContentValues å¯¹è±¡</span></span><br><span class="line">                database.insert(<span class="string">"user"</span>,<span class="keyword">null</span>,values);</span><br></pre></td></tr></table></figure>
<ul>
<li>æ›´æ–°æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase database= base.getWritableDatabase();</span><br><span class="line">                ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">                values.put(<span class="string">"name"</span>,<span class="string">"å°å†›"</span>);  </span><br><span class="line">                <span class="comment">//åé¢çš„ä¸¤ä¸ªå‚æ•°æ˜¯æ“ä½œçš„é™åˆ¶æ¡ä»¶</span></span><br><span class="line">                database.update(<span class="string">"user"</span>,values,<span class="string">"age=?"</span>,<span class="keyword">new</span> String[]&#123;<span class="string">"18"</span>&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ é™¤æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase database= base.getWritableDatabase();</span><br><span class="line"><span class="comment">//åé¢çš„ä¸¤ä¸ªå‚æ•°æ˜¯æ“ä½œçš„é™åˆ¶æ¡ä»¶,ç”¨æ¥çº¦æŸåˆ é™¤å“ªå‡ è¡Œï¼Œå¦‚æœä¸æŒ‡å®šå°±åˆ é™¤æ‰€æœ‰è¡Œ</span></span><br><span class="line">database.delete(<span class="string">"user"</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>æŸ¥è¯¢æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase database=base.getWritableDatabase();</span><br><span class="line">Cursor cursor= database.query(<span class="string">"user"</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">if</span> (cursor.moveToFirst())&#123;</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        Log.d(<span class="string">"name:"</span>,cursor.getString(cursor.getColumnIndex(<span class="string">"name"</span>)));</span><br><span class="line">        Log.d(<span class="string">"age:"</span>,cursor.getString(cursor.getColumnIndex(<span class="string">"age"</span>)));</span><br><span class="line">        Log.d(<span class="string">"sex:"</span>,cursor.getString(cursor.getColumnIndex(<span class="string">"sex"</span>)));</span><br><span class="line">        Log.d(<span class="string">"password:"</span>,cursor.getString(cursor.getColumnIndex(<span class="string">"password"</span>)));</span><br><span class="line">    &#125;<span class="keyword">while</span> (cursor.moveToNext());</span><br><span class="line">&#125;</span><br><span class="line">cursor.close();</span><br></pre></td></tr></table></figure>
<p>queryçš„å‚æ•°å¦‚ä¸‹ï¼š<br><img src="https://user-gold-cdn.xitu.io/2019/6/9/16b3cc545772bec2?w=1065&amp;h=310&amp;f=jpeg&amp;s=40933" alt></p>
<ul>
<li>ä½¿ç”¨sqlç›´æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œ</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase database=base.getWritableDatabase();</span><br><span class="line">database.execSQL();</span><br><span class="line">database.rawQuery();<span class="comment">//åªæœ‰æŸ¥è¯¢æ•°æ®çš„æ—¶å€™æ‰è°ƒç”¨è¿™ä¸ªæ–¹æ³•</span></span><br></pre></td></tr></table></figure>
<h2 id="ä»¿ç…§LitePalå®ç°ä¸€ä¸ªç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶SimpleDatabase"><a href="#ä»¿ç…§LitePalå®ç°ä¸€ä¸ªç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶SimpleDatabase" class="headerlink" title="ä»¿ç…§LitePalå®ç°ä¸€ä¸ªç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶SimpleDatabase"></a>ä»¿ç…§<code>LitePal</code>å®ç°ä¸€ä¸ªç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶<code>SimpleDatabase</code></h2><h3 id="SimpleDatabaseçš„ä½¿ç”¨"><a href="#SimpleDatabaseçš„ä½¿ç”¨" class="headerlink" title="SimpleDatabaseçš„ä½¿ç”¨"></a><code>SimpleDatabase</code>çš„ä½¿ç”¨</h3><ol>
<li>å…ˆåœ¨<code>asset</code>æ–‡ä»¶ä¸­åˆ›å»º<code>my_database.xml</code></li>
</ol>
<p><code>my_database.xml</code>å¦‚ä¸‹ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">database</span> <span class="attr">name</span>=<span class="string">"test.db"</span> <span class="attr">version</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--classå±æ€§æ˜¯æ•°æ®è¡¨Beançš„å…¨è·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"com.example.mylibrary.Employee"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">database</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>Employee</code>çš„æºç å¦‚ä¸‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">char</span> sex;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(<span class="keyword">char</span> sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨idä½œä¸ºå‘˜å·¥çš„å”¯ä¸€æ ‡è¯†</span></span><br><span class="line">        <span class="keyword">return</span> Integer.toString(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ³¨æ„ï¼š<code>SimpleDatabase</code>é€šè¿‡<code>toString</code>æ¥åŒºåˆ«ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡ï¼Œå¦‚<code>Employee</code>å°±ä½¿ç”¨<code>id</code>ä½œä¸ºæ ‡è¯†ç¬¦ã€‚</p>
<ol start="2">
<li><p>åœ¨<code>AndroidManifest.xml</code>ä¸­åŠ å…¥<code>android:name=&quot;com.example.databaselibrary.MyApplication&quot;</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.example.databaselibrary.MyApplication"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨<code>SimpleDatabase</code></p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        SimpleDatabase.newInstance().create();<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">        </span><br><span class="line">         Employee employee =<span class="keyword">new</span> Employee();</span><br><span class="line">                employee.setId(<span class="number">1</span>);</span><br><span class="line">                employee.setName(<span class="string">"a"</span>);</span><br><span class="line">                employee.setSex(<span class="string">'ç”·'</span>);</span><br><span class="line">                SimpleDatabase.saveAndUpdate(employee);</span><br><span class="line"></span><br><span class="line">                Employee employee1 =<span class="keyword">new</span> Employee();</span><br><span class="line">                employee1.setId(<span class="number">2</span>);</span><br><span class="line">                employee1.setName(<span class="string">"b"</span>);</span><br><span class="line">                employee1.setSex(<span class="string">'ç”·'</span>);</span><br><span class="line">                SimpleDatabase.saveAndUpdate(employee1);</span><br><span class="line"></span><br><span class="line">                Employee employee2 =<span class="keyword">new</span> Employee();</span><br><span class="line">                employee2.setId(<span class="number">3</span>);</span><br><span class="line">                employee2.setName(<span class="string">"c"</span>);</span><br><span class="line">                employee2.setSex(<span class="string">'å¥³'</span>);</span><br><span class="line">                SimpleDatabase.saveAndUpdate(employee2);</span><br><span class="line"></span><br><span class="line">                List&lt;Employee&gt; l=SimpleDatabase.select(Employee.class,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;l.size() ; i++) &#123;</span><br><span class="line">                    Employee e=l.get(i);</span><br><span class="line">                    Log.d(<span class="string">"==============="</span>,e.getName());</span><br><span class="line">                    Log.d(<span class="string">"==============="</span>,e.getSex()+<span class="string">""</span>);</span><br><span class="line">                    Log.d(<span class="string">"==============="</span>,e.getId()+<span class="string">""</span>);</span><br><span class="line">                &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h3><p>é¦–å…ˆè¯»å–é…ç½®ä¿¡æ¯ï¼Œè·å–æ•°æ®åº“å’Œè¡¨çš„ä¿¡æ¯<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§£æxmlæ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XMLParser</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String RESOURCES=<span class="string">"my_database.xml"</span>;<span class="comment">//é…ç½®æ•°æ®åº“ä¿¡æ¯çš„xmlåå­—</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String TABLE=<span class="string">"table"</span>;<span class="comment">//xmlå±æ€§å¸¸é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String VERSION=<span class="string">"version"</span>;<span class="comment">//xmlå±æ€§å¸¸é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String DATABASE=<span class="string">"database"</span>;<span class="comment">//xmlå±æ€§å¸¸é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String NAME=<span class="string">"name"</span>;<span class="comment">//xmlå±æ€§å¸¸é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; map=<span class="keyword">null</span>;<span class="comment">//ç”¨æ¥å­˜å‚¨æ•°æ®åº“ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; tables=<span class="keyword">null</span>;<span class="comment">//ç”¨æ¥å­˜å‚¨è¡¨ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">XMLParser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        context=MyApplication.getContext();</span><br><span class="line">        map=<span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">2</span>);</span><br><span class="line">        tables=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è§£ææ•°æ®</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">parse</span><span class="params">()</span> <span class="keyword">throws</span> IOException, XmlPullParserException </span>&#123;</span><br><span class="line"></span><br><span class="line">        XmlPullParserFactory factory=XmlPullParserFactory.newInstance();</span><br><span class="line"></span><br><span class="line">        XmlPullParser xmlPullParser=factory.newPullParser();</span><br><span class="line">       <span class="comment">//ä»assetæ–‡ä»¶ä¸‹è¯»å–my_database.xmlçš„ä¿¡æ¯</span></span><br><span class="line">        xmlPullParser.setInput(<span class="keyword">new</span> InputStreamReader(context.getAssets().open(RESOURCES)));</span><br><span class="line">        <span class="keyword">int</span> type=xmlPullParser.getEventType();</span><br><span class="line">        <span class="keyword">while</span>(type!=XmlPullParser.END_DOCUMENT)&#123;</span><br><span class="line">                <span class="keyword">if</span> (xmlPullParser.getEventType()==XmlResourceParser.START_TAG)&#123;<span class="comment">//å¦‚æœä¸ºå¼€å§‹æ ‡ç­¾</span></span><br><span class="line">                    String name=xmlPullParser.getName();</span><br><span class="line">                    <span class="keyword">switch</span> (name)&#123;</span><br><span class="line">                        <span class="keyword">case</span> DATABASE:<span class="comment">//æ ‡ç­¾ä¸º&lt;database&gt;</span></span><br><span class="line">                            parseDatabase(xmlPullParser);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> TABLE:<span class="comment">//æ ‡ç­¾ä¸º&lt;table&gt;</span></span><br><span class="line">                            parseTable(xmlPullParser);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                xmlPullParser.next();<span class="comment">//ä¸‹ä¸€ä¸ªæ ‡ç­¾</span></span><br><span class="line">                type=xmlPullParser.getEventType();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è§£ææ•°æ®åº“ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseDatabase</span><span class="params">(XmlPullParser xmlPullParser)</span>  </span>&#123;</span><br><span class="line">        String databaseName=<span class="keyword">null</span>;</span><br><span class="line">        String version=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (xmlPullParser.getAttributeCount()==<span class="number">2</span>)&#123;</span><br><span class="line">            String value_1=xmlPullParser.getAttributeName(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (NAME.equals(value_1))&#123;</span><br><span class="line">                databaseName=xmlPullParser.getAttributeValue(<span class="number">0</span>);</span><br><span class="line">                version=xmlPullParser.getAttributeValue(<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                databaseName=xmlPullParser.getAttributeValue(<span class="number">1</span>);</span><br><span class="line">                version=xmlPullParser.getAttributeValue(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> MyException(<span class="string">"databaseæ ‡ç­¾çš„å‚æ•°é”™è¯¯"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(DATABASE,databaseName);</span><br><span class="line">        map.put(VERSION,version);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è§£æè¡¨æ ¼ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseTable</span><span class="params">(XmlPullParser xmlPullParser)</span> </span>&#123;</span><br><span class="line">        String className=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (xmlPullParser.getAttributeCount()==<span class="number">1</span>)&#123;</span><br><span class="line">            className=xmlPullParser.getAttributeValue(<span class="number">0</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> MyException(<span class="string">"tableå‚æ•°é”™è¯¯"</span>);</span><br><span class="line">        tables.add(className);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">getMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getTables</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tables;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åˆ›å»ºæ•°æ®åº“çš„ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDatabase</span> <span class="keyword">extends</span> <span class="title">SQLiteOpenHelper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> onDatabaseUpdateListener listener=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MyDatabase"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyDatabase</span><span class="params">(Context context, String name, SQLiteDatabase.CursorFactory factory, <span class="keyword">int</span> version,onDatabaseUpdateListener listener)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, name, factory, version);</span><br><span class="line">        <span class="keyword">this</span>.listener=listener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">        String[] createTables = listener.onCreate();</span><br><span class="line">            <span class="keyword">for</span> (String s: createTables)&#123;</span><br><span class="line">                db.execSQL(s);</span><br><span class="line">                Log.d(<span class="string">"======å»ºè¡¨è¯­å¥"</span>,s);</span><br><span class="line">            &#125;</span><br><span class="line">        Log.d(<span class="string">"======"</span>,<span class="string">"onCreateæ‰§è¡Œ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="keyword">int</span> oldVersion, <span class="keyword">int</span> newVersion)</span> </span>&#123;</span><br><span class="line">        String[] deleteTable = listener.update(db);</span><br><span class="line">        Log.d(<span class="string">"======"</span>,<span class="string">"onUpgradeæ‰§è¡Œ"</span>);</span><br><span class="line">           <span class="keyword">if</span> (deleteTable !=<span class="keyword">null</span>)&#123;</span><br><span class="line">               <span class="keyword">for</span> (String s: deleteTable)&#123;</span><br><span class="line">                   db.execSQL(s);</span><br><span class="line">                   Log.d(<span class="string">"=====åˆ è¡¨è¯­å¥"</span>,s);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           onCreate(db);</span><br><span class="line">           listener.onCreateLater(db);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">onDatabaseUpdateListener</span></span>&#123;</span><br><span class="line">        String[] update(SQLiteDatabase db);<span class="comment">//æ•°æ®åº“ç‰ˆæœ¬æ›´æ–°æ—¶è°ƒç”¨</span></span><br><span class="line">        String[] onCreate();<span class="comment">//åˆ›å»ºæ–°çš„è¡¨æ—¶è°ƒç”¨</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span>  <span class="title">onCreateLater</span><span class="params">(SQLiteDatabase db)</span></span>;<span class="comment">//åˆ›å»ºå®Œè¡¨æ—¶è°ƒç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å®Œæˆæ•°æ®åº“æ“ä½œçš„å®ç°ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°æ•°æ®çš„æ“ä½œå’Œæ•°æ®åº“çš„åˆ›å»º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleDatabase</span> <span class="keyword">implements</span> <span class="title">MyDatabase</span>.<span class="title">onDatabaseUpdateListener</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String NAME=<span class="string">"SimpleDatabase.xml"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String OLD=<span class="string">"old"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String TABLE=<span class="string">"table_"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String NUMBER=<span class="string">"number"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//MyDatabaseHelperæ˜¯ä¸€ä¸ªè¾…åŠ©ç±»ï¼Œç”¨æ¥ç”Ÿæˆåˆ›å»ºæ•°æ®åº“å’Œè¡¨æ‰€éœ€è¦çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MyDatabaseHelper databaseHelper=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> SQLiteDatabase db=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> Map&lt;String,Cursor&gt; savedData=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    String simpleNames[]=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"SimpleDatabase"</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> SimpleDatabase simpleDatabase=<span class="keyword">new</span> SimpleDatabase();</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">SimpleDatabase</span><span class="params">()</span></span>&#123;</span><br><span class="line">       init();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">       databaseHelper=<span class="keyword">new</span> MyDatabaseHelper();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æŒ‡å®šçš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span>&lt;T&gt; List&lt;T&gt; <span class="title">select</span><span class="params">(Class&lt;T&gt; clazz,String columnNames[],String where,</span></span></span><br><span class="line"><span class="function"><span class="params">                                String args[],String groupBy, String having, String orderBy)</span></span>&#123;</span><br><span class="line">        List&lt;T&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Cursor cursor= db.query(clazz.getSimpleName(),columnNames,where,args,groupBy,having,orderBy);</span><br><span class="line">        <span class="keyword">while</span>(cursor.moveToNext())&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                T t = clazz.newInstance();</span><br><span class="line">                Field fields[]=clazz.getDeclaredFields();</span><br><span class="line">                <span class="keyword">for</span> (Field f:fields) &#123;</span><br><span class="line">                        f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                        String fieldName = f.getName();</span><br><span class="line">                        String fieldValue = cursor.getColumnName(cursor.getColumnIndex(fieldName));</span><br><span class="line">                        <span class="comment">//ç”±äºgetColumnNameï¼ˆï¼‰åªä¼šè¿”å›Stringç±»å‹ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦getInitialTypeValue()</span></span><br><span class="line">                        <span class="comment">//è·å–åˆå§‹ç±»å‹çš„å€¼</span></span><br><span class="line">                        f.set(t,getInitialTypeValue(f.getType().getSimpleName(),fieldValue));</span><br><span class="line">                &#125;</span><br><span class="line">                list.add(t);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InstantiationException | IllegalAccessException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cursor.close();</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Object <span class="title">getInitialTypeValue</span><span class="params">(String type,String value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (type)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"int"</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"integer"</span>:</span><br><span class="line">                <span class="keyword">return</span> Integer.valueOf(value);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"boolean"</span>:</span><br><span class="line">                <span class="keyword">return</span> Boolean.valueOf(value);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"float"</span>:</span><br><span class="line">                <span class="keyword">return</span> Float.valueOf(value);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"double"</span>:</span><br><span class="line">                <span class="keyword">return</span> Double.valueOf(value);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"String"</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Character"</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"char"</span>:</span><br><span class="line">               <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æŒ‡å®šçš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Cursor <span class="title">select</span><span class="params">(Object obj,String columnNames[],String where,String args[])</span></span>&#123;</span><br><span class="line">       String tableName=obj.getClass().getSimpleName();</span><br><span class="line">       <span class="keyword">return</span> db.query(tableName,columnNames,where,args,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœä¸å­˜åœ¨æ•°æ®åº“å°±åˆ›å»ºï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥ç»“æŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">create</span><span class="params">()</span></span>&#123;</span><br><span class="line">       String name=databaseHelper.getName();</span><br><span class="line">       String version=databaseHelper.getVersion();</span><br><span class="line">       <span class="keyword">if</span> (databaseHelper.check(getOldVersion(),Integer.valueOf(version)))<span class="comment">//å¦‚æœéœ€è¦æ›´æ–°</span></span><br><span class="line">           saveDataInSharedPreferences(Integer.valueOf(version));</span><br><span class="line">       Log.d(<span class="string">"========="</span>,<span class="string">"name"</span>+name);</span><br><span class="line">       MyDatabase database = <span class="keyword">new</span> MyDatabase(MyApplication.getContext(), name, <span class="keyword">null</span>, Integer.valueOf(version), SimpleDatabase.<span class="keyword">this</span>);</span><br><span class="line">       db= database.getWritableDatabase();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SimpleDatabase <span class="title">newInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> simpleDatabase;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­˜å‚¨æ‰¹é‡æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> list</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(List&lt;Object&gt; list)</span>  </span>&#123;</span><br><span class="line">       <span class="keyword">for</span> (Object o:list) &#123;</span><br><span class="line">           save(o);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­˜å‚¨å•ä¸ªæ•°æ®åˆ°è¡¨ä¸­</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Object o)</span>  </span>&#123;</span><br><span class="line">           Class clazz=o.getClass();</span><br><span class="line">           Field fields[]=clazz.getDeclaredFields();</span><br><span class="line">           ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">           values.put(<span class="string">"simple_database_id"</span>,o.toString());</span><br><span class="line">           <span class="keyword">for</span> (Field f:fields) &#123;</span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                      f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                      <span class="keyword">if</span> (f.get(o)!=<span class="keyword">null</span>&amp;&amp;!<span class="string">"serialVersionUID"</span>.equals(f.getName())) &#123;</span><br><span class="line">                          values.put(f.getName(), f.get(o).toString());</span><br><span class="line">                          Log.d(<span class="string">"========value"</span>, f.get(o).toString());</span><br><span class="line">                      &#125;</span><br><span class="line">               &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">                   e.printStackTrace();</span><br><span class="line">                   Log.wtf(TAG,<span class="string">"ç±»ä¸­æ‰€ä»¥çš„æ•°æ®åº”è¯¥è®¾ç½®å€¼"</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           db.insert(clazz.getSimpleName(),<span class="keyword">null</span>,values);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveAndUpdate</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">       Class clazz=o.getClass();</span><br><span class="line">       String id=o.toString();</span><br><span class="line">       Field fields[]=clazz.getDeclaredFields();</span><br><span class="line">       ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">       values.put(<span class="string">"simple_database_id"</span>,o.toString());</span><br><span class="line">       <span class="keyword">for</span> (Field f:fields) &#123;</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">               <span class="keyword">if</span> (f.get(o)!=<span class="keyword">null</span>&amp;&amp;!<span class="string">"serialVersionUID"</span>.equals(f.getName())) &#123;</span><br><span class="line">                   values.put(f.getName(), f.get(o).toString());</span><br><span class="line">                   Log.d(<span class="string">"========value"</span>, f.get(o).toString());</span><br><span class="line">               &#125;</span><br><span class="line">           &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">               Log.wtf(TAG,<span class="string">"ç±»ä¸­æ‰€ä»¥çš„æ•°æ®åº”è¯¥è®¾ç½®å€¼"</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       Cursor cursor=select(o,<span class="keyword">null</span>,<span class="string">"simple_database_id=?"</span>,<span class="keyword">new</span> String[]&#123;id&#125;);</span><br><span class="line">       <span class="keyword">if</span> (cursor.getCount()==<span class="number">0</span>)&#123;<span class="comment">//æ’å…¥</span></span><br><span class="line">           db.insert(clazz.getSimpleName(),<span class="keyword">null</span>,values);</span><br><span class="line">       &#125;<span class="keyword">else</span> &#123;<span class="comment">//æ›´æ–°</span></span><br><span class="line">           db.update(clazz.getSimpleName(),values,<span class="string">"simple_database_id=?"</span>,<span class="keyword">new</span> String[]&#123;id&#125;);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">       Class clazz=o.getClass();</span><br><span class="line">       delete(clazz.getSimpleName(),<span class="string">"simple_database_id=?"</span>,o.toString());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤è¡¨ä¸­æŒ‡å®šçš„æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> where</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(String name,String where,String... arg)</span></span>&#123;</span><br><span class="line">       db.delete(name,where,arg);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœç‰ˆæœ¬æ›´æ–°ï¼Œåˆ™å­˜å‚¨æœ€æ–°çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> version ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveDataInSharedPreferences</span><span class="params">(<span class="keyword">int</span> version)</span></span>&#123;</span><br><span class="line">       <span class="comment">//è·å–SharedPreferencesçš„Editorå¯¹è±¡æ¥æ‰§è¡Œå‚¨å­˜æ“ä½œ</span></span><br><span class="line">       SharedPreferences.Editor editor=MyApplication.getContext().getSharedPreferences(NAME,<span class="number">0</span>).edit();</span><br><span class="line">       editor.putInt(OLD,version);</span><br><span class="line">       editor.apply();<span class="comment">//æœ€åä¸€å®šè¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå®Œæˆæ•°æ®çš„å‚¨å­˜</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *å­˜å‚¨è¿‡å»çš„è¡¨å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> names</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">saveDataInSharedPreferences</span><span class="params">(String[] names)</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·å–SharedPreferencesçš„Editorå¯¹è±¡æ¥æ‰§è¡Œå‚¨å­˜æ“ä½œ</span></span><br><span class="line">        SharedPreferences.Editor editor=MyApplication.getContext().getSharedPreferences(NAME,<span class="number">0</span>).edit();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;names.length;i++)&#123;</span><br><span class="line">            editor.putString(TABLE+i,names[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        editor.putInt(NUMBER,names.length);</span><br><span class="line">        editor.apply();<span class="comment">//æœ€åä¸€å®šè¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå®Œæˆæ•°æ®çš„å‚¨å­˜</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ä¸Šä¸€æ¬¡çš„æ•°æ®åº“çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getOldVersion</span><span class="params">()</span></span>&#123;</span><br><span class="line">       SharedPreferences get=MyApplication.getContext().getSharedPreferences(NAME,<span class="number">0</span>);</span><br><span class="line">       <span class="keyword">return</span> get.getInt(OLD,<span class="number">0</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] getOldTableName()&#123;</span><br><span class="line">        SharedPreferences get=MyApplication.getContext().getSharedPreferences(NAME,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> length=get.getInt(NUMBER,-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (length==-<span class="number">1</span>)</span><br><span class="line">            Log.wtf(TAG,<span class="string">"åŸæœ‰è¡¨æ ¼ä¸å­˜åœ¨"</span>);</span><br><span class="line">        String names[]=<span class="keyword">new</span> String[length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length;i++)&#123;</span><br><span class="line">            names[i]=get.getString(TABLE+i,<span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> names;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] update(SQLiteDatabase db) &#123;<span class="comment">//åœ¨åˆ é™¤è¡¨ä¹‹å‰æŠŠè¡¨çš„æ•°æ®ä¿å­˜èµ·æ¥</span></span><br><span class="line">        simpleNames=getOldTableName();</span><br><span class="line">        savedData=<span class="keyword">new</span> HashMap&lt;&gt;(simpleNames.length);</span><br><span class="line">        <span class="keyword">for</span> (String name:simpleNames) &#123;</span><br><span class="line">            Cursor cursor=db.query(name,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line">            savedData.put(name,cursor);</span><br><span class="line">        &#125;</span><br><span class="line">        Cursor cursor=savedData.get(simpleNames[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">if</span> (cursor.moveToFirst())&#123;</span><br><span class="line">            String sex=cursor.getString(cursor.getColumnIndex(<span class="string">"sex"</span>));</span><br><span class="line">            Log.d(<span class="string">"===============update"</span>,<span class="string">"sex="</span>+sex);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> databaseHelper.getDeleteTable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] onCreate() &#123;</span><br><span class="line">        saveDataInSharedPreferences(databaseHelper.getSimpleTableName());</span><br><span class="line">        <span class="keyword">return</span> databaseHelper.getCreateTable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreateLater</span><span class="params">(SQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">        recoverAllData(db);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¢å¤æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">recoverAllData</span><span class="params">(SQLiteDatabase db)</span></span>&#123;</span><br><span class="line">       List&lt;String&gt; deleteTable=checkWhichTableDisappear(databaseHelper.getTables());</span><br><span class="line">       List&lt;String&gt; nowTable=Arrays.asList(simpleNames);</span><br><span class="line">       nowTable.remove(deleteTable);</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nowTable.size();i++)&#123;</span><br><span class="line">          Cursor cursor=savedData.get(nowTable.get(i));</span><br><span class="line">          ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">           <span class="keyword">if</span> (cursor.moveToFirst())&#123;</span><br><span class="line">               <span class="keyword">do</span>&#123;</span><br><span class="line">                   String columnNames[]=cursor.getColumnNames();</span><br><span class="line">                   <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;columnNames.length;j++)</span><br><span class="line">                         values.put(columnNames[j],cursor.getString(cursor.getColumnIndex(columnNames[j])));</span><br><span class="line">               &#125;<span class="keyword">while</span> (cursor.moveToNext());</span><br><span class="line">               db.insert(nowTable.get(i),<span class="keyword">null</span>,values);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">        <span class="keyword">for</span> (String n:simpleNames) &#123;<span class="comment">//é‡Šæ”¾æ‰€æœ‰çš„èµ„æº</span></span><br><span class="line">            savedData.get(n).close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥æœ‰å“ªäº›è¡¨è¢«åˆ é™¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> newTable</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">checkWhichTableDisappear</span><span class="params">(List&lt;String&gt; newTable)</span></span>&#123;</span><br><span class="line">            String deleteTable[]=<span class="keyword">new</span> String[simpleNames.length];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;simpleNames.length;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span> (!newTable.contains(simpleNames[i]))&#123;</span><br><span class="line">                    deleteTable[j]=simpleNames[i];</span><br><span class="line">                    j++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          <span class="keyword">return</span> Arrays.asList(deleteTable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>SimpleDatabase</code>çš„ä¸»è¦ä½œç”¨æ˜¯åœ¨<code>my_database.xml</code>ä¸­çš„é…ç½®æ›´æ”¹æ—¶ï¼Œèƒ½è‡ªåŠ¨æ›´æ–°æ•°æ®åº“ï¼›æ’å…¥å’Œæ›´æ–°æ—¶ï¼Œé€šè¿‡<code>saveAndUpdate(Object o)</code>ä½¿ç”¨å¯¹è±¡æ¥å®ç°æ’å…¥å’Œæ›´æ–°æ“ä½œï¼ˆå½“æ•°æ®åº“ä¸­ä¸å­˜åœ¨åŒä¸€æ¡æ•°æ®æ—¶ï¼Œå°±æ’å…¥ï¼›å½“æ•°æ®åº“ä¸­å­˜åœ¨åŒä¸€æ¡æ•°æ®æ—¶ï¼Œå°±æ›´æ–°ï¼‰ï¼›æŸ¥è¯¢æ—¶ï¼Œé€šè¿‡</p>
<p><code>List&lt;T&gt; select(Class&lt;T&gt; clazz,String columnNames[],String where,String args[],String groupBy, String having, String orderBy)</code>è·å–åŒ…å«æŸ¥è¯¢ç»“æœå¯¹è±¡çš„é›†åˆï¼›åˆ é™¤æ—¶ï¼Œé€šè¿‡<code>delete(Object o)</code>ä½¿ç”¨å¯¹è±¡æ¥å®ç°åˆ é™¤æ“ä½œã€‚</p>
<p>å®ç°åŸç†ï¼š</p>
<p><code>SimpleDatabase</code>é€šè¿‡å®ç°<code>MyDatabase</code>çš„<code>onDatabaseUpdateListener</code>æ¥å£ï¼Œç›‘å¬<code>MyDatabase</code>çš„<code>onCreate</code>å’Œ<code>onUpgrade</code>æ–¹æ³•ã€‚åœ¨<code>onCreate</code>è¢«è°ƒç”¨æ—¶ï¼Œè°ƒç”¨<code>onDatabaseUpdateListener.onCreate</code>æ¥å­˜å‚¨ä¹‹å‰çš„è¡¨åï¼ˆå¦‚æœä¿®æ”¹äº†é…ç½®æ–‡ä»¶çš„è¯ï¼‰ï¼Œå¹¶è¿”å›åˆ›å»ºè¡¨çš„sqlè¯­å¥é›†åˆï¼ˆå¯èƒ½åˆ›å»ºå¤šä¸ªè¡¨ï¼‰ï¼Œä¹‹ååœ¨<code>MyDatabase.onCreate</code>ä¸­åˆ›å»ºè¡¨ã€‚å½“<code>onUpgrade</code>è¢«è°ƒç”¨æ—¶ï¼Œè°ƒç”¨<code>onDatabaseUpdateListener.update</code>æ¥å­˜å‚¨å½“å‰æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå¹¶è¿”å›åˆ é™¤è¡¨çš„sqlè¯­å¥é›†åˆï¼Œåˆ é™¤æˆåŠŸååˆ›å»ºæ–°çš„è¡¨ï¼Œä¹‹åè°ƒç”¨<code>onDatabaseUpdateListener.onCreateLater</code>æ–¹æ³•å°†ä¹‹å‰å­˜å‚¨çš„æ•°æ®é‡æ–°å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚</p>
<p><code>SimpleDatabase</code>ä¸­çš„<code>select</code>ã€<code>delete</code>ã€<code>saveAndUpdate</code>æ–¹æ³•æ˜¯é€šè¿‡åå°„å®ç°çš„ï¼Œå…·ä½“å¯ä»¥çœ‹æ³¨é‡Šã€‚</p>
<p>å…¶ä»–ç±»çš„å®ç°å¾ˆç®€å•ï¼Œå…·ä½“å¯ä»¥çœ‹æºç ï¼š</p>
<ul>
<li><p>MyApplicationç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç³»ç»Ÿçš„context</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Context context;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate();</span><br><span class="line">        context = getApplicationContext();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Context <span class="title">getContext</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> context;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>MyDatabaseHelperç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”Ÿæˆåˆ›å»ºæ•°æ®åº“å’Œè¡¨æ‰€éœ€è¦çš„æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDatabaseHelper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String version=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; tables=<span class="keyword">null</span>;<span class="comment">//å­˜å‚¨å®Œæ•´ç±»å</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Table[]&gt; maps=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String createTable[]=<span class="keyword">null</span>;<span class="comment">//å­˜å‚¨å»ºè¡¨è¯­å¥</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String deleteTable[]=<span class="keyword">null</span>;<span class="comment">//å­˜å‚¨åˆ é™¤è¡¨çš„è¯­å¥</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> ok=<span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MyDatabaseHelper"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyDatabaseHelper</span><span class="params">()</span></span>&#123;</span><br><span class="line">       init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        XMLParser xmlParser=<span class="keyword">null</span>;</span><br><span class="line">        xmlParser=<span class="keyword">new</span> XMLParser();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            xmlParser.parse();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException | XmlPullParserException  e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        name=xmlParser.getMap().get(XMLParser.DATABASE);</span><br><span class="line">        version=xmlParser.getMap().get(XMLParser.VERSION);</span><br><span class="line">        tables=xmlParser.getTables();</span><br><span class="line">        maps=<span class="keyword">new</span> HashMap&lt;&gt;(tables.size());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> old ä¹‹å‰çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> now ç°åœ¨çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> old,<span class="keyword">int</span> now)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (now&gt;old) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                parseTable();</span><br><span class="line">                ok=<span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£æç±»çš„æ•°æ®,åœ¨versionæ”¹å˜æ—¶è°ƒç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ClassNotFoundException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseTable</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (String name:tables)&#123;</span><br><span class="line">            Class table=Class.forName(name);</span><br><span class="line">            Field[] field=table.getDeclaredFields();</span><br><span class="line">            Table info[]=<span class="keyword">new</span> Table[field.length];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;field.length;i++)&#123;</span><br><span class="line">                Table t=<span class="keyword">new</span> Table();</span><br><span class="line">                t.setProperty(field[i].getName());</span><br><span class="line">                t.setType(field[i].getType().getSimpleName());</span><br><span class="line">                info[i]=t;</span><br><span class="line">            &#125;</span><br><span class="line">            maps.put(name,info);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆå»ºè¡¨è¯­å¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">generateTable</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;tables.size();i++)&#123;</span><br><span class="line">            Table table[]=maps.get(tables.get(i));</span><br><span class="line">            StringBuilder stringBuilder=<span class="keyword">new</span> StringBuilder();</span><br><span class="line">            String simpleName=getSimpleName(tables.get(i));</span><br><span class="line">            stringBuilder.append(<span class="string">"create table "</span>+simpleName+<span class="string">"( "</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;table.length;j++)&#123;</span><br><span class="line">                Table t=table[j];</span><br><span class="line">                <span class="keyword">if</span> (t!=<span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">if</span> (!Table.OTHER.equals(t.getType()))</span><br><span class="line">                    stringBuilder.append(<span class="string">" , "</span>+t.getProperty()+<span class="string">" "</span>+t.getType());</span><br><span class="line">            &#125;</span><br><span class="line">            String string=stringBuilder.append(<span class="string">")"</span>).toString();</span><br><span class="line">            string=string.replaceFirst(<span class="string">","</span>,<span class="string">""</span>);</span><br><span class="line">            createTable[i]=string;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆåˆ é™¤è¡¨çš„è¯­å¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleteTable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tables.size(); i++) &#123;</span><br><span class="line">            deleteTable[i]=<span class="string">"drop table if exists "</span>+getSimpleName(tables.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç®€å•ç±»åï¼Œä¸åŒ…æ‹¬åŒ…</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name å¸¦æœ‰åŒ…åçš„ç±»å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ä¸åŒ…å«åŒ…åçš„ç±»å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getSimpleName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">       <span class="keyword">int</span> position= name.lastIndexOf(<span class="string">'.'</span>);</span><br><span class="line">       <span class="keyword">return</span> name.substring(position+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getVersion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> version;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getCreateTable() &#123;</span><br><span class="line">        <span class="keyword">if</span> (!ok)</span><br><span class="line">            Log.e(TAG,<span class="string">"å¿…é¡»å…ˆè°ƒç”¨check()"</span>);</span><br><span class="line">        createTable=<span class="keyword">new</span> String[tables.size()];</span><br><span class="line">        generateTable();</span><br><span class="line">        <span class="keyword">return</span> createTable;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getDeleteTable() &#123;</span><br><span class="line">        <span class="keyword">if</span> (!ok)</span><br><span class="line">            Log.e(TAG,<span class="string">"å¿…é¡»å…ˆè°ƒç”¨check()"</span>);</span><br><span class="line">        deleteTable=<span class="keyword">new</span> String[tables.size()];</span><br><span class="line">        deleteTable();</span><br><span class="line">        <span class="keyword">return</span> deleteTable;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getTables</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tables;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getSimpleTableName() &#123;</span><br><span class="line"></span><br><span class="line">        String simpleTableName[]=<span class="keyword">new</span> String[tables.size()];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;tables.size();i++) &#123;</span><br><span class="line"></span><br><span class="line">            String simpleName = getSimpleName(tables.get(i));</span><br><span class="line"></span><br><span class="line">            simpleTableName[i] = simpleName;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> simpleTableName;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>MyException</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Tableç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­˜å‚¨æ¯ä¸ªå­—æ®µå¯¹åº”çš„å±æ€§å’Œåå­—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Table</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String INTEGER=<span class="string">"integer"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String TEXT=<span class="string">"text"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String REAL=<span class="string">"real"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String BLOB=<span class="string">"blob"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String INT=<span class="string">"int"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String CHAR=<span class="string">"char"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String FLOAT=<span class="string">"float"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String DOUBLE=<span class="string">"double"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String STRING=<span class="string">"String"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String BOOLEAN=<span class="string">"boolean"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String OTHER=<span class="string">"other"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String property;<span class="comment">//å¯¹åº”çš„å±æ€§</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String type;<span class="comment">//å¯¹åº”çš„å±æ€§çš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getProperty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> property;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProperty</span><span class="params">(String property)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.property = property;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        checkProperty(type);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">checkProperty</span><span class="params">(String property)</span></span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (property)&#123;</span><br><span class="line">            <span class="keyword">case</span> INT:</span><br><span class="line">            <span class="keyword">case</span> BOOLEAN:</span><br><span class="line">                type=INTEGER;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> FLOAT:</span><br><span class="line">            <span class="keyword">case</span> DOUBLE:</span><br><span class="line">                type=REAL;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> STRING:</span><br><span class="line">            <span class="keyword">case</span> CHAR:</span><br><span class="line">                type=TEXT;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                 type=OTHER;</span><br><span class="line">                 <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å‚è€ƒ<a href="https://www.runoob.com/sqlite/sqlite-tutorial.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/05/TCP-IPçš„å­¦ä¹ æ€»ç»“/" rel="next" title="TCP/IPçš„å­¦ä¹ æ€»ç»“">
                <i class="fa fa-chevron-left"></i> TCP/IPçš„å­¦ä¹ æ€»ç»“
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/user.jpg" alt="lichukuan">
            
              <p class="site-author-name" itemprop="name">lichukuan</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">62</span>
                  <span class="site-state-item-name">åšå®¢</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#SQLiteçš„åŸºæœ¬çŸ¥è¯†"><span class="nav-number">1.</span> <span class="nav-text">SQLiteçš„åŸºæœ¬çŸ¥è¯†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹"><span class="nav-number">1.1.</span> <span class="nav-text">SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ›å»ºå’Œåˆ é™¤æ•°æ®è¡¨"><span class="nav-number">1.2.</span> <span class="nav-text">åˆ›å»ºå’Œåˆ é™¤æ•°æ®è¡¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ’å…¥æ•°æ®"><span class="nav-number">1.3.</span> <span class="nav-text">æ’å…¥æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ é™¤æ•°æ®"><span class="nav-number">1.4.</span> <span class="nav-text">åˆ é™¤æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ›´æ–°æ•°æ®"><span class="nav-number">1.5.</span> <span class="nav-text">æ›´æ–°æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æŸ¥è¯¢æ•°æ®"><span class="nav-number">1.6.</span> <span class="nav-text">æŸ¥è¯¢æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQLiteçš„é€»è¾‘è¿ç®—ç¬¦"><span class="nav-number">1.7.</span> <span class="nav-text">SQLiteçš„é€»è¾‘è¿ç®—ç¬¦</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#where"><span class="nav-number">1.8.</span> <span class="nav-text">where</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#and-or"><span class="nav-number">1.9.</span> <span class="nav-text">and/or</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LIKE"><span class="nav-number">1.10.</span> <span class="nav-text">LIKE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GLOB"><span class="nav-number">1.11.</span> <span class="nav-text">GLOB</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LIMIT"><span class="nav-number">1.12.</span> <span class="nav-text">LIMIT</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ORDER-BY"><span class="nav-number">1.13.</span> <span class="nav-text">ORDER BY</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GROUP-BY"><span class="nav-number">1.14.</span> <span class="nav-text">GROUP BY</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HAVING"><span class="nav-number">1.15.</span> <span class="nav-text">HAVING</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DISTINCT"><span class="nav-number">1.16.</span> <span class="nav-text">DISTINCT</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆ›å»ºæ•°æ®åº“"><span class="nav-number">2.</span> <span class="nav-text">åˆ›å»ºæ•°æ®åº“</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ·»åŠ è¡¨"><span class="nav-number">2.1.</span> <span class="nav-text">æ·»åŠ è¡¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ“ä½œè¡¨"><span class="nav-number">2.2.</span> <span class="nav-text">æ“ä½œè¡¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»¿ç…§LitePalå®ç°ä¸€ä¸ªç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶SimpleDatabase"><span class="nav-number">3.</span> <span class="nav-text">ä»¿ç…§LitePalå®ç°ä¸€ä¸ªç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶SimpleDatabase</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SimpleDatabaseçš„ä½¿ç”¨"><span class="nav-number">3.1.</span> <span class="nav-text">SimpleDatabaseçš„ä½¿ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®ç°åŸç†"><span class="nav-number">3.2.</span> <span class="nav-text">å®ç°åŸç†</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lichukuan</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
