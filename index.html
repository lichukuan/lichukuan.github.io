<!DOCTYPE html>



  



<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="æˆ‘çš„ä¸ªäººåšå®¢">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="æˆ‘çš„ä¸ªäººåšå®¢">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æˆ‘çš„ä¸ªäººåšå®¢">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>æˆ‘çš„ä¸ªäººåšå®¢</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">æˆ‘çš„ä¸ªäººåšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">å“ªæœ‰ä»€ä¹ˆèƒœåˆ©å¯è¨€ï¼ŒæŒºç€å°±ä»£è¡¨ç€ä¸€åˆ‡</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/11/SQLiteçš„ä½¿ç”¨å’Œå®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åº“æ¡†æ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/11/SQLiteçš„ä½¿ç”¨å’Œå®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åº“æ¡†æ¶/" itemprop="url">SQLiteçš„ä½¿ç”¨å’Œå®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åº“æ¡†æ¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-06-11T23:57:41+08:00">
                2019-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="SQLiteçš„åŸºæœ¬çŸ¥è¯†"><a href="#SQLiteçš„åŸºæœ¬çŸ¥è¯†" class="headerlink" title="SQLiteçš„åŸºæœ¬çŸ¥è¯†"></a>SQLiteçš„åŸºæœ¬çŸ¥è¯†</h2><h3 id="SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹"><a href="#SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹" class="headerlink" title="SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹"></a>SQLiteå¸¸ç”¨çš„æ•°æ®ç±»å‹</h3><table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>char(n)</td>
<td>å›ºå®š<code>n</code>é•¿åº¦çš„å­—ä¸²</td>
</tr>
<tr>
<td>varchar(n)</td>
<td>é•¿åº¦ä¸å›ºå®šçš„å­—ç¬¦ä¸²,<code>n</code>è¡¨ç¤ºæœ€å¤§çš„é•¿åº¦</td>
</tr>
<tr>
<td>nchar(n)</td>
<td>åŒcharï¼Œä¸åŒçš„æ˜¯å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸­æ–‡</td>
</tr>
<tr>
<td>nvarchar(n)</td>
<td>åŒvarcharï¼Œä¸åŒçš„æ˜¯å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸­æ–‡</td>
</tr>
<tr>
<td>text</td>
<td>å­˜å‚¨æ–‡æœ¬</td>
</tr>
<tr>
<td>blob</td>
<td>å­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶</td>
</tr>
<tr>
<td>int</td>
<td>æ•´å½¢</td>
</tr>
<tr>
<td>integer</td>
<td>æ•´å½¢</td>
</tr>
<tr>
<td>bigint</td>
<td>æ•´å½¢</td>
</tr>
<tr>
<td>float</td>
<td>å•ç²¾åº¦ç±»å‹</td>
</tr>
<tr>
<td>double</td>
<td>åŒç²¾åº¦æµ®ç‚¹</td>
</tr>
</tbody>
</table>
<p>è¿™é‡Œ<code>int</code>ã€<code>integer</code>ã€<code>bigint</code>çš„å…·ä½“åŒºåˆ«ï¼Œè¿˜æ²¡å¼„æ˜ç™½ã€‚å¦‚æœæœ‰å“ªä¸ªå¤§ä½¬äº†è§£ï¼Œè¯·åœ¨è¯„è®ºåŒºæŒ‡å¯¼ä¸€ä¸‹ğŸ˜„ğŸ˜„</p>
<h3 id="åˆ›å»ºå’Œåˆ é™¤æ•°æ®è¡¨"><a href="#åˆ›å»ºå’Œåˆ é™¤æ•°æ®è¡¨" class="headerlink" title="åˆ›å»ºå’Œåˆ é™¤æ•°æ®è¡¨"></a>åˆ›å»ºå’Œåˆ é™¤æ•°æ®è¡¨</h3><p>åˆ›å»ºè¡¨çš„ä¸ºè¯­æ³•ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> database_name.table_name(</span><br><span class="line">   column1 datatype  primary <span class="keyword">key</span>(one <span class="keyword">or</span> more <span class="keyword">columns</span>),</span><br><span class="line">   column2 datatype,</span><br><span class="line">   column3 datatype,</span><br><span class="line">   .....</span><br><span class="line">   columnN datatype,</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>åˆ é™¤æ•°æ®è¡¨çš„è¯­æ³•ä¸º<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> database_name.table_name;</span><br></pre></td></tr></table></figure></p>
<h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><p>æ’å…¥æ•°æ®è¡¨çš„è¯­æ³•ä¸ºï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> table_name [(column1, column2, column3,...columnN)]  </span><br><span class="line"><span class="keyword">values</span> (value1, value2, value3,...valueN);</span><br><span class="line">æˆ–</span><br><span class="line">//æ³¨æ„ï¼šè¿™ç§æ–¹å¼è¦ç¡®ä¿å€¼çš„é¡ºåºä¸åˆ—åœ¨è¡¨ä¸­çš„é¡ºåºä¸€è‡´</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> table_name <span class="keyword">values</span> (value1,value2,value3,...valueN);</span><br></pre></td></tr></table></figure></p>
<h3 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h3><p>åˆ é™¤æ•°æ®çš„è¯­æ³•ä¸ºï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> table_name [æ¡ä»¶];</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœæ²¡æœ‰åˆ é™¤æ•°æ®çš„æ¡ä»¶ï¼Œé»˜è®¤åˆ é™¤æ‰€æœ‰æ•°æ®ï¼›å¦‚æœæŒ‡å®šäº†æ¡ä»¶ï¼Œåˆ™åˆ é™¤ç¬¦åˆæ¡ä»¶çš„<br>æ•°æ®</p>
<h3 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h3><p>è¯­æ³•ä¸ºï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> table_name</span><br><span class="line"><span class="keyword">set</span> column1 = value1, column2 = value2...., columnN = valueN [æ¡ä»¶];</span><br></pre></td></tr></table></figure></p>
<h3 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h3><p>è¯­æ³•ä¸ºï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//æŸ¥è¯¢æŒ‡å®šå­—æ®µï¼ˆåˆ—ï¼‰çš„å€¼</span><br><span class="line"><span class="keyword">SELECT</span> column1, column2, columnN <span class="keyword">FROM</span> table_name;</span><br><span class="line">æˆ–</span><br><span class="line">//æŸ¥è¯¢æ‰€æœ‰å­—æ®µçš„å€¼</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> table_name;</span><br></pre></td></tr></table></figure></p>
<h3 id="SQLiteçš„é€»è¾‘è¿ç®—ç¬¦"><a href="#SQLiteçš„é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="SQLiteçš„é€»è¾‘è¿ç®—ç¬¦"></a>SQLiteçš„é€»è¾‘è¿ç®—ç¬¦</h3><table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AND</code></td>
<td>AND è¿ç®—ç¬¦å…è®¸åœ¨ä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶çš„å­˜åœ¨</td>
</tr>
<tr>
<td><code>BETWEEN</code></td>
<td>BETWEEN è¿ç®—ç¬¦ç”¨äºåœ¨ç»™å®šæœ€å°å€¼å’Œæœ€å¤§å€¼èŒƒå›´å†…çš„ä¸€ç³»åˆ—å€¼ä¸­æœç´¢å€¼</td>
</tr>
<tr>
<td><code>EXISTS</code></td>
<td>EXISTS è¿ç®—ç¬¦ç”¨äºåœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æŒ‡å®šè¡¨ä¸­æœç´¢è¡Œçš„å­˜åœ¨</td>
</tr>
<tr>
<td><code>IN</code></td>
<td>IN è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒ</td>
</tr>
<tr>
<td><code>NOT IN</code></td>
<td>IN è¿ç®—ç¬¦çš„å¯¹ç«‹é¢ï¼Œç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸åœ¨ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒ</td>
</tr>
<tr>
<td><code>LIKE</code></td>
<td>LIKE è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä½¿ç”¨é€šé…ç¬¦è¿ç®—ç¬¦çš„ç›¸ä¼¼å€¼è¿›è¡Œæ¯”è¾ƒ</td>
</tr>
<tr>
<td><code>GLOB</code></td>
<td>GLOB è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä½¿ç”¨é€šé…ç¬¦è¿ç®—ç¬¦çš„ç›¸ä¼¼å€¼è¿›è¡Œæ¯”è¾ƒã€‚GLOB ä¸ LIKE ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒæ˜¯å¤§å°å†™æ•æ„Ÿçš„</td>
</tr>
<tr>
<td><code>NOT</code></td>
<td>NOT è¿ç®—ç¬¦æ˜¯æ‰€ç”¨çš„é€»è¾‘è¿ç®—ç¬¦çš„å¯¹ç«‹é¢ã€‚æ¯”å¦‚ NOT EXISTSã€NOT BETWEENã€NOT INï¼Œç­‰ç­‰ã€‚å®ƒæ˜¯å¦å®šè¿ç®—ç¬¦</td>
</tr>
<tr>
<td><code>OR</code></td>
<td>OR è¿ç®—ç¬¦ç”¨äºç»“åˆä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶</td>
</tr>
<tr>
<td><code>IS NULL</code></td>
<td>NULL è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ NULL å€¼è¿›è¡Œæ¯”è¾ƒ</td>
</tr>
<tr>
<td><code>IS</code></td>
<td>IS è¿ç®—ç¬¦ä¸ = ç›¸ä¼¼</td>
</tr>
<tr>
<td><code>IS NOT</code></td>
<td><code>IS NOT</code> è¿ç®—ç¬¦ä¸ != ç›¸ä¼¼</td>
</tr>
<tr>
<td>`</td>
<td></td>
<td>`</td>
<td>è¿æ¥ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td><code>UNIQUE</code></td>
<td>UNIQUE è¿ç®—ç¬¦æœç´¢æŒ‡å®šè¡¨ä¸­çš„æ¯ä¸€è¡Œï¼Œç¡®ä¿å”¯ä¸€æ€§ï¼ˆæ— é‡å¤ï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><p><code>where</code>ç”¨æ¥è¿‡æ»¤æ•°æ®çš„ï¼Œä¾‹å¦‚<code>select * from employee where salary &gt;= 65000;</code>æ˜¯æŒ‡æŸ¥è¯¢å·¥èµ„é«˜äº65000çš„å‘˜å·¥çš„æ•°æ®ï¼Œä½¿ç”¨<code>where salary &gt;= 65000;</code>æ¥è¿‡æ»¤æ•°æ®</p>
<h3 id="and-or"><a href="#and-or" class="headerlink" title="and/or"></a>and/or</h3><p><code>and</code>ç›¸å½“äºé€»è¾‘ä¸è¿ç®—ï¼Œåªæœ‰æ¡ä»¶å…¨ä¸ºçœŸæ—¶ï¼Œç»“æœæ‰ä¸ºçœŸï¼›<code>or</code>ç›¸å½“äºé€»è¾‘æˆ–è¿ç®—ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªæ¡ä»¶ä¸ºçœŸï¼Œç»“æœå°±ä¸ºçœŸã€‚</p>
<h3 id="LIKE"><a href="#LIKE" class="headerlink" title="LIKE"></a>LIKE</h3><p><code>LIKE</code>è¿ç®—ç¬¦æ˜¯ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼ŒLIKE è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªé€šé…ç¬¦ä¸ LIKE è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼š</p>
<ul>
<li>ç™¾åˆ†å· ï¼ˆ%ï¼‰</li>
<li>ä¸‹åˆ’çº¿ ï¼ˆ_ï¼‰</li>
</ul>
<p>ç™¾åˆ†å·<code>ï¼ˆ%ï¼‰</code>ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚ä¸‹åˆ’çº¿<code>ï¼ˆ_ï¼‰</code>ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨ã€‚</p>
<p>ä¸‹é¢ä¸€äº›å®ä¾‹æ¼”ç¤ºäº† å¸¦æœ‰ â€˜%â€™ å’Œ â€˜_â€™ è¿ç®—ç¬¦çš„ LIKE å­å¥ä¸åŒçš„åœ°æ–¹ï¼š<br>|è¯­å¥|æè¿°|<br>|â€”-|â€”-|<br>|WHERE SALARY LIKE â€˜200%â€™|æŸ¥æ‰¾ä»¥ 200 å¼€å¤´çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜%200%â€™|æŸ¥æ‰¾ä»»æ„ä½ç½®åŒ…å« 200 çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜<em>00%â€™|æŸ¥æ‰¾ç¬¬äºŒä½å’Œç¬¬ä¸‰ä½ä¸º 00 çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜2</em>%_%â€™|æŸ¥æ‰¾ä»¥ 2 å¼€å¤´ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 3 ä¸ªå­—ç¬¦çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜%2â€™|æŸ¥æ‰¾ä»¥ 2 ç»“å°¾çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜_2%3â€™|æŸ¥æ‰¾ç¬¬äºŒä½ä¸º 2ï¼Œä¸”ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼|<br>|WHERE SALARY LIKE â€˜2___3â€™|æŸ¥æ‰¾é•¿åº¦ä¸º 5 ä½æ•°ï¼Œä¸”ä»¥ 2 å¼€å¤´ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼|</p>
<h3 id="GLOB"><a href="#GLOB" class="headerlink" title="GLOB"></a>GLOB</h3><p><code>GLOB</code> è¿ç®—ç¬¦æ˜¯ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼Œ<code>GLOB</code> è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚ä¸ <code>LIKE</code> è¿ç®—ç¬¦ä¸åŒçš„æ˜¯ï¼Œ<code>GLOB</code> æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œå¯¹äºä¸‹é¢çš„é€šé…ç¬¦ï¼Œå®ƒéµå¾ª UNIX çš„è¯­æ³•ã€‚</p>
<ul>
<li>æ˜Ÿå· ï¼ˆ*ï¼‰</li>
<li>é—®å· ï¼ˆ?ï¼‰</li>
</ul>
<p>æ˜Ÿå·<code>ï¼ˆ*ï¼‰</code>ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚é—®å·<code>ï¼ˆ?ï¼‰</code>ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨ã€‚</p>
<table>
<thead>
<tr>
<th>è¯­å¥</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>WHERE SALARY GLOB â€˜200*â€™</td>
<td>æŸ¥æ‰¾ä»¥ 200 å¼€å¤´çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜<em>200</em>â€˜</td>
<td>æŸ¥æ‰¾ä»»æ„ä½ç½®åŒ…å« 200 çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜?00*â€™</td>
<td>æŸ¥æ‰¾ç¬¬äºŒä½å’Œç¬¬ä¸‰ä½ä¸º 00 çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜2??â€™</td>
<td>æŸ¥æ‰¾ä»¥ 2 å¼€å¤´ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 3 ä¸ªå­—ç¬¦çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜*2â€™</td>
<td>æŸ¥æ‰¾ä»¥ 2 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜?2*3â€™</td>
<td>æŸ¥æ‰¾ç¬¬äºŒä½ä¸º 2ï¼Œä¸”ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td>WHERE SALARY GLOB â€˜2???3â€™</td>
<td>æŸ¥æ‰¾é•¿åº¦ä¸º 5 ä½æ•°ï¼Œä¸”ä»¥ 2 å¼€å¤´ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
</tbody>
</table>
<h3 id="LIMIT"><a href="#LIMIT" class="headerlink" title="LIMIT"></a>LIMIT</h3><p>å­å¥ç”¨äºé™åˆ¶ç”± SELECT è¯­å¥è¿”å›çš„æ•°æ®æ•°é‡</p>
<h3 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h3><p>å­å¥æ˜¯ç”¨æ¥åŸºäºä¸€ä¸ªæˆ–å¤šä¸ªåˆ—æŒ‰å‡åºæˆ–é™åºé¡ºåºæ’åˆ—æ•°æ®ã€‚</p>
<p>ORDER BY å­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>-<span class="keyword">list</span> </span><br><span class="line"><span class="keyword">FROM</span> table_name </span><br><span class="line">[<span class="keyword">WHERE</span> condition] </span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> column1, column2, .. columnN] [<span class="keyword">ASC</span> | <span class="keyword">DESC</span>];//ASCå‡åºæ’åº,DESCé™åºæ’åº</span><br></pre></td></tr></table></figure></p>
<h3 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a>GROUP BY</h3><p>å­å¥ç”¨äºä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å¯¹ç›¸åŒçš„æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚<br>åœ¨ SELECT è¯­å¥ä¸­ï¼ŒGROUP BY å­å¥æ”¾åœ¨ WHERE å­å¥ä¹‹åï¼Œæ”¾åœ¨ ORDER BY å­å¥ä¹‹å‰</p>
<h3 id="HAVING"><a href="#HAVING" class="headerlink" title="HAVING"></a>HAVING</h3><p>å­å¥å…è®¸æŒ‡å®šæ¡ä»¶æ¥è¿‡æ»¤å°†å‡ºç°åœ¨æœ€ç»ˆç»“æœä¸­çš„åˆ†ç»„ç»“æœã€‚<br>WHERE å­å¥åœ¨æ‰€é€‰åˆ—ä¸Šè®¾ç½®æ¡ä»¶ï¼Œè€Œ HAVING å­å¥åˆ™åœ¨ç”± GROUP BY å­å¥åˆ›å»ºçš„åˆ†ç»„ä¸Šè®¾ç½®æ¡ä»¶ã€‚</p>
<h3 id="DISTINCT"><a href="#DISTINCT" class="headerlink" title="DISTINCT"></a>DISTINCT</h3><p>å…³é”®å­—ä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥æ¶ˆé™¤æ‰€æœ‰é‡å¤çš„è®°å½•ï¼Œå¹¶åªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ã€‚<br>æœ‰å¯èƒ½å‡ºç°ä¸€ç§æƒ…å†µï¼Œåœ¨ä¸€ä¸ªè¡¨ä¸­æœ‰å¤šä¸ªé‡å¤çš„è®°å½•ã€‚å½“æå–è¿™æ ·çš„è®°å½•æ—¶ï¼ŒDISTINCT å…³é”®å­—å°±æ˜¾å¾—ç‰¹åˆ«æœ‰æ„ä¹‰ï¼Œå®ƒåªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ï¼Œè€Œä¸æ˜¯è·å–é‡å¤è®°å½•ã€‚<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> <span class="keyword">name</span> <span class="keyword">from</span> company;</span><br></pre></td></tr></table></figure></p>
<h2 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h2><blockquote>
<p>æ“ä½œæ•°æ®åº“ï¼Œè¦ä½¿ç”¨SQLiteOpenHelperï¼Œç”±äºSQLiteOpenHelperæ˜¯æŠ½è±¡ç±»ï¼Œä½¿ç”¨è¦å®ç°å®ƒï¼Œå¹¶é‡å†™å®ƒçš„ onCreate(), onUpgrade()æ–¹æ³•</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDatabase</span> <span class="keyword">extends</span> <span class="title">SQLiteOpenHelper</span> </span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºè¡¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CreateTable_my=<span class="string">"create Table user("</span> +</span><br><span class="line">            <span class="string">"id primary key, name text, sex text , age integer, password text)"</span>;</span><br><span class="line"></span><br><span class="line">    Context myContext;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name    åˆ›å»ºæ•°æ®åº“çš„åå­—</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> factory ç”¨äºè¿”å›è‡ªå®šä¹‰çš„Cursorï¼Œä¸€èˆ¬å¡«null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> version è¡¨ç¤ºå½“å‰æ•°æ®åº“çš„ç‰ˆæœ¬å·ï¼Œå¯ç”¨äºå¯¹æ•°æ®åº“è¿›è¡Œå‡çº§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Mydatabase</span><span class="params">(Context context, String name, SQLiteDatabase.CursorFactory factory, <span class="keyword">int</span> version)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, name, factory, version);</span><br><span class="line">        myContext=context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase sqLiteDatabase)</span> </span>&#123;</span><br><span class="line">          sqLiteDatabase.execSQL(CreateTable_my);<span class="comment">//åˆ›å»ºè¡¨</span></span><br><span class="line">          Toast.makeText(myContext, <span class="string">"æ•°æ®è¡¨åˆ›å»ºæˆåŠŸ"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase sqLiteDatabase, <span class="keyword">int</span> i, <span class="keyword">int</span> i1)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ›å»ºMyDatabaseçš„å¯¹è±¡</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//first.dbæ˜¯æ•°æ®åº“å</span><br><span class="line">private Mydatabase base=new Mydatabase(DatabaseActivity.this,&quot;first.db&quot;,null,1);</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆæ•°æ®åº“(ä¼šåœ¨<code>/data/data/&lt;package name&gt;/databases/</code>ç›®å½•ä¸‹å»ºç«‹æ•°æ®åº“)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">base.getWritableDatabase();</span><br><span class="line">//æˆ–è€…</span><br><span class="line">base.getReadableDatabase()</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>ä¸¤ä¸ªæ–¹æ³•çš„ä¸åŒå¤„ï¼š<br><br><code>getWritableDatabase()</code>è¿”å›ä¸€ä¸ªå¯å¯¹æ•°æ®åº“è¿›è¡Œè¯»å†™æ“ä½œçš„å¯¹è±¡ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸<br><br><code>getReadableDatabase()</code>è¿”å›ä¸€ä¸ªä»¥åªè¯»æ–¹æ³•æ‰“å¼€çš„æ•°æ®åº“ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸</p>
</blockquote>
<h3 id="æ·»åŠ è¡¨"><a href="#æ·»åŠ è¡¨" class="headerlink" title="æ·»åŠ è¡¨"></a>æ·»åŠ è¡¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mydatabase</span> <span class="keyword">extends</span> <span class="title">SQLiteOpenHelper</span> </span>&#123;</span><br><span class="line"><span class="comment">//ç”¨æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CreateTable_user=<span class="string">"create Table user("</span> +</span><br><span class="line">            <span class="string">"id primary key, name text, sex text , age integer, password text)"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¦ä¸€ä¸ªè¡¨ï¼Œç­çº§è¡¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CreateTable_me=<span class="string">"create Table clazz("</span> +</span><br><span class="line">            <span class="string">"id primary key, className text, teacher text)"</span>;</span><br><span class="line"></span><br><span class="line">    Context myContext;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name    åˆ›å»ºæ•°æ®åº“çš„åå­—</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> factory ç”¨äºè¿”å›è‡ªå®šä¹‰çš„Cursorï¼Œä¸€èˆ¬å¡«null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> version è¡¨ç¤ºå½“å‰æ•°æ®åº“çš„ç‰ˆæœ¬å·ï¼Œå¯ç”¨äºå¯¹æ•°æ®åº“è¿›è¡Œå‡çº§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Mydatabase</span><span class="params">(Context context, String name, SQLiteDatabase.CursorFactory factory, <span class="keyword">int</span> version)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, name, factory, version);</span><br><span class="line">        myContext=context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase sqLiteDatabase)</span> </span>&#123;</span><br><span class="line">          sqLiteDatabase.execSQL(CreateTable_user);</span><br><span class="line">          sqLiteDatabase.execSQL(CreateTable_me);</span><br><span class="line">          Toast.makeText(myContext, <span class="string">"æ•°æ®åº“åˆ›å»ºæˆåŠŸ"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å½“ version ä¸­çš„å€¼æ”¹å˜æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œåˆ é™¤åŸæ¥çš„è¡¨ï¼Œå†è°ƒç”¨onCreate()æ–¹æ³•ç”Ÿæˆä¸¤ä¸ªè¡¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase sqLiteDatabase, <span class="keyword">int</span> i, <span class="keyword">int</span> i1)</span> </span>&#123;</span><br><span class="line">           sqLiteDatabase.execSQL(<span class="string">"drop table if exists user"</span>);</span><br><span class="line">           sqLiteDatabase.execSQL(<span class="string">"drop table if exists clazz"</span>);</span><br><span class="line">           onCreate(sqLiteDatabase);</span><br><span class="line">           Toast.makeText(myContext, <span class="string">"æˆåŠŸ"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ“ä½œè¡¨"><a href="#æ“ä½œè¡¨" class="headerlink" title="æ“ä½œè¡¨"></a>æ“ä½œè¡¨</h3><ul>
<li>æ·»åŠ æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡getWritableDatabase()è·å–SQLiteOpenHelperæ¥æ“ä½œæ•°æ®åº“</span></span><br><span class="line">SQLiteDatabase database= base.getWritableDatabase();</span><br><span class="line">                ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">                values.put(<span class="string">"name"</span>,<span class="string">"å°æ˜"</span>);</span><br><span class="line">                values.put(<span class="string">"sex"</span>,<span class="string">"ç”·"</span>);</span><br><span class="line">                values.put(<span class="string">"password"</span>,<span class="string">"12hjfgikldgislk"</span>);</span><br><span class="line">                values.put(<span class="string">"age"</span>,<span class="number">18</span>);</span><br><span class="line">                <span class="comment">//å‚æ•° 1.è¡¨çš„åå­— 2.ç”¨äºæœªæŒ‡å®šæ·»åŠ æ•°æ®çš„æƒ…å†µä¸‹ç»™æŸäº›å¯ä¸ºç©ºçš„åˆ—è‡ªåŠ¨èµ‹å€¼NULL </span></span><br><span class="line">                <span class="comment">//3. ContentValues å¯¹è±¡</span></span><br><span class="line">                database.insert(<span class="string">"user"</span>,<span class="keyword">null</span>,values);</span><br></pre></td></tr></table></figure>
<ul>
<li>æ›´æ–°æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase database= base.getWritableDatabase();</span><br><span class="line">                ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">                values.put(<span class="string">"name"</span>,<span class="string">"å°å†›"</span>);  </span><br><span class="line">                <span class="comment">//åé¢çš„ä¸¤ä¸ªå‚æ•°æ˜¯æ“ä½œçš„é™åˆ¶æ¡ä»¶</span></span><br><span class="line">                database.update(<span class="string">"user"</span>,values,<span class="string">"age=?"</span>,<span class="keyword">new</span> String[]&#123;<span class="string">"18"</span>&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ é™¤æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase database= base.getWritableDatabase();</span><br><span class="line"><span class="comment">//åé¢çš„ä¸¤ä¸ªå‚æ•°æ˜¯æ“ä½œçš„é™åˆ¶æ¡ä»¶,ç”¨æ¥çº¦æŸåˆ é™¤å“ªå‡ è¡Œï¼Œå¦‚æœä¸æŒ‡å®šå°±åˆ é™¤æ‰€æœ‰è¡Œ</span></span><br><span class="line">database.delete(<span class="string">"user"</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>æŸ¥è¯¢æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase database=base.getWritableDatabase();</span><br><span class="line">Cursor cursor= database.query(<span class="string">"user"</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">if</span> (cursor.moveToFirst())&#123;</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        Log.d(<span class="string">"name:"</span>,cursor.getString(cursor.getColumnIndex(<span class="string">"name"</span>)));</span><br><span class="line">        Log.d(<span class="string">"age:"</span>,cursor.getString(cursor.getColumnIndex(<span class="string">"age"</span>)));</span><br><span class="line">        Log.d(<span class="string">"sex:"</span>,cursor.getString(cursor.getColumnIndex(<span class="string">"sex"</span>)));</span><br><span class="line">        Log.d(<span class="string">"password:"</span>,cursor.getString(cursor.getColumnIndex(<span class="string">"password"</span>)));</span><br><span class="line">    &#125;<span class="keyword">while</span> (cursor.moveToNext());</span><br><span class="line">&#125;</span><br><span class="line">cursor.close();</span><br></pre></td></tr></table></figure>
<p>queryçš„å‚æ•°å¦‚ä¸‹ï¼š<br><img src="https://user-gold-cdn.xitu.io/2019/6/9/16b3cc545772bec2?w=1065&amp;h=310&amp;f=jpeg&amp;s=40933" alt></p>
<ul>
<li>ä½¿ç”¨sqlç›´æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œ</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase database=base.getWritableDatabase();</span><br><span class="line">database.execSQL();</span><br><span class="line">database.rawQuery();<span class="comment">//åªæœ‰æŸ¥è¯¢æ•°æ®çš„æ—¶å€™æ‰è°ƒç”¨è¿™ä¸ªæ–¹æ³•</span></span><br></pre></td></tr></table></figure>
<h2 id="ä»¿ç…§LitePalå®ç°ä¸€ä¸ªç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶SimpleDatabase"><a href="#ä»¿ç…§LitePalå®ç°ä¸€ä¸ªç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶SimpleDatabase" class="headerlink" title="ä»¿ç…§LitePalå®ç°ä¸€ä¸ªç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶SimpleDatabase"></a>ä»¿ç…§<code>LitePal</code>å®ç°ä¸€ä¸ªç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶<code>SimpleDatabase</code></h2><h3 id="SimpleDatabaseçš„ä½¿ç”¨"><a href="#SimpleDatabaseçš„ä½¿ç”¨" class="headerlink" title="SimpleDatabaseçš„ä½¿ç”¨"></a><code>SimpleDatabase</code>çš„ä½¿ç”¨</h3><ol>
<li>å…ˆåœ¨<code>asset</code>æ–‡ä»¶ä¸­åˆ›å»º<code>my_database.xml</code></li>
</ol>
<p><code>my_database.xml</code>å¦‚ä¸‹ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">database</span> <span class="attr">name</span>=<span class="string">"test.db"</span> <span class="attr">version</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--classå±æ€§æ˜¯æ•°æ®è¡¨Beançš„å…¨è·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"com.example.mylibrary.Employee"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">database</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>Employee</code>çš„æºç å¦‚ä¸‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">char</span> sex;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(<span class="keyword">char</span> sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨idä½œä¸ºå‘˜å·¥çš„å”¯ä¸€æ ‡è¯†</span></span><br><span class="line">        <span class="keyword">return</span> Integer.toString(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ³¨æ„ï¼š<code>SimpleDatabase</code>é€šè¿‡<code>toString</code>æ¥åŒºåˆ«ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡ï¼Œå¦‚<code>Employee</code>å°±ä½¿ç”¨<code>id</code>ä½œä¸ºæ ‡è¯†ç¬¦ã€‚</p>
<ol start="2">
<li><p>åœ¨<code>AndroidManifest.xml</code>ä¸­åŠ å…¥<code>android:name=&quot;com.example.databaselibrary.MyApplication&quot;</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.example.databaselibrary.MyApplication"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨<code>SimpleDatabase</code></p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        SimpleDatabase.newInstance().create();<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">        </span><br><span class="line">         Employee employee =<span class="keyword">new</span> Employee();</span><br><span class="line">                employee.setId(<span class="number">1</span>);</span><br><span class="line">                employee.setName(<span class="string">"a"</span>);</span><br><span class="line">                employee.setSex(<span class="string">'ç”·'</span>);</span><br><span class="line">                SimpleDatabase.saveAndUpdate(employee);</span><br><span class="line"></span><br><span class="line">                Employee employee1 =<span class="keyword">new</span> Employee();</span><br><span class="line">                employee1.setId(<span class="number">2</span>);</span><br><span class="line">                employee1.setName(<span class="string">"b"</span>);</span><br><span class="line">                employee1.setSex(<span class="string">'ç”·'</span>);</span><br><span class="line">                SimpleDatabase.saveAndUpdate(employee1);</span><br><span class="line"></span><br><span class="line">                Employee employee2 =<span class="keyword">new</span> Employee();</span><br><span class="line">                employee2.setId(<span class="number">3</span>);</span><br><span class="line">                employee2.setName(<span class="string">"c"</span>);</span><br><span class="line">                employee2.setSex(<span class="string">'å¥³'</span>);</span><br><span class="line">                SimpleDatabase.saveAndUpdate(employee2);</span><br><span class="line"></span><br><span class="line">                List&lt;Employee&gt; l=SimpleDatabase.select(Employee.class,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;l.size() ; i++) &#123;</span><br><span class="line">                    Employee e=l.get(i);</span><br><span class="line">                    Log.d(<span class="string">"==============="</span>,e.getName());</span><br><span class="line">                    Log.d(<span class="string">"==============="</span>,e.getSex()+<span class="string">""</span>);</span><br><span class="line">                    Log.d(<span class="string">"==============="</span>,e.getId()+<span class="string">""</span>);</span><br><span class="line">                &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h3><p>é¦–å…ˆè¯»å–é…ç½®ä¿¡æ¯ï¼Œè·å–æ•°æ®åº“å’Œè¡¨çš„ä¿¡æ¯<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§£æxmlæ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XMLParser</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String RESOURCES=<span class="string">"my_database.xml"</span>;<span class="comment">//é…ç½®æ•°æ®åº“ä¿¡æ¯çš„xmlåå­—</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String TABLE=<span class="string">"table"</span>;<span class="comment">//xmlå±æ€§å¸¸é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String VERSION=<span class="string">"version"</span>;<span class="comment">//xmlå±æ€§å¸¸é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String DATABASE=<span class="string">"database"</span>;<span class="comment">//xmlå±æ€§å¸¸é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String NAME=<span class="string">"name"</span>;<span class="comment">//xmlå±æ€§å¸¸é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; map=<span class="keyword">null</span>;<span class="comment">//ç”¨æ¥å­˜å‚¨æ•°æ®åº“ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; tables=<span class="keyword">null</span>;<span class="comment">//ç”¨æ¥å­˜å‚¨è¡¨ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">XMLParser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        context=MyApplication.getContext();</span><br><span class="line">        map=<span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">2</span>);</span><br><span class="line">        tables=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è§£ææ•°æ®</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">parse</span><span class="params">()</span> <span class="keyword">throws</span> IOException, XmlPullParserException </span>&#123;</span><br><span class="line"></span><br><span class="line">        XmlPullParserFactory factory=XmlPullParserFactory.newInstance();</span><br><span class="line"></span><br><span class="line">        XmlPullParser xmlPullParser=factory.newPullParser();</span><br><span class="line">       <span class="comment">//ä»assetæ–‡ä»¶ä¸‹è¯»å–my_database.xmlçš„ä¿¡æ¯</span></span><br><span class="line">        xmlPullParser.setInput(<span class="keyword">new</span> InputStreamReader(context.getAssets().open(RESOURCES)));</span><br><span class="line">        <span class="keyword">int</span> type=xmlPullParser.getEventType();</span><br><span class="line">        <span class="keyword">while</span>(type!=XmlPullParser.END_DOCUMENT)&#123;</span><br><span class="line">                <span class="keyword">if</span> (xmlPullParser.getEventType()==XmlResourceParser.START_TAG)&#123;<span class="comment">//å¦‚æœä¸ºå¼€å§‹æ ‡ç­¾</span></span><br><span class="line">                    String name=xmlPullParser.getName();</span><br><span class="line">                    <span class="keyword">switch</span> (name)&#123;</span><br><span class="line">                        <span class="keyword">case</span> DATABASE:<span class="comment">//æ ‡ç­¾ä¸º&lt;database&gt;</span></span><br><span class="line">                            parseDatabase(xmlPullParser);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> TABLE:<span class="comment">//æ ‡ç­¾ä¸º&lt;table&gt;</span></span><br><span class="line">                            parseTable(xmlPullParser);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                xmlPullParser.next();<span class="comment">//ä¸‹ä¸€ä¸ªæ ‡ç­¾</span></span><br><span class="line">                type=xmlPullParser.getEventType();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è§£ææ•°æ®åº“ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseDatabase</span><span class="params">(XmlPullParser xmlPullParser)</span>  </span>&#123;</span><br><span class="line">        String databaseName=<span class="keyword">null</span>;</span><br><span class="line">        String version=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (xmlPullParser.getAttributeCount()==<span class="number">2</span>)&#123;</span><br><span class="line">            String value_1=xmlPullParser.getAttributeName(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (NAME.equals(value_1))&#123;</span><br><span class="line">                databaseName=xmlPullParser.getAttributeValue(<span class="number">0</span>);</span><br><span class="line">                version=xmlPullParser.getAttributeValue(<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                databaseName=xmlPullParser.getAttributeValue(<span class="number">1</span>);</span><br><span class="line">                version=xmlPullParser.getAttributeValue(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> MyException(<span class="string">"databaseæ ‡ç­¾çš„å‚æ•°é”™è¯¯"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(DATABASE,databaseName);</span><br><span class="line">        map.put(VERSION,version);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è§£æè¡¨æ ¼ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseTable</span><span class="params">(XmlPullParser xmlPullParser)</span> </span>&#123;</span><br><span class="line">        String className=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (xmlPullParser.getAttributeCount()==<span class="number">1</span>)&#123;</span><br><span class="line">            className=xmlPullParser.getAttributeValue(<span class="number">0</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> MyException(<span class="string">"tableå‚æ•°é”™è¯¯"</span>);</span><br><span class="line">        tables.add(className);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">getMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getTables</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tables;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åˆ›å»ºæ•°æ®åº“çš„ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDatabase</span> <span class="keyword">extends</span> <span class="title">SQLiteOpenHelper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> onDatabaseUpdateListener listener=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MyDatabase"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyDatabase</span><span class="params">(Context context, String name, SQLiteDatabase.CursorFactory factory, <span class="keyword">int</span> version,onDatabaseUpdateListener listener)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, name, factory, version);</span><br><span class="line">        <span class="keyword">this</span>.listener=listener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">        String[] createTables = listener.onCreate();</span><br><span class="line">            <span class="keyword">for</span> (String s: createTables)&#123;</span><br><span class="line">                db.execSQL(s);</span><br><span class="line">                Log.d(<span class="string">"======å»ºè¡¨è¯­å¥"</span>,s);</span><br><span class="line">            &#125;</span><br><span class="line">        Log.d(<span class="string">"======"</span>,<span class="string">"onCreateæ‰§è¡Œ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="keyword">int</span> oldVersion, <span class="keyword">int</span> newVersion)</span> </span>&#123;</span><br><span class="line">        String[] deleteTable = listener.update(db);</span><br><span class="line">        Log.d(<span class="string">"======"</span>,<span class="string">"onUpgradeæ‰§è¡Œ"</span>);</span><br><span class="line">           <span class="keyword">if</span> (deleteTable !=<span class="keyword">null</span>)&#123;</span><br><span class="line">               <span class="keyword">for</span> (String s: deleteTable)&#123;</span><br><span class="line">                   db.execSQL(s);</span><br><span class="line">                   Log.d(<span class="string">"=====åˆ è¡¨è¯­å¥"</span>,s);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           onCreate(db);</span><br><span class="line">           listener.onCreateLater(db);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">onDatabaseUpdateListener</span></span>&#123;</span><br><span class="line">        String[] update(SQLiteDatabase db);<span class="comment">//æ•°æ®åº“ç‰ˆæœ¬æ›´æ–°æ—¶è°ƒç”¨</span></span><br><span class="line">        String[] onCreate();<span class="comment">//åˆ›å»ºæ–°çš„è¡¨æ—¶è°ƒç”¨</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span>  <span class="title">onCreateLater</span><span class="params">(SQLiteDatabase db)</span></span>;<span class="comment">//åˆ›å»ºå®Œè¡¨æ—¶è°ƒç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å®Œæˆæ•°æ®åº“æ“ä½œçš„å®ç°ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°æ•°æ®çš„æ“ä½œå’Œæ•°æ®åº“çš„åˆ›å»º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleDatabase</span> <span class="keyword">implements</span> <span class="title">MyDatabase</span>.<span class="title">onDatabaseUpdateListener</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String NAME=<span class="string">"SimpleDatabase.xml"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String OLD=<span class="string">"old"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String TABLE=<span class="string">"table_"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String NUMBER=<span class="string">"number"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//MyDatabaseHelperæ˜¯ä¸€ä¸ªè¾…åŠ©ç±»ï¼Œç”¨æ¥ç”Ÿæˆåˆ›å»ºæ•°æ®åº“å’Œè¡¨æ‰€éœ€è¦çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MyDatabaseHelper databaseHelper=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> SQLiteDatabase db=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> Map&lt;String,Cursor&gt; savedData=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    String simpleNames[]=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"SimpleDatabase"</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> SimpleDatabase simpleDatabase=<span class="keyword">new</span> SimpleDatabase();</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">SimpleDatabase</span><span class="params">()</span></span>&#123;</span><br><span class="line">       init();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">       databaseHelper=<span class="keyword">new</span> MyDatabaseHelper();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æŒ‡å®šçš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span>&lt;T&gt; List&lt;T&gt; <span class="title">select</span><span class="params">(Class&lt;T&gt; clazz,String columnNames[],String where,</span></span></span><br><span class="line"><span class="function"><span class="params">                                String args[],String groupBy, String having, String orderBy)</span></span>&#123;</span><br><span class="line">        List&lt;T&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Cursor cursor= db.query(clazz.getSimpleName(),columnNames,where,args,groupBy,having,orderBy);</span><br><span class="line">        <span class="keyword">while</span>(cursor.moveToNext())&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                T t = clazz.newInstance();</span><br><span class="line">                Field fields[]=clazz.getDeclaredFields();</span><br><span class="line">                <span class="keyword">for</span> (Field f:fields) &#123;</span><br><span class="line">                        f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                        String fieldName = f.getName();</span><br><span class="line">                        String fieldValue = cursor.getColumnName(cursor.getColumnIndex(fieldName));</span><br><span class="line">                        <span class="comment">//ç”±äºgetColumnNameï¼ˆï¼‰åªä¼šè¿”å›Stringç±»å‹ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦getInitialTypeValue()</span></span><br><span class="line">                        <span class="comment">//è·å–åˆå§‹ç±»å‹çš„å€¼</span></span><br><span class="line">                        f.set(t,getInitialTypeValue(f.getType().getSimpleName(),fieldValue));</span><br><span class="line">                &#125;</span><br><span class="line">                list.add(t);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InstantiationException | IllegalAccessException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cursor.close();</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Object <span class="title">getInitialTypeValue</span><span class="params">(String type,String value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (type)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"int"</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"integer"</span>:</span><br><span class="line">                <span class="keyword">return</span> Integer.valueOf(value);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"boolean"</span>:</span><br><span class="line">                <span class="keyword">return</span> Boolean.valueOf(value);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"float"</span>:</span><br><span class="line">                <span class="keyword">return</span> Float.valueOf(value);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"double"</span>:</span><br><span class="line">                <span class="keyword">return</span> Double.valueOf(value);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"String"</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Character"</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"char"</span>:</span><br><span class="line">               <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æŒ‡å®šçš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Cursor <span class="title">select</span><span class="params">(Object obj,String columnNames[],String where,String args[])</span></span>&#123;</span><br><span class="line">       String tableName=obj.getClass().getSimpleName();</span><br><span class="line">       <span class="keyword">return</span> db.query(tableName,columnNames,where,args,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœä¸å­˜åœ¨æ•°æ®åº“å°±åˆ›å»ºï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥ç»“æŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">create</span><span class="params">()</span></span>&#123;</span><br><span class="line">       String name=databaseHelper.getName();</span><br><span class="line">       String version=databaseHelper.getVersion();</span><br><span class="line">       <span class="keyword">if</span> (databaseHelper.check(getOldVersion(),Integer.valueOf(version)))<span class="comment">//å¦‚æœéœ€è¦æ›´æ–°</span></span><br><span class="line">           saveDataInSharedPreferences(Integer.valueOf(version));</span><br><span class="line">       Log.d(<span class="string">"========="</span>,<span class="string">"name"</span>+name);</span><br><span class="line">       MyDatabase database = <span class="keyword">new</span> MyDatabase(MyApplication.getContext(), name, <span class="keyword">null</span>, Integer.valueOf(version), SimpleDatabase.<span class="keyword">this</span>);</span><br><span class="line">       db= database.getWritableDatabase();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SimpleDatabase <span class="title">newInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> simpleDatabase;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­˜å‚¨æ‰¹é‡æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> list</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(List&lt;Object&gt; list)</span>  </span>&#123;</span><br><span class="line">       <span class="keyword">for</span> (Object o:list) &#123;</span><br><span class="line">           save(o);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­˜å‚¨å•ä¸ªæ•°æ®åˆ°è¡¨ä¸­</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Object o)</span>  </span>&#123;</span><br><span class="line">           Class clazz=o.getClass();</span><br><span class="line">           Field fields[]=clazz.getDeclaredFields();</span><br><span class="line">           ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">           values.put(<span class="string">"simple_database_id"</span>,o.toString());</span><br><span class="line">           <span class="keyword">for</span> (Field f:fields) &#123;</span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                      f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                      <span class="keyword">if</span> (f.get(o)!=<span class="keyword">null</span>&amp;&amp;!<span class="string">"serialVersionUID"</span>.equals(f.getName())) &#123;</span><br><span class="line">                          values.put(f.getName(), f.get(o).toString());</span><br><span class="line">                          Log.d(<span class="string">"========value"</span>, f.get(o).toString());</span><br><span class="line">                      &#125;</span><br><span class="line">               &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">                   e.printStackTrace();</span><br><span class="line">                   Log.wtf(TAG,<span class="string">"ç±»ä¸­æ‰€ä»¥çš„æ•°æ®åº”è¯¥è®¾ç½®å€¼"</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           db.insert(clazz.getSimpleName(),<span class="keyword">null</span>,values);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveAndUpdate</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">       Class clazz=o.getClass();</span><br><span class="line">       String id=o.toString();</span><br><span class="line">       Field fields[]=clazz.getDeclaredFields();</span><br><span class="line">       ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">       values.put(<span class="string">"simple_database_id"</span>,o.toString());</span><br><span class="line">       <span class="keyword">for</span> (Field f:fields) &#123;</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">               <span class="keyword">if</span> (f.get(o)!=<span class="keyword">null</span>&amp;&amp;!<span class="string">"serialVersionUID"</span>.equals(f.getName())) &#123;</span><br><span class="line">                   values.put(f.getName(), f.get(o).toString());</span><br><span class="line">                   Log.d(<span class="string">"========value"</span>, f.get(o).toString());</span><br><span class="line">               &#125;</span><br><span class="line">           &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">               Log.wtf(TAG,<span class="string">"ç±»ä¸­æ‰€ä»¥çš„æ•°æ®åº”è¯¥è®¾ç½®å€¼"</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       Cursor cursor=select(o,<span class="keyword">null</span>,<span class="string">"simple_database_id=?"</span>,<span class="keyword">new</span> String[]&#123;id&#125;);</span><br><span class="line">       <span class="keyword">if</span> (cursor.getCount()==<span class="number">0</span>)&#123;<span class="comment">//æ’å…¥</span></span><br><span class="line">           db.insert(clazz.getSimpleName(),<span class="keyword">null</span>,values);</span><br><span class="line">       &#125;<span class="keyword">else</span> &#123;<span class="comment">//æ›´æ–°</span></span><br><span class="line">           db.update(clazz.getSimpleName(),values,<span class="string">"simple_database_id=?"</span>,<span class="keyword">new</span> String[]&#123;id&#125;);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">       Class clazz=o.getClass();</span><br><span class="line">       delete(clazz.getSimpleName(),<span class="string">"simple_database_id=?"</span>,o.toString());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤è¡¨ä¸­æŒ‡å®šçš„æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> where</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(String name,String where,String... arg)</span></span>&#123;</span><br><span class="line">       db.delete(name,where,arg);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœç‰ˆæœ¬æ›´æ–°ï¼Œåˆ™å­˜å‚¨æœ€æ–°çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> version ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveDataInSharedPreferences</span><span class="params">(<span class="keyword">int</span> version)</span></span>&#123;</span><br><span class="line">       <span class="comment">//è·å–SharedPreferencesçš„Editorå¯¹è±¡æ¥æ‰§è¡Œå‚¨å­˜æ“ä½œ</span></span><br><span class="line">       SharedPreferences.Editor editor=MyApplication.getContext().getSharedPreferences(NAME,<span class="number">0</span>).edit();</span><br><span class="line">       editor.putInt(OLD,version);</span><br><span class="line">       editor.apply();<span class="comment">//æœ€åä¸€å®šè¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå®Œæˆæ•°æ®çš„å‚¨å­˜</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *å­˜å‚¨è¿‡å»çš„è¡¨å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> names</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">saveDataInSharedPreferences</span><span class="params">(String[] names)</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·å–SharedPreferencesçš„Editorå¯¹è±¡æ¥æ‰§è¡Œå‚¨å­˜æ“ä½œ</span></span><br><span class="line">        SharedPreferences.Editor editor=MyApplication.getContext().getSharedPreferences(NAME,<span class="number">0</span>).edit();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;names.length;i++)&#123;</span><br><span class="line">            editor.putString(TABLE+i,names[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        editor.putInt(NUMBER,names.length);</span><br><span class="line">        editor.apply();<span class="comment">//æœ€åä¸€å®šè¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå®Œæˆæ•°æ®çš„å‚¨å­˜</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ä¸Šä¸€æ¬¡çš„æ•°æ®åº“çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getOldVersion</span><span class="params">()</span></span>&#123;</span><br><span class="line">       SharedPreferences get=MyApplication.getContext().getSharedPreferences(NAME,<span class="number">0</span>);</span><br><span class="line">       <span class="keyword">return</span> get.getInt(OLD,<span class="number">0</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] getOldTableName()&#123;</span><br><span class="line">        SharedPreferences get=MyApplication.getContext().getSharedPreferences(NAME,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> length=get.getInt(NUMBER,-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (length==-<span class="number">1</span>)</span><br><span class="line">            Log.wtf(TAG,<span class="string">"åŸæœ‰è¡¨æ ¼ä¸å­˜åœ¨"</span>);</span><br><span class="line">        String names[]=<span class="keyword">new</span> String[length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length;i++)&#123;</span><br><span class="line">            names[i]=get.getString(TABLE+i,<span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> names;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] update(SQLiteDatabase db) &#123;<span class="comment">//åœ¨åˆ é™¤è¡¨ä¹‹å‰æŠŠè¡¨çš„æ•°æ®ä¿å­˜èµ·æ¥</span></span><br><span class="line">        simpleNames=getOldTableName();</span><br><span class="line">        savedData=<span class="keyword">new</span> HashMap&lt;&gt;(simpleNames.length);</span><br><span class="line">        <span class="keyword">for</span> (String name:simpleNames) &#123;</span><br><span class="line">            Cursor cursor=db.query(name,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line">            savedData.put(name,cursor);</span><br><span class="line">        &#125;</span><br><span class="line">        Cursor cursor=savedData.get(simpleNames[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">if</span> (cursor.moveToFirst())&#123;</span><br><span class="line">            String sex=cursor.getString(cursor.getColumnIndex(<span class="string">"sex"</span>));</span><br><span class="line">            Log.d(<span class="string">"===============update"</span>,<span class="string">"sex="</span>+sex);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> databaseHelper.getDeleteTable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] onCreate() &#123;</span><br><span class="line">        saveDataInSharedPreferences(databaseHelper.getSimpleTableName());</span><br><span class="line">        <span class="keyword">return</span> databaseHelper.getCreateTable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreateLater</span><span class="params">(SQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">        recoverAllData(db);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¢å¤æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">recoverAllData</span><span class="params">(SQLiteDatabase db)</span></span>&#123;</span><br><span class="line">       List&lt;String&gt; deleteTable=checkWhichTableDisappear(databaseHelper.getTables());</span><br><span class="line">       List&lt;String&gt; nowTable=Arrays.asList(simpleNames);</span><br><span class="line">       nowTable.remove(deleteTable);</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nowTable.size();i++)&#123;</span><br><span class="line">          Cursor cursor=savedData.get(nowTable.get(i));</span><br><span class="line">          ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">           <span class="keyword">if</span> (cursor.moveToFirst())&#123;</span><br><span class="line">               <span class="keyword">do</span>&#123;</span><br><span class="line">                   String columnNames[]=cursor.getColumnNames();</span><br><span class="line">                   <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;columnNames.length;j++)</span><br><span class="line">                         values.put(columnNames[j],cursor.getString(cursor.getColumnIndex(columnNames[j])));</span><br><span class="line">               &#125;<span class="keyword">while</span> (cursor.moveToNext());</span><br><span class="line">               db.insert(nowTable.get(i),<span class="keyword">null</span>,values);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">        <span class="keyword">for</span> (String n:simpleNames) &#123;<span class="comment">//é‡Šæ”¾æ‰€æœ‰çš„èµ„æº</span></span><br><span class="line">            savedData.get(n).close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥æœ‰å“ªäº›è¡¨è¢«åˆ é™¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> newTable</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">checkWhichTableDisappear</span><span class="params">(List&lt;String&gt; newTable)</span></span>&#123;</span><br><span class="line">            String deleteTable[]=<span class="keyword">new</span> String[simpleNames.length];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;simpleNames.length;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span> (!newTable.contains(simpleNames[i]))&#123;</span><br><span class="line">                    deleteTable[j]=simpleNames[i];</span><br><span class="line">                    j++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          <span class="keyword">return</span> Arrays.asList(deleteTable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>SimpleDatabase</code>çš„ä¸»è¦ä½œç”¨æ˜¯åœ¨<code>my_database.xml</code>ä¸­çš„é…ç½®æ›´æ”¹æ—¶ï¼Œèƒ½è‡ªåŠ¨æ›´æ–°æ•°æ®åº“ï¼›æ’å…¥å’Œæ›´æ–°æ—¶ï¼Œé€šè¿‡<code>saveAndUpdate(Object o)</code>ä½¿ç”¨å¯¹è±¡æ¥å®ç°æ’å…¥å’Œæ›´æ–°æ“ä½œï¼ˆå½“æ•°æ®åº“ä¸­ä¸å­˜åœ¨åŒä¸€æ¡æ•°æ®æ—¶ï¼Œå°±æ’å…¥ï¼›å½“æ•°æ®åº“ä¸­å­˜åœ¨åŒä¸€æ¡æ•°æ®æ—¶ï¼Œå°±æ›´æ–°ï¼‰ï¼›æŸ¥è¯¢æ—¶ï¼Œé€šè¿‡</p>
<p><code>List&lt;T&gt; select(Class&lt;T&gt; clazz,String columnNames[],String where,String args[],String groupBy, String having, String orderBy)</code>è·å–åŒ…å«æŸ¥è¯¢ç»“æœå¯¹è±¡çš„é›†åˆï¼›åˆ é™¤æ—¶ï¼Œé€šè¿‡<code>delete(Object o)</code>ä½¿ç”¨å¯¹è±¡æ¥å®ç°åˆ é™¤æ“ä½œã€‚</p>
<p>å®ç°åŸç†ï¼š</p>
<p><code>SimpleDatabase</code>é€šè¿‡å®ç°<code>MyDatabase</code>çš„<code>onDatabaseUpdateListener</code>æ¥å£ï¼Œç›‘å¬<code>MyDatabase</code>çš„<code>onCreate</code>å’Œ<code>onUpgrade</code>æ–¹æ³•ã€‚åœ¨<code>onCreate</code>è¢«è°ƒç”¨æ—¶ï¼Œè°ƒç”¨<code>onDatabaseUpdateListener.onCreate</code>æ¥å­˜å‚¨ä¹‹å‰çš„è¡¨åï¼ˆå¦‚æœä¿®æ”¹äº†é…ç½®æ–‡ä»¶çš„è¯ï¼‰ï¼Œå¹¶è¿”å›åˆ›å»ºè¡¨çš„sqlè¯­å¥é›†åˆï¼ˆå¯èƒ½åˆ›å»ºå¤šä¸ªè¡¨ï¼‰ï¼Œä¹‹ååœ¨<code>MyDatabase.onCreate</code>ä¸­åˆ›å»ºè¡¨ã€‚å½“<code>onUpgrade</code>è¢«è°ƒç”¨æ—¶ï¼Œè°ƒç”¨<code>onDatabaseUpdateListener.update</code>æ¥å­˜å‚¨å½“å‰æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå¹¶è¿”å›åˆ é™¤è¡¨çš„sqlè¯­å¥é›†åˆï¼Œåˆ é™¤æˆåŠŸååˆ›å»ºæ–°çš„è¡¨ï¼Œä¹‹åè°ƒç”¨<code>onDatabaseUpdateListener.onCreateLater</code>æ–¹æ³•å°†ä¹‹å‰å­˜å‚¨çš„æ•°æ®é‡æ–°å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚</p>
<p><code>SimpleDatabase</code>ä¸­çš„<code>select</code>ã€<code>delete</code>ã€<code>saveAndUpdate</code>æ–¹æ³•æ˜¯é€šè¿‡åå°„å®ç°çš„ï¼Œå…·ä½“å¯ä»¥çœ‹æ³¨é‡Šã€‚</p>
<p>å…¶ä»–ç±»çš„å®ç°å¾ˆç®€å•ï¼Œå…·ä½“å¯ä»¥çœ‹æºç ï¼š</p>
<ul>
<li><p>MyApplicationç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç³»ç»Ÿçš„context</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Context context;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate();</span><br><span class="line">        context = getApplicationContext();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Context <span class="title">getContext</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> context;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>MyDatabaseHelperç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”Ÿæˆåˆ›å»ºæ•°æ®åº“å’Œè¡¨æ‰€éœ€è¦çš„æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDatabaseHelper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String version=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; tables=<span class="keyword">null</span>;<span class="comment">//å­˜å‚¨å®Œæ•´ç±»å</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Table[]&gt; maps=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String createTable[]=<span class="keyword">null</span>;<span class="comment">//å­˜å‚¨å»ºè¡¨è¯­å¥</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String deleteTable[]=<span class="keyword">null</span>;<span class="comment">//å­˜å‚¨åˆ é™¤è¡¨çš„è¯­å¥</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> ok=<span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MyDatabaseHelper"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyDatabaseHelper</span><span class="params">()</span></span>&#123;</span><br><span class="line">       init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        XMLParser xmlParser=<span class="keyword">null</span>;</span><br><span class="line">        xmlParser=<span class="keyword">new</span> XMLParser();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            xmlParser.parse();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException | XmlPullParserException  e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        name=xmlParser.getMap().get(XMLParser.DATABASE);</span><br><span class="line">        version=xmlParser.getMap().get(XMLParser.VERSION);</span><br><span class="line">        tables=xmlParser.getTables();</span><br><span class="line">        maps=<span class="keyword">new</span> HashMap&lt;&gt;(tables.size());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> old ä¹‹å‰çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> now ç°åœ¨çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> old,<span class="keyword">int</span> now)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (now&gt;old) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                parseTable();</span><br><span class="line">                ok=<span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£æç±»çš„æ•°æ®,åœ¨versionæ”¹å˜æ—¶è°ƒç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ClassNotFoundException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseTable</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (String name:tables)&#123;</span><br><span class="line">            Class table=Class.forName(name);</span><br><span class="line">            Field[] field=table.getDeclaredFields();</span><br><span class="line">            Table info[]=<span class="keyword">new</span> Table[field.length];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;field.length;i++)&#123;</span><br><span class="line">                Table t=<span class="keyword">new</span> Table();</span><br><span class="line">                t.setProperty(field[i].getName());</span><br><span class="line">                t.setType(field[i].getType().getSimpleName());</span><br><span class="line">                info[i]=t;</span><br><span class="line">            &#125;</span><br><span class="line">            maps.put(name,info);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆå»ºè¡¨è¯­å¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">generateTable</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;tables.size();i++)&#123;</span><br><span class="line">            Table table[]=maps.get(tables.get(i));</span><br><span class="line">            StringBuilder stringBuilder=<span class="keyword">new</span> StringBuilder();</span><br><span class="line">            String simpleName=getSimpleName(tables.get(i));</span><br><span class="line">            stringBuilder.append(<span class="string">"create table "</span>+simpleName+<span class="string">"( "</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;table.length;j++)&#123;</span><br><span class="line">                Table t=table[j];</span><br><span class="line">                <span class="keyword">if</span> (t!=<span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">if</span> (!Table.OTHER.equals(t.getType()))</span><br><span class="line">                    stringBuilder.append(<span class="string">" , "</span>+t.getProperty()+<span class="string">" "</span>+t.getType());</span><br><span class="line">            &#125;</span><br><span class="line">            String string=stringBuilder.append(<span class="string">")"</span>).toString();</span><br><span class="line">            string=string.replaceFirst(<span class="string">","</span>,<span class="string">""</span>);</span><br><span class="line">            createTable[i]=string;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆåˆ é™¤è¡¨çš„è¯­å¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleteTable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tables.size(); i++) &#123;</span><br><span class="line">            deleteTable[i]=<span class="string">"drop table if exists "</span>+getSimpleName(tables.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç®€å•ç±»åï¼Œä¸åŒ…æ‹¬åŒ…</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name å¸¦æœ‰åŒ…åçš„ç±»å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ä¸åŒ…å«åŒ…åçš„ç±»å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getSimpleName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">       <span class="keyword">int</span> position= name.lastIndexOf(<span class="string">'.'</span>);</span><br><span class="line">       <span class="keyword">return</span> name.substring(position+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getVersion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> version;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getCreateTable() &#123;</span><br><span class="line">        <span class="keyword">if</span> (!ok)</span><br><span class="line">            Log.e(TAG,<span class="string">"å¿…é¡»å…ˆè°ƒç”¨check()"</span>);</span><br><span class="line">        createTable=<span class="keyword">new</span> String[tables.size()];</span><br><span class="line">        generateTable();</span><br><span class="line">        <span class="keyword">return</span> createTable;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getDeleteTable() &#123;</span><br><span class="line">        <span class="keyword">if</span> (!ok)</span><br><span class="line">            Log.e(TAG,<span class="string">"å¿…é¡»å…ˆè°ƒç”¨check()"</span>);</span><br><span class="line">        deleteTable=<span class="keyword">new</span> String[tables.size()];</span><br><span class="line">        deleteTable();</span><br><span class="line">        <span class="keyword">return</span> deleteTable;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getTables</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tables;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getSimpleTableName() &#123;</span><br><span class="line"></span><br><span class="line">        String simpleTableName[]=<span class="keyword">new</span> String[tables.size()];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;tables.size();i++) &#123;</span><br><span class="line"></span><br><span class="line">            String simpleName = getSimpleName(tables.get(i));</span><br><span class="line"></span><br><span class="line">            simpleTableName[i] = simpleName;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> simpleTableName;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>MyException</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Tableç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­˜å‚¨æ¯ä¸ªå­—æ®µå¯¹åº”çš„å±æ€§å’Œåå­—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Table</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String INTEGER=<span class="string">"integer"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String TEXT=<span class="string">"text"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String REAL=<span class="string">"real"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String BLOB=<span class="string">"blob"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String INT=<span class="string">"int"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String CHAR=<span class="string">"char"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String FLOAT=<span class="string">"float"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String DOUBLE=<span class="string">"double"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String STRING=<span class="string">"String"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String BOOLEAN=<span class="string">"boolean"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String OTHER=<span class="string">"other"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String property;<span class="comment">//å¯¹åº”çš„å±æ€§</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String type;<span class="comment">//å¯¹åº”çš„å±æ€§çš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getProperty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> property;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProperty</span><span class="params">(String property)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.property = property;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        checkProperty(type);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">checkProperty</span><span class="params">(String property)</span></span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (property)&#123;</span><br><span class="line">            <span class="keyword">case</span> INT:</span><br><span class="line">            <span class="keyword">case</span> BOOLEAN:</span><br><span class="line">                type=INTEGER;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> FLOAT:</span><br><span class="line">            <span class="keyword">case</span> DOUBLE:</span><br><span class="line">                type=REAL;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> STRING:</span><br><span class="line">            <span class="keyword">case</span> CHAR:</span><br><span class="line">                type=TEXT;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                 type=OTHER;</span><br><span class="line">                 <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å‚è€ƒ<a href="https://www.runoob.com/sqlite/sqlite-tutorial.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/05/TCP-IPçš„å­¦ä¹ æ€»ç»“/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/05/TCP-IPçš„å­¦ä¹ æ€»ç»“/" itemprop="url">TCP/IPçš„å­¦ä¹ æ€»ç»“</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-06-05T23:57:29+08:00">
                2019-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/è®¡ç®—æœºç½‘ç»œ/" itemprop="url" rel="index">
                    <span itemprop="name">è®¡ç®—æœºç½‘ç»œ</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è¿™ç¯‡æ–‡ç« æ˜¯è‡ªå·±æ‰€å­¦çš„ã€Šè®¡ç®—æœºç½‘ç»œã€‹è¿™é—¨è¯¾ç¨‹çš„æ€»ç»“ï¼Œå¦‚æœæœ‰ä»»ä½•é”™è¯¯æ¬¢è¿æŒ‡æ­£ã€‚</p>
<h2 id="TCP-IPæ¨¡å‹"><a href="#TCP-IPæ¨¡å‹" class="headerlink" title="TCP/IPæ¨¡å‹"></a>TCP/IPæ¨¡å‹</h2><p><img src="https://user-gold-cdn.xitu.io/2019/6/3/16b1df77fb4ec2f1?w=288&amp;h=357&amp;f=jpeg&amp;s=22376" alt><br>åº”ç”¨å±‚ï¼šå…·ä½“åº”ç”¨ç¨‹åºå®ç°å±‚<br><br>è¿è¾“å±‚ï¼šè®©åº”ç”¨ç¨‹åºä¹‹é—´å®ç°é€šä¿¡<br><br>ç½‘ç»œå±‚ï¼ˆæˆ–ç½‘é™…å±‚ï¼‰ï¼šä¸»è¦åˆ©ç”¨IPåè®®è½¬å‘åˆ†åŒ…æ•°æ®<br><br>ç½‘ç»œæ¥å£å±‚ï¼šTCP/IPå¯¹ç½‘ç»œæ¥å£å±‚æœªä½œå®šä¹‰<br></p>
<blockquote>
<p>ç½‘ç»œå±‚å’Œè¿è¾“å±‚çš„åŠŸèƒ½é€šå¸¸ç”±æ“ä½œç³»ç»Ÿæä¾›ï¼Œä¸€èˆ¬é€šè¿‡æ“ä½œç³»ç»Ÿçš„<code>Socket</code>æ¥å£</p>
</blockquote>
<h2 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h2><p>ç½‘ç»œå±‚ä¸­æœ€é‡è¦çš„å°±æ˜¯<code>IPåè®®</code>ã€‚å¦‚ä¸‹å›¾ï¼Œé€šè¿‡IPåè®®å¯ä»¥å®ç°åœ¨ä¸åŒçš„ç½‘ç»œä¸­è¿›è¡Œé€šä¿¡ï¼Œè€Œä¸ç”¨å…³ç³»ä¸‹å±‚çš„ç½‘ç»œæ¥å£å±‚ä¸­æ‰€ä½¿ç”¨çš„åè®®ã€‚<br><img src="https://user-gold-cdn.xitu.io/2019/6/4/16b1e223cf7953df?w=912&amp;h=531&amp;f=jpeg&amp;s=71275" alt></p>
<blockquote>
<p>IPåè®®æ˜¯æ— è¿æ¥çš„ã€å°½æœ€å¤§åŠªåŠ›äº¤ä»˜çš„ä¸å¯é åè®®</p>
</blockquote>
<h3 id="IPåœ°å€"><a href="#IPåœ°å€" class="headerlink" title="IPåœ°å€"></a>IPåœ°å€</h3><p>IPåœ°å€æ˜¯IPåè®®ç”¨æ¥è¯†åˆ«ä¸åŒä¸»æœºçš„åœ°å€ï¼Œç±»ä¼¼äºMACåœ°å€ã€‚</p>
<h4 id="ä¸¤çº§IP-åœ°å€"><a href="#ä¸¤çº§IP-åœ°å€" class="headerlink" title="ä¸¤çº§IP åœ°å€"></a>ä¸¤çº§IP åœ°å€</h4><p><img src="https://user-gold-cdn.xitu.io/2019/6/4/16b1e353c84adf86?w=950&amp;h=711&amp;f=jpeg&amp;s=90672" alt><br>net-idä»£è¡¨ç½‘ç»œå·ï¼Œhost-idä»£è¡¨ä¸»æœºå·</p>
<h4 id="ä¸‰çº§IP-åœ°å€"><a href="#ä¸‰çº§IP-åœ°å€" class="headerlink" title="ä¸‰çº§IP åœ°å€"></a>ä¸‰çº§IP åœ°å€</h4><p>ä»¥Aç±»åœ°å€ä¸ºä¾‹ï¼Œä¸€ä¸ªAç±»åœ°å€å¯ä»¥è¿<code>2^24</code>ä¸ªä¸»æœºï¼Œä½†æ˜¯æˆ‘åªéœ€è¦è¿æ¥<code>2^20</code>ä¸ªä¸»æœºï¼Œè€Œä½¿ç”¨Bç±»åœ°å€åˆä¸è¶³ï¼Œè¿™ç§æƒ…å†µå°±é€ æˆäº†æµªè´¹ï¼›å†åŠ ä¸ŠIPåœ°å€å¿«è€—å°½çš„é—®é¢˜ï¼Œå°±å‡ºç°äº†ä¸‰çº§IP åœ°å€ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼Œé€šè¿‡ä»ä¸»æœºå·å€Ÿç”¨è‹¥å¹²ä¸ªä½ä½œä¸ºå­ç½‘å·<code>subnet-id</code>ï¼Œè€Œä¸»æœºå· <code>host-id</code>ä¹Ÿå°±ç›¸åº”å‡å°‘äº†è‹¥å¹²ä¸ªä½ã€‚é€šè¿‡è¿™ç§æ–¹å¼å°±å¯ä»¥å¯¹IPåœ°å€è¿›è¡Œæ›´ç²¾ç»†åœ°åˆ’åˆ†ï¼Œä»è€Œå‡å°‘IPåœ°å€åœ°æµªè´¹ã€‚è€Œä¸”åˆ’åˆ†å­ç½‘çº¯å±ä¸€ä¸ªå•ä½å†…éƒ¨çš„äº‹æƒ…å•ä½å¯¹å¤–ä»ç„¶è¡¨ç°ä¸ºæ²¡æœ‰åˆ’åˆ†å­ç½‘çš„ç½‘ç»œï¼Œä»è€Œå…¼å®¹ä»¥å‰çš„ä¸¤çº§IP åœ°å€ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/4/16b1e3f2f7b1c33e?w=798&amp;h=80&amp;f=png&amp;s=7382" alt></p>
<h4 id="å­ç½‘æ©ç "><a href="#å­ç½‘æ©ç " class="headerlink" title="å­ç½‘æ©ç "></a>å­ç½‘æ©ç </h4><p>é€šè¿‡å­ç½‘æ©ç æ¥è·å–IPåœ°å€ä¸­çš„å­ç½‘éƒ¨åˆ†ï¼Œå¦‚å›¾IPåœ°å€ä¸å­ç½‘æ©ç è¿›è¡Œä¸è¿ç®—å¾—åˆ°å­ç½‘çš„ç½‘ç»œåœ°å€ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/4/16b1e4bc47b04102?w=991&amp;h=523&amp;f=jpeg&amp;s=72623" alt> </p>
<h4 id="æ— åˆ†ç±»ç¼–å€ï¼ˆCIDRï¼‰"><a href="#æ— åˆ†ç±»ç¼–å€ï¼ˆCIDRï¼‰" class="headerlink" title="æ— åˆ†ç±»ç¼–å€ï¼ˆCIDRï¼‰"></a>æ— åˆ†ç±»ç¼–å€ï¼ˆCIDRï¼‰</h4><p>ç”±äºIPv4çš„åœ°å€å³å°†è€—å°½ï¼Œå°±é‡‡ç”¨æ— åˆ†ç±»ç¼–å€ï¼ˆCIDRï¼‰æ¶ˆé™¤äº†ä¼ ç»Ÿçš„ A ç±»ã€B ç±»å’Œ C ç±»åœ°å€ä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µï¼Œä»è€Œä½¿ç”¨å„ç§é•¿åº¦çš„â€œç½‘ç»œå‰ç¼€â€æ¥ä»£æ›¿åˆ†ç±»åœ°å€ä¸­çš„ç½‘ç»œå·å’Œå­ç½‘å·ã€‚</p>
<h3 id="ç½‘ç»œå±‚çš„å…¶ä»–åè®®"><a href="#ç½‘ç»œå±‚çš„å…¶ä»–åè®®" class="headerlink" title="ç½‘ç»œå±‚çš„å…¶ä»–åè®®"></a>ç½‘ç»œå±‚çš„å…¶ä»–åè®®</h3><h4 id="ICMPåè®®"><a href="#ICMPåè®®" class="headerlink" title="ICMPåè®®"></a>ICMPåè®®</h4><p>IPåè®®å¹¶ä¸æ˜¯ä¸€ä¸ªå¯é çš„åè®®ï¼Œå®ƒä¸ä¿è¯æ•°æ®è¢«é€è¾¾ï¼Œé‚£ä¹ˆï¼Œè‡ªç„¶çš„ï¼Œä¿è¯æ•°æ®é€è¾¾çš„å·¥ä½œåº”è¯¥ç”±å…¶ä»–çš„æ¨¡å—æ¥å®Œæˆã€‚å…¶ä¸­ä¸€ä¸ªé‡è¦çš„æ¨¡å—å°±æ˜¯ICMP(ç½‘ç»œæ§åˆ¶æŠ¥æ–‡)åè®®ã€‚ICMPä¸æ˜¯é«˜å±‚åè®®ï¼Œè€Œæ˜¯IPå±‚çš„åè®®ã€‚<br><br>å½“ä¼ é€IPæ•°æ®åŒ…å‘ç”Ÿé”™è¯¯ã€‚æ¯”å¦‚ä¸»æœºä¸å¯è¾¾ï¼Œè·¯ç”±ä¸å¯è¾¾ç­‰ç­‰ï¼ŒICMPåè®®å°†ä¼šæŠŠé”™è¯¯ä¿¡æ¯å°åŒ…ï¼Œç„¶åä¼ é€å›ç»™ä¸»æœºã€‚ç»™ä¸»æœºä¸€ä¸ªå¤„ç†é”™è¯¯çš„æœºä¼šï¼Œè¿™ ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¯´å»ºç«‹åœ¨IPå±‚ä»¥ä¸Šçš„åè®®æ˜¯å¯èƒ½åšåˆ°å®‰å…¨çš„åŸå› ã€‚</p>
<h4 id="RAPåè®®"><a href="#RAPåè®®" class="headerlink" title="RAPåè®®"></a>RAPåè®®</h4><p>RAPåè®®æ˜¯é€šè¿‡ç›®çš„IPåœ°å€æ¥è·å–ç›®çš„MACåœ°å€çš„åè®®ã€‚</p>
<h3 id="IPåè®®æ•°æ®æŠ¥æ ¼å¼"><a href="#IPåè®®æ•°æ®æŠ¥æ ¼å¼" class="headerlink" title="IPåè®®æ•°æ®æŠ¥æ ¼å¼"></a>IPåè®®æ•°æ®æŠ¥æ ¼å¼</h3><p><img src="https://user-gold-cdn.xitu.io/2019/6/4/16b1e5aa95112b88?w=1006&amp;h=519&amp;f=jpeg&amp;s=71243" alt></p>
<p>ç‰ˆæœ¬ï¼šIPåè®®çš„ç‰ˆæœ¬ï¼Œå 4ä½<br><br>ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰ï¼šæ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­å¯é€šè¿‡çš„è·¯ç”±å™¨æ•°ï¼ŒIPæ•°æ®åŒ…æ¯ç©¿è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œè¯¥æ•°æ®åŒ…çš„TTLæ•°å€¼å°±ä¼šå‡å°‘1ï¼Œå½“è¯¥æ•°æ®åŒ…çš„TTLæˆä¸ºé›¶ï¼Œå®ƒå°±ä¼šè¢«è‡ªåŠ¨æŠ›å¼ƒã€‚<br><br>åè®®ï¼š0x11ä»£è¡¨UDPï¼Œ0x06ä»£è¡¨TCP</p>
<h2 id="è¿è¾“å±‚"><a href="#è¿è¾“å±‚" class="headerlink" title="è¿è¾“å±‚"></a>è¿è¾“å±‚</h2><h3 id="TCPä¸UDPçš„åŒºåˆ«"><a href="#TCPä¸UDPçš„åŒºåˆ«" class="headerlink" title="TCPä¸UDPçš„åŒºåˆ«"></a>TCPä¸UDPçš„åŒºåˆ«</h3><table>
<thead>
<tr>
<th></th>
<th>TCP</th>
<th>UDP</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¯é æ€§</td>
<td>å¯é </td>
<td>ä¸å¯é </td>
</tr>
<tr>
<td>è¿æ¥æ€§</td>
<td>é¢å‘è¿æ¥</td>
<td>æ— è¿æ¥</td>
</tr>
<tr>
<td>æŠ¥æ–‡</td>
<td>é¢å‘å­—èŠ‚æµ</td>
<td>é¢å‘æŠ¥æ–‡</td>
</tr>
<tr>
<td>æµé‡æ§åˆ¶</td>
<td>æœ‰</td>
<td>æ— </td>
</tr>
<tr>
<td>å µå¡æ§åˆ¶</td>
<td>æœ‰</td>
<td>æ— </td>
</tr>
<tr>
<td>ä¼ æ’­é€Ÿåº¦</td>
<td>æ…¢</td>
<td>å¿«</td>
</tr>
<tr>
<td>åº”ç”¨åœºæ™¯</td>
<td>å¯¹æ•°æ®å‡†ç¡®æ€§è¦æ±‚é«˜çš„åœºæ™¯</td>
<td>å¯¹æ•°æ®æ•ˆç‡è¦æ±‚é«˜çš„ï¼Œæ¯”å¦‚è§†é¢‘é€šè¯ç­‰ã€‚</td>
</tr>
</tbody>
</table>
<p>é¢å‘æŠ¥æ–‡å’Œé¢å‘å­—èŠ‚æµçš„åŒºåˆ«ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/4/16b21564f75f9a1d?w=1033&amp;h=494&amp;f=jpeg&amp;s=63354" alt><br>å¦‚å›¾ï¼Œé¢å‘æŠ¥æ–‡çš„ä¼ è¾“æ–¹å¼æ˜¯åº”ç”¨å±‚äº¤ç»™UDPå¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDPå‘é€å¤šé•¿çš„æŠ¥æ–‡ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»é€‰æ‹©åˆé€‚å¤§å°çš„æŠ¥æ–‡ã€‚è‹¥æŠ¥æ–‡å¤ªé•¿ï¼Œåˆ™IPå±‚éœ€è¦åˆ†ç‰‡ï¼Œé™ä½æ•ˆç‡ï¼›è‹¥å¤ªçŸ­ï¼Œä¼šä½¿IPæ•°æ®æŠ¥å¤ªå°ã€‚<br><br><img src="https://user-gold-cdn.xitu.io/2019/6/4/16b215688cab0e57?w=962&amp;h=543&amp;f=jpeg&amp;s=87968" alt><br>å¦‚å›¾ï¼Œé¢å‘å­—èŠ‚æµçš„è¯ï¼Œè™½ç„¶åº”ç”¨ç¨‹åºå’ŒTCPçš„äº¤äº’æ˜¯ä¸€æ¬¡ä¸€ä¸ªæ•°æ®å—ï¼ˆå¤§å°ä¸ç­‰ï¼‰ï¼Œä½†TCPæŠŠåº”ç”¨ç¨‹åºçœ‹æˆæ˜¯ä¸€è¿ä¸²çš„æ— ç»“æ„çš„å­—èŠ‚æµã€‚TCPæœ‰ä¸€ä¸ªç¼“å†²ï¼Œå½“åº”ç”¨ç¨‹åºä¼ é€çš„æ•°æ®å—å¤ªé•¿ï¼ŒTCPå°±å¯ä»¥æŠŠå®ƒåˆ’åˆ†çŸ­ä¸€äº›å†ä¼ é€ã€‚</p>
<h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><h4 id="ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</h4><p>TCPæ˜¯é¢å‘è¿æ¥çš„è¿è¾“å±‚åè®®ï¼Œå› æ­¤éœ€è¦å…ˆå»ºç«‹è¿æ¥ï¼Œåœ¨è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚TCPå»ºç«‹è¿æ¥çš„æ–¹å¼æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œåˆ‡æ–­è¿æ¥æ˜¯é€šè¿‡å››æ¬¡æŒ¥æ‰‹ã€‚<br><img src="https://user-gold-cdn.xitu.io/2019/6/4/16b21624e545268d?w=873&amp;h=569&amp;f=png&amp;s=48437" alt="ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"></p>
<p>ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</p>
<p><strong>ä¸ºäº†é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯ã€‚</strong><br><br>å…·ä½“ä¾‹å­â€”â€”â€œå·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µâ€çš„äº§ç”Ÿåœ¨è¿™æ ·ä¸€ç§æƒ…å†µä¸‹ï¼š<br></p>
<p>å®¢æˆ·ç«¯å‘å‡ºçš„ç¬¬ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µå¹¶æ²¡æœ‰ä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æŸä¸ªç½‘ç»œç»“ç‚¹é•¿æ—¶é—´çš„æ»ç•™äº†ï¼Œä»¥è‡´å»¶è¯¯åˆ°è¿æ¥é‡Šæ”¾ä»¥åçš„æŸä¸ªæ—¶é—´æ‰åˆ°è¾¾æœåŠ¡å™¨ã€‚</p>
<p>æœ¬æ¥è¿™æ˜¯ä¸€ä¸ªæ—©å·²å¤±æ•ˆçš„æŠ¥æ–‡æ®µã€‚ä½†æœåŠ¡å™¨æ”¶åˆ°æ­¤å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µåï¼Œå°±è¯¯è®¤ä¸ºæ˜¯å®¢æˆ·ç«¯å†æ¬¡å‘å‡ºçš„ä¸€ä¸ªæ–°çš„è¿æ¥è¯·æ±‚ã€‚äºæ˜¯å°±å‘å®¢æˆ·ç«¯å‘å‡ºç¡®è®¤æŠ¥æ–‡æ®µï¼ŒåŒæ„å»ºç«‹è¿æ¥ã€‚<br></p>
<p>å‡è®¾ä¸é‡‡ç”¨â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œé‚£ä¹ˆåªè¦æœåŠ¡å™¨å‘å‡ºç¡®è®¤ï¼Œæ–°çš„è¿æ¥å°±å»ºç«‹äº†ã€‚ç”±äºç°åœ¨å®¢æˆ·ç«¯å¹¶æ²¡æœ‰å‘å‡ºå»ºç«‹è¿æ¥çš„è¯·æ±‚ï¼Œå› æ­¤ä¸ä¼šç†ç¬æœåŠ¡å™¨çš„ç¡®è®¤ï¼Œä¹Ÿä¸ä¼šå‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚ä½†æœåŠ¡å™¨å´ä»¥ä¸ºæ–°çš„è¿è¾“è¿æ¥å·²ç»å»ºç«‹ï¼Œå¹¶ä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯å‘æ¥æ•°æ®ã€‚è¿™æ ·ï¼ŒæœåŠ¡å™¨çš„å¾ˆå¤šèµ„æºå°±ç™½ç™½æµªè´¹æ‰äº†ã€‚é‡‡ç”¨â€œä¸‰æ¬¡æ¡æ‰‹â€çš„åŠæ³•å¯ä»¥é˜²æ­¢ä¸Šè¿°ç°è±¡å‘ç”Ÿã€‚<br><br>ä¾‹å¦‚åˆšæ‰é‚£ç§æƒ…å†µï¼Œå®¢æˆ·ç«¯ä¸ä¼šå‘æœåŠ¡å™¨çš„ç¡®è®¤å‘å‡ºç¡®è®¤ã€‚æœåŠ¡å™¨ç”±äºæ”¶ä¸åˆ°ç¡®è®¤ï¼Œå°±çŸ¥é“å®¢æˆ·ç«¯å¹¶æ²¡æœ‰è¦æ±‚å»ºç«‹è¿æ¥ã€‚â€<br><img src="https://user-gold-cdn.xitu.io/2019/6/5/16b236274ab59fd5?w=1002&amp;h=769&amp;f=jpeg&amp;s=116683" alt><br>ä¸ºä»€ä¹ˆè¦å››æ¬¡åˆ†æ‰‹ï¼Ÿ</p>
<p>TCPåè®®æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„è¿è¾“å±‚é€šä¿¡åè®®ã€‚TCPæ˜¯å…¨åŒå·¥æ¨¡å¼ï¼Œè¿™å°±æ„å‘³ç€ï¼Œå½“ä¸»æœº1å‘å‡ºFINæŠ¥æ–‡æ®µæ—¶ï¼Œåªæ˜¯è¡¨ç¤ºä¸»æœº1å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œä¸»æœº1å‘Šè¯‰ä¸»æœº2ï¼Œå®ƒçš„æ•°æ®å·²ç»å…¨éƒ¨å‘é€å®Œæ¯•äº†ï¼›</p>
<p>ä½†æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™ä¸»æœº1è¿˜æ˜¯å¯ä»¥æ¥å—æ¥è‡ªä¸»æœº2çš„æ•°æ®ï¼›å½“ä¸»æœº2è¿”å›ACKæŠ¥æ–‡æ®µæ—¶ï¼Œè¡¨ç¤ºå®ƒå·²ç»çŸ¥é“ä¸»æœº1æ²¡æœ‰æ•°æ®å‘é€äº†ï¼Œä½†æ˜¯ä¸»æœº2è¿˜æ˜¯å¯ä»¥å‘é€æ•°æ®åˆ°ä¸»æœº1çš„ï¼›å½“ä¸»æœº2ä¹Ÿå‘é€äº†FINæŠ¥æ–‡æ®µæ—¶ï¼Œè¿™ä¸ªæ—¶å€™å°±è¡¨ç¤ºä¸»æœº2ä¹Ÿæ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œå°±ä¼šå‘Šè¯‰ä¸»æœº1ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œä¹‹åå½¼æ­¤å°±ä¼šæ„‰å¿«çš„ä¸­æ–­è¿™æ¬¡TCPè¿æ¥ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦ç­‰å¾…2MSLï¼Ÿ</p>
<ul>
<li>ä¿è¯TCPåè®®çš„å…¨åŒå·¥è¿æ¥èƒ½å¤Ÿå¯é å…³é—­</li>
<li>ä¿è¯è¿™æ¬¡è¿æ¥çš„é‡å¤æ•°æ®æ®µä»ç½‘ç»œä¸­æ¶ˆå¤±<blockquote>
<p>MSLï¼šæŠ¥æ–‡æ®µæœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼Œå®ƒæ˜¯ä»»ä½•æŠ¥æ–‡æ®µè¢«ä¸¢å¼ƒå‰åœ¨ç½‘ç»œå†…çš„æœ€é•¿æ—¶é—´ã€‚</p>
</blockquote>
</li>
</ul>
<p>è½¬è½½<a href="https://lrh1993.gitbooks.io/android_interview_guide/content/computer-networks/tcpip.html" target="_blank" rel="noopener">TCP/IP Â· Androidæ ¡æ‹›é¢è¯•æŒ‡å—</a></p>
<h4 id="æµé‡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶"></a>æµé‡æ§åˆ¶</h4><p>æµé‡æ§åˆ¶(flow control)å°±æ˜¯è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œæ—¢è¦è®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ï¼Œä¹Ÿä¸è¦ä½¿ç½‘ç»œå‘ç”Ÿæ‹¥å¡ã€‚<br>åˆ©ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨ TCP è¿æ¥ä¸Šå®ç°æµé‡æ§åˆ¶ã€‚</p>
<blockquote>
<p>æ»‘åŠ¨çª—å£æœºåˆ¶:æ»‘åŠ¨çª—å£æœºåˆ¶å°±æ˜¯å‘é€æ–¹å’Œæ¥æ”¶æ–¹å„è‡ªç»´æŠ¤ä¸€ä¸ªå‘é€çª—å£å’Œæ¥å—çª—å£ã€‚å½“ç½‘ç»œå µå¡æ—¶ï¼Œæ¥æ”¶æ–¹å¯ä»¥å‡å°æ¥å—çª—å£çš„å¤§å°ï¼ŒåŒæ—¶åœ¨ç¡®å®šæŠ¥æ–‡ä¸­è®¾ç½®å‘é€çª—å£çš„å¤§å°ï¼Œå½“å‘é€æ–¹æ¥å—åˆ°ç¡®å®šæŠ¥æ–‡æ—¶ï¼Œå¯ä»¥å‡å°å‘é€çª—å£çš„å¤§å°ï¼Œä»è€Œå‡å°‘å‘é€é€Ÿç‡ã€‚åŒç†ï¼Œå½“ç½‘ç»œé€šç•…æ—¶ï¼Œå¯ä»¥æé«˜å‘é€é€Ÿç‡ã€‚</p>
</blockquote>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/5/16b2363e5e931a0b?w=1023&amp;h=761&amp;f=jpeg&amp;s=156549" alt><br>TCPä¸ºæ¯ä¸€ä¸ªè¿æ¥è®¾æœ‰ä¸€ä¸ªæŒç»­è®¡æ—¶å™¨(persistence timer)ã€‚å½“TCPè¿æ¥ä¸­çš„å‘é€æ–¹æ”¶åˆ°æ¥æ”¶æ–¹çš„é›¶çª—å£é€šçŸ¥æ—¶ï¼ˆå³rwnd=0æ—¶ï¼‰ï¼Œå‘é€æ–¹å°±å¯åŠ¨æŒç»­è®¡æ—¶å™¨ã€‚è‹¥æŒç»­è®¡æ—¶å™¨è®¾ç½®çš„æ—¶é—´åˆ°æœŸï¼Œå‘é€æ–¹å°±å‘é€ä¸€ä¸ªé›¶çª—å£æ§æµ‹æŠ¥æ–‡æ®µï¼ˆæº1å­—èŠ‚çš„æ•°æ®ï¼‰ç»™æ¥æ”¶æ–¹ã€‚å¦‚æœæ¥æ”¶æ–¹å¯ä»¥æ¥æ”¶æ•°æ®ï¼Œå°±é‡æ–°å¼€å§‹å‘é€æ•°æ®ï¼›å¦‚æœæ¥æ”¶æ–¹ä¸èƒ½æ¥æ”¶æ•°æ®ï¼Œå°±é‡æ–°è®¾ç½®æŒç»­è®¡æ—¶å™¨ã€‚</p>
<h4 id="å µå¡æ§åˆ¶"><a href="#å µå¡æ§åˆ¶" class="headerlink" title="å µå¡æ§åˆ¶"></a>å µå¡æ§åˆ¶</h4><p>åœ¨æŸæ®µæ—¶é—´ï¼Œè‹¥å¯¹ç½‘ç»œä¸­æŸèµ„æºçš„éœ€æ±‚è¶…è¿‡äº†è¯¥èµ„æºæ‰€èƒ½æä¾›çš„å¯ç”¨éƒ¨åˆ†ï¼Œç½‘ç»œçš„æ€§èƒ½å°±è¦å˜åï¼Œå°±äº§ç”Ÿæ‹¥å¡</p>
<blockquote>
<p>å µå¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„åŒºåˆ«?</p>
<ul>
<li>æ‹¥å¡æ§åˆ¶æ˜¯ä¸€ä¸ªå…¨å±€æ€§çš„è¿‡ç¨‹ï¼Œæ¶‰åŠåˆ°æ‰€æœ‰çš„ä¸»æœºã€æ‰€æœ‰çš„è·¯ç”±å™¨ï¼Œä»¥åŠä¸é™ä½ç½‘ç»œä¼ è¾“æ€§èƒ½æœ‰å…³çš„æ‰€æœ‰å› ç´ ã€‚ </li>
<li>æµé‡æ§åˆ¶å¾€å¾€æŒ‡åœ¨ç»™å®šçš„å‘é€ç«¯å’Œæ¥æ”¶ç«¯ä¹‹é—´çš„ç‚¹å¯¹ç‚¹é€šä¿¡é‡çš„æ§åˆ¶ã€‚æµé‡æ§åˆ¶æ‰€è¦åšçš„å°±æ˜¯æŠ‘åˆ¶å‘é€ç«¯å‘é€æ•°æ®çš„é€Ÿç‡ï¼Œä»¥ä¾¿ä½¿æ¥æ”¶ç«¯æ¥å¾—åŠæ¥æ”¶ã€‚ </li>
</ul>
</blockquote>
<p>å µå¡æ§åˆ¶çš„æ–¹æ³•ï¼š</p>
<ol>
<li>æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…</li>
<li>å¿«é‡ä¼ å’Œå¿«æ¢å¤</li>
</ol>
<h5 id="æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…"><a href="#æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…" class="headerlink" title="æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…"></a>æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…</h5><p>å‘é€æ–¹ç»´æŠ¤ä¸€ä¸ªå«åšæ‹¥å¡çª—å£çš„çŠ¶æ€å˜é‡ã€‚æ‹¥å¡çª—å£çš„å¤§å°å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¸”åŠ¨æ€åœ°åœ¨å˜åŒ–ã€‚<br>å‘é€æ–¹æ§åˆ¶æ‹¥å¡çª—å£çš„åŸåˆ™æ˜¯ï¼šåªè¦ç½‘ç»œæ²¡æœ‰å‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±å†å¢å¤§ä¸€äº›ï¼Œä»¥ä¾¿æŠŠæ›´å¤šçš„åˆ†ç»„å‘é€å‡ºå»ã€‚ä½†åªè¦ç½‘ç»œå‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±å‡å°ä¸€äº›ï¼Œä»¥å‡å°‘åˆ°ç½‘ç»œä¸­çš„åˆ†ç»„æ•°ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/5/16b23653a884d4ee?w=1027&amp;h=765&amp;f=jpeg&amp;s=107646" alt></p>
<p>å¦‚ä¸Šå›¾ï¼Œæ…¢å¼€å§‹ç®—æ³•ï¼š</p>
<p><strong>ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•åï¼Œæ¯ç»è¿‡ä¸€ä¸ªä¼ è¾“è½®æ¬¡ï¼Œæ‹¥å¡çª—å£ cwnd å°±åŠ å€ã€‚</strong><br>ä¸€ä¸ªä¼ è¾“è½®æ¬¡æ‰€ç»å†çš„æ—¶é—´å…¶å®å°±æ˜¯å¾€è¿”æ—¶é—´ <code>RTT</code>ã€‚ä¼ è¾“è½®æ¬¡æ›´åŠ å¼ºè°ƒï¼šæŠŠæ‹¥å¡çª—å£ cwnd æ‰€å…è®¸å‘é€çš„æŠ¥æ–‡æ®µéƒ½è¿ç»­å‘é€å‡ºå»ï¼Œå¹¶æ”¶åˆ°äº†å¯¹å·²å‘é€çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„ç¡®è®¤ã€‚<br>ä¾‹å¦‚ï¼Œæ‹¥å¡çª—å£ <code>cwnd</code> = 4ï¼Œè¿™æ—¶çš„å¾€è¿”æ—¶é—´ <code>RTT</code> å°±æ˜¯å‘é€æ–¹è¿ç»­å‘é€ 4 ä¸ªæŠ¥æ–‡æ®µï¼Œå¹¶æ”¶åˆ°è¿™ 4 ä¸ªæŠ¥æ–‡æ®µçš„ç¡®è®¤ï¼Œæ€»å…±ç»å†çš„æ—¶é—´ã€‚</p>
<p>æ‹¥å¡é¿å…ç®—æ³•</p>
<p>æ‹¥å¡çª—å£ cwnd ç¼“æ…¢åœ°å¢å¤§ï¼Œå³æ¯ç»è¿‡ä¸€ä¸ªå¾€è¿”æ—¶é—´ <code>RTT</code> å°±æŠŠå‘é€æ–¹çš„æ‹¥å¡çª—å£ <code>cwnd</code> åŠ  1ï¼Œè€Œä¸æ˜¯åŠ å€ï¼Œä½¿æ‹¥å¡çª—å£ <code>cwnd</code> æŒ‰çº¿æ€§è§„å¾‹ç¼“æ…¢å¢é•¿ã€‚</p>
<p>ç”±äºæŒ‡æ•°çˆ†ç‚¸çš„æ€§è´¨ï¼Œå°±å¿…é¡»è®¾ç½®æ…¢å¼€å§‹çš„é—¨é™ <code>ssthresh</code> ï¼Œå…¶ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<ol>
<li>å½“ <code>cwnd</code> &lt; <code>ssthresh</code> æ—¶ï¼Œä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•ã€‚</li>
<li>å½“ <code>cwnd</code> &gt; <code>ssthresh</code> æ—¶ï¼Œåœæ­¢ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•è€Œæ”¹ç”¨æ‹¥å¡é¿å…ç®—æ³•ã€‚</li>
<li>å½“ <code>cwnd</code> = <code>ssthresh</code> æ—¶ï¼Œæ—¢å¯ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•ï¼Œä¹Ÿå¯ä½¿ç”¨æ‹¥å¡é¿å…ç®—æ³•ã€‚</li>
</ol>
<p>æ— è®ºåœ¨æ…¢å¼€å§‹é˜¶æ®µè¿˜æ˜¯åœ¨æ‹¥å¡é¿å…é˜¶æ®µï¼Œåªè¦å‘é€æ–¹åˆ¤æ–­ç½‘ç»œå‡ºç°æ‹¥å¡ï¼ˆå…¶æ ¹æ®å°±æ˜¯æ²¡æœ‰æŒ‰æ—¶æ”¶åˆ°ç¡®è®¤ï¼‰ï¼Œå°±è¦æŠŠæ…¢å¼€å§‹é—¨é™ <code>ssthresh</code> è®¾ç½®ä¸ºå‡ºç°æ‹¥å¡æ—¶çš„å‘é€æ–¹çª—å£å€¼çš„ä¸€åŠï¼ˆä½†ä¸èƒ½å°äº2ï¼‰ã€‚<br>ç„¶åæŠŠæ‹¥å¡çª—å£ cwnd é‡æ–°è®¾ç½®ä¸º 1ï¼Œæ‰§è¡Œæ…¢å¼€å§‹ç®—æ³•ã€‚<br>è¿™æ ·åšçš„ç›®çš„å°±æ˜¯è¦è¿…é€Ÿå‡å°‘ä¸»æœºå‘é€åˆ°ç½‘ç»œä¸­çš„åˆ†ç»„æ•°ï¼Œä½¿å¾—å‘ç”Ÿæ‹¥å¡çš„è·¯ç”±å™¨æœ‰è¶³å¤Ÿæ—¶é—´æŠŠé˜Ÿåˆ—ä¸­ç§¯å‹çš„åˆ†ç»„å¤„ç†å®Œæ¯•ã€‚å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/5/16b23737ac31fac0?w=1027&amp;h=589&amp;f=jpeg&amp;s=71782" alt></p>
<h5 id="å¿«é‡ä¼ å’Œå¿«æ¢å¤"><a href="#å¿«é‡ä¼ å’Œå¿«æ¢å¤" class="headerlink" title="å¿«é‡ä¼ å’Œå¿«æ¢å¤"></a>å¿«é‡ä¼ å’Œå¿«æ¢å¤</h5><p>å¿«é‡ä¼ ç®—æ³•é¦–å…ˆè¦æ±‚æ¥æ”¶æ–¹æ¯æ”¶åˆ°ä¸€ä¸ªå¤±åºçš„æŠ¥æ–‡æ®µåå°±ç«‹å³å‘å‡ºé‡å¤ç¡®è®¤ã€‚è¿™æ ·åšå¯ä»¥è®©å‘é€æ–¹åŠæ—©çŸ¥é“æœ‰æŠ¥æ–‡æ®µæ²¡æœ‰åˆ°è¾¾æ¥æ”¶æ–¹ã€‚<br>å‘é€æ–¹åªè¦ä¸€è¿æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤å°±åº”å½“ç«‹å³é‡ä¼ å¯¹æ–¹å°šæœªæ”¶åˆ°çš„æŠ¥æ–‡æ®µã€‚<br>ä¸éš¾çœ‹å‡ºï¼Œå¿«é‡ä¼ å¹¶éå–æ¶ˆé‡ä¼ è®¡æ—¶å™¨ï¼Œè€Œæ˜¯åœ¨æŸäº›æƒ…å†µä¸‹å¯æ›´æ—©åœ°é‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡æ®µã€‚å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/5/16b236e646aca6fc?w=964&amp;h=696&amp;f=jpeg&amp;s=89967" alt></p>
<p>å¿«æ¢å¤</p>
<ol>
<li>å½“å‘é€ç«¯æ”¶åˆ°è¿ç»­ä¸‰ä¸ªé‡å¤çš„ç¡®è®¤æ—¶ï¼Œå°±æ‰§è¡Œâ€œä¹˜æ³•å‡å°â€ç®—æ³•ï¼ŒæŠŠæ…¢å¼€å§‹é—¨é™ ssthresh å‡åŠã€‚ä½†æ¥ä¸‹å»ä¸æ‰§è¡Œæ…¢å¼€å§‹ç®—æ³•ã€‚ </li>
<li>ç”±äºå‘é€æ–¹ç°åœ¨è®¤ä¸ºç½‘ç»œå¾ˆå¯èƒ½æ²¡æœ‰å‘ç”Ÿæ‹¥å¡ï¼Œå› æ­¤ç°åœ¨ä¸æ‰§è¡Œæ…¢å¼€å§‹ç®—æ³•ï¼Œå³æ‹¥å¡çª—å£ cwnd ç°åœ¨ä¸è®¾ç½®ä¸º 1ï¼Œè€Œæ˜¯è®¾ç½®ä¸ºæ…¢å¼€å§‹é—¨é™ ssthresh å‡åŠåçš„æ•°å€¼ï¼Œç„¶åå¼€å§‹æ‰§è¡Œæ‹¥å¡é¿å…ç®—æ³•ï¼ˆâ€œåŠ æ³•å¢å¤§â€ï¼‰ï¼Œä½¿æ‹¥å¡çª—å£ç¼“æ…¢åœ°çº¿æ€§å¢å¤§ã€‚</li>
</ol>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/5/16b236df9efc1e24?w=997&amp;h=463&amp;f=jpeg&amp;s=75034" alt></p>
<blockquote>
<p>æ³¨æ„<strong>å‘é€æ–¹çš„å‘é€çª—å£çš„ä¸Šé™å€¼</strong>åº”å½“å–ä¸ºæ¥æ”¶æ–¹çª—å£ <code>rwnd</code> å’Œæ‹¥å¡çª—å£ <code>cwnd</code> è¿™ä¸¤ä¸ªå˜é‡ä¸­è¾ƒå°çš„ä¸€ä¸ª<br><br>å½“ <code>rwnd &lt; cwnd</code>æ—¶ï¼Œæ˜¯æ¥æ”¶æ–¹çš„æ¥æ”¶èƒ½åŠ›é™åˆ¶å‘é€çª—å£çš„æœ€å¤§å€¼ã€‚<br><br>å½“ <code>cwnd &lt; rwnd</code>æ—¶ï¼Œåˆ™æ˜¯ç½‘ç»œçš„æ‹¥å¡é™åˆ¶å‘é€çª—å£çš„æœ€å¤§å€¼ã€‚ </p>
</blockquote>
<h2 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h2><h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><p>DNS æ˜¯ä¸€ä¸ª åŸŸå å’Œ IP ç›¸äº’æ˜ å°„çš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œé€šè¿‡DNSæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åŸŸåæ›´æ–¹ä¾¿çš„è®¿é—®äº’è”ç½‘<br>è¯¦ç»†çš„è§<a href="https://juejin.im/post/59c6201df265da064428b835" target="_blank" rel="noopener">DNSåŸºç¡€çŸ¥è¯†</a></p>
<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><p>HTTPæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡ï¼Œå±äºTCP/IPä¸­çš„åº”ç”¨å±‚ã€‚<br>è¯¦ç»†çš„è§è§<a href="https://juejin.im/post/5cd16ba251882541cc70cbf8" target="_blank" rel="noopener">ã€Šå›¾è§£HTTPã€‹æ ¸å¿ƒçŸ¥è¯†æ€»ç»“</a></p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://lrh1993.gitbooks.io/android_interview_guide/content/computer-networks/tcpip.html" target="_blank" rel="noopener">TCP/IP Â· Androidæ ¡æ‹›é¢è¯•æŒ‡å—</a></li>
<li>ã€Šè®¡ç®—æœºç½‘ç»œã€‹</li>
<li>ã€Šå›¾è§£TCP/IPã€‹</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/29/Androidåº”ç”¨ä¹‹é—´æ•°æ®çš„äº¤äº’-è·å–ç³»ç»Ÿåº”ç”¨çš„æ•°æ®/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/29/Androidåº”ç”¨ä¹‹é—´æ•°æ®çš„äº¤äº’-è·å–ç³»ç»Ÿåº”ç”¨çš„æ•°æ®/" itemprop="url">Androidåº”ç”¨ä¹‹é—´æ•°æ®çš„äº¤äº’-è·å–ç³»ç»Ÿåº”ç”¨çš„æ•°æ®</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-05-29T23:57:07+08:00">
                2019-05-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨Androidåº”ç”¨å¼€å‘ä¸­æˆ‘ä»¬å¸¸å¸¸éœ€è¦å’Œå…¶ä»–åº”ç”¨è¿›è¡Œäº¤äº’ï¼Œä¹‹å‰å¯¹è¿™äº›é—®é¢˜æ²¡æœ‰ä»”ç»†äº†è§£è¿‡ï¼Œç°åœ¨æ¥åšä¸€ä¸‹æ€»ç»“ã€‚</p>
<p>Androidåº”ç”¨ä¹‹é—´æ•°æ®çš„äº¤äº’æ–¹å¼ï¼š</p>
<ul>
<li>è·å–ç³»ç»Ÿåº”ç”¨çš„æ•°æ®</li>
<li>æä¾›æ•°æ®ç»™å…¶ä»–åº”ç”¨</li>
<li>åº”ç”¨ä¹‹é—´çš„åˆ†äº«</li>
</ul>
<p>ä¸‹é¢ä»‹ç»è·å–ç³»ç»Ÿåº”ç”¨çš„æ•°æ®</p>
<h2 id="å®ä¾‹åˆ†æ"><a href="#å®ä¾‹åˆ†æ" class="headerlink" title="å®ä¾‹åˆ†æ"></a>å®ä¾‹åˆ†æ</h2><p>ä»¥è·å–è”ç³»äººæ•°æ®ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Cursor cursor=getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line"> <span class="keyword">if</span> (cursor!=<span class="keyword">null</span>)&#123;</span><br><span class="line">     <span class="keyword">while</span>(cursor.moveToNext())&#123;</span><br><span class="line">         <span class="comment">//è·å–è”ç³»äººçš„åå­—</span></span><br><span class="line">         String name=cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));</span><br><span class="line">         <span class="comment">//è·å–è”ç³»äººçš„ç”µè¯å·ç </span></span><br><span class="line">         String number=cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));</span><br><span class="line">         Log.d(<span class="string">"============"</span>,<span class="string">" name: "</span>+name+<span class="string">"  number="</span>+number);</span><br><span class="line">     &#125;</span><br><span class="line">     cursor.close();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>ContentResolver</code>ç±»çš„<code>query(Uri uri,String[] projection,String selection,String[] selectionArgs,String sortOrder)</code>æ–¹æ³•å‚æ•°çš„ä»‹ç»ï¼š<br><br><code>uri</code>ç”¨æ¥æŒ‡æ˜è¦è®¿é—®çš„æ•°æ®çš„ä½ç½®<br><br><code>projection</code>è®¿é—®çš„åˆ—ï¼Œå¦‚æœä¸ºnullï¼Œåˆ™è¡¨ç¤ºè®¿é—®æ‰€æœ‰åˆ—<br><br><code>selection</code>ç”¨äºæŒ‡å®šæŸ¥è¯¢æ¡ä»¶<br><br><code>selectionArgs</code>æŸ¥è¯¢å‚æ•°<br><br><code>sortOrder</code>æ’åºé¡ºåº<br></p>
</blockquote>
<h2 id="åŸºæœ¬æµç¨‹"><a href="#åŸºæœ¬æµç¨‹" class="headerlink" title="åŸºæœ¬æµç¨‹"></a>åŸºæœ¬æµç¨‹</h2><p>é‚£ä¹ˆ<code>ContentResolver</code>æ˜¯æ€ä¹ˆé€šè¿‡<code>query</code>æ–¹æ³•æ¥è·å–è”ç³»äººçš„æ•°æ®çš„å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥åˆ†æ<code>ContentResolver</code>çš„æºç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="meta">@Nullable</span> <span class="function">Cursor <span class="title">query</span><span class="params">(@RequiresPermission.Read @NonNull Uri uri,</span></span></span><br><span class="line"><span class="function"><span class="params">            @Nullable String[] projection, @Nullable String selection,</span></span></span><br><span class="line"><span class="function"><span class="params">            @Nullable String[] selectionArgs, @Nullable String sortOrder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(uri, projection, selection, selectionArgs, sortOrder, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="meta">@Nullable</span> <span class="function">Cursor <span class="title">query</span><span class="params">(@RequiresPermission.Read @NonNull Uri uri,</span></span></span><br><span class="line"><span class="function"><span class="params">            @Nullable String[] projection, @Nullable String selection,</span></span></span><br><span class="line"><span class="function"><span class="params">            @Nullable String[] selectionArgs, @Nullable String sortOrder,</span></span></span><br><span class="line"><span class="function"><span class="params">            @Nullable CancellationSignal cancellationSignal)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æŠŠæŸ¥è¯¢å‚æ•°å°è£…åœ¨Bundleä¸­</span></span><br><span class="line">        Bundle queryArgs = createSqlQueryBundle(selection, selectionArgs, sortOrder);</span><br><span class="line">        <span class="keyword">return</span> query(uri, projection, queryArgs, cancellationSignal);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="meta">@Nullable</span> <span class="function">Cursor <span class="title">query</span><span class="params">(<span class="keyword">final</span> @RequiresPermission.Read @NonNull Uri uri,</span></span></span><br><span class="line"><span class="function"><span class="params">            @Nullable String[] projection, @Nullable Bundle queryArgs,</span></span></span><br><span class="line"><span class="function"><span class="params">            @Nullable CancellationSignal cancellationSignal)</span> </span>&#123;</span><br><span class="line">        Preconditions.checkNotNull(uri, <span class="string">"uri"</span>);</span><br><span class="line">        <span class="comment">//è·å–ä¸ç¨³å®šçš„æä¾›è€… IContentProvideræ˜¯IPCæ¥å£ç”¨æ¥ä¸å†…å®¹æä¾›è€…è¿›è¡Œæ•°æ®äº¤äº’</span></span><br><span class="line">        IContentProvider unstableProvider = acquireUnstableProvider(uri);</span><br><span class="line">        <span class="keyword">if</span> (unstableProvider == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        IContentProvider stableProvider = <span class="keyword">null</span>;</span><br><span class="line">        Cursor qCursor = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ...<span class="comment">//çœç•¥äº›ä¸é‡è¦çš„æºç </span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                qCursor = unstableProvider.query(mPackageName, uri, projection,</span><br><span class="line">                        queryArgs, remoteCancellationSignal);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (DeadObjectException e) &#123;</span><br><span class="line">                <span class="comment">// The remote process has died...  but we only hold an unstable</span></span><br><span class="line">                <span class="comment">// reference though, so we might recover!!!  Let's try!!!!</span></span><br><span class="line">                <span class="comment">// This is exciting!!1!!1!!!!1</span></span><br><span class="line">                unstableProviderDied(unstableProvider);</span><br><span class="line">                stableProvider = acquireProvider(uri);<span class="comment">//ç¬¬ä¸€æ¬¡åˆ›å»ºçš„æ˜¯ä¸ç¨³å®šçš„ï¼Œå¦‚æœå¤±è´¥å°±é‡è¯•</span></span><br><span class="line">                <span class="keyword">if</span> (stableProvider == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                qCursor = stableProvider.query(</span><br><span class="line">                        mPackageName, uri, projection, queryArgs, remoteCancellationSignal);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (qCursor == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Force query execution.  Might fail and throw a runtime exception here.</span></span><br><span class="line">            qCursor.getCount();<span class="comment">//è°ƒç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­æ˜¯å¦æŸ¥è¯¢å‡ºé”™</span></span><br><span class="line">            <span class="keyword">long</span> durationMillis = SystemClock.uptimeMillis() - startTime;</span><br><span class="line">            maybeLogQueryToEventLog(durationMillis, uri, projection, queryArgs);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Wrap the cursor object into CursorWrapperInner object.</span></span><br><span class="line">            <span class="keyword">final</span> IContentProvider provider = (stableProvider != <span class="keyword">null</span>) ? stableProvider</span><br><span class="line">                    : acquireProvider(uri);</span><br><span class="line">            <span class="keyword">final</span> CursorWrapperInner wrapper = <span class="keyword">new</span> CursorWrapperInner(qCursor, provider);<span class="comment">//CursorWrapperInneræ˜¯å†…éƒ¨ç±»</span></span><br><span class="line">            stableProvider = <span class="keyword">null</span>;</span><br><span class="line">            qCursor = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">return</span> wrapper;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RemoteException e) &#123;</span><br><span class="line">            <span class="comment">// Arbitrary and not worth documenting, as Activity</span></span><br><span class="line">            <span class="comment">// Manager will kill this process shortly anyway.</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;<span class="comment">//é‡Šæ”¾èµ„æº</span></span><br><span class="line">           ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> IContentProvider <span class="title">acquireUnstableProvider</span><span class="params">(Uri uri)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!SCHEME_CONTENT.equals(uri.getScheme())) &#123;<span class="comment">//SCHEME_CONTENTä¸ºcontent,å¦‚æœuriçš„schemeä¸ºnullåˆ™è¿”å›null</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        String auth = uri.getAuthority();</span><br><span class="line">        <span class="keyword">if</span> (auth != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> acquireUnstableProvider(mContext, uri.getAuthority());<span class="comment">//è¿™é‡Œè°ƒç”¨çš„æ˜¯ApplicationContentResolverçš„acquireUnstableProvideræ–¹æ³•</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>ContentResolver</code>çš„æºç ä¸­<code>query</code>æœ‰ä¸‰ä¸ªé‡è½½æ–¹æ³•1ï¼Œ2ï¼Œ3ï¼Œåœ¨å®ä¾‹ä¸­æˆ‘ä»¬è°ƒç”¨é‡è½½æ–¹æ³•1ï¼Œæ–¹æ³•1ä¸­åˆ™ç›´æ¥è°ƒç”¨æ–¹æ³•2ã€‚åœ¨æ–¹æ³•2ä¸­ï¼Œå°è£…äº†æ•°æ®åˆ°<code>Bundle</code>ä¸­ï¼Œå¹¶è°ƒç”¨äº†æ–¹æ³•3ï¼ŒçœŸæ­£çš„å®ç°åœ¨æ–¹æ³•3ä¸­ã€‚æ–¹æ³•3ä¸­çš„æ ¸å¿ƒæ–¹æ³•æ˜¯<code>acquireUnstableProvider(Uri uri)</code>,å®ƒè·å–<code>IContentProvider</code>(ä¸€ä¸ªIPC æ¥å£)ï¼Œå¹¶é€šè¿‡<code>IContentProvider</code>æ¥è·å–è”ç³»äººçš„æ•°æ®ã€‚è€Œ<code>acquireUnstableProvider(Uri uri)</code>è°ƒç”¨çš„æ˜¯<code>acquireUnstableProvider(Context c, String name)</code>æ–¹æ³•ï¼Œå®ƒæ˜¯ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå…·ä½“çš„å®ç°ç±»æ˜¯<code>ApplicationContentResolver</code>ã€‚</p>
<p><code>ApplicationContentResolver</code>çš„<code>acquireUnstableProvider</code>æ–¹æ³•æºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> IContentProvider <span class="title">acquireUnstableProvider</span><span class="params">(Context c, String auth)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> mMainThread.acquireProvider(c,</span><br><span class="line">                 ContentProvider.getAuthorityWithoutUserId(auth),</span><br><span class="line">                 resolveUserIdFromAuthority(auth), <span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>ApplicationContentResolver</code>çš„<code>acquireUnstableProvider</code>æ–¹æ³•è°ƒç”¨äº†<code>ActivityThread</code>çš„<code>acquireProvider</code>æ–¹æ³•ï¼Œæºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> IContentProvider <span class="title">acquireProvider</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"> Context c, String auth, <span class="keyword">int</span> userId, <span class="keyword">boolean</span> stable)</span> </span>&#123;</span><br><span class="line"> <span class="comment">// åˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„IContentProviderï¼Œæœ‰åˆ™ç›´æ¥è¿”å›</span></span><br><span class="line"><span class="keyword">final</span> IContentProvider provider = acquireExistingProvider(c, auth, userId, stable);</span><br><span class="line">       <span class="keyword">if</span> (provider != <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> provider;</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">        <span class="comment">// There is a possible race here.  Another thread may try to acquire</span></span><br><span class="line">        <span class="comment">// the same provider at the same time.  When this happens, we want to ensure</span></span><br><span class="line">        <span class="comment">// that the first one wins.</span></span><br><span class="line">        <span class="comment">// Note that we cannot hold the lock while acquiring and installing the</span></span><br><span class="line">        <span class="comment">// provider since it might take a long time to run and it could also potentially</span></span><br><span class="line">        <span class="comment">// be re-entrant in the case where the provider is in the same process.</span></span><br><span class="line">        ContentProviderHolder holder = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//é€šè¿‡AMSè·å–ContentProviderHolderï¼Œ å¤„ç†åœ¨ä¸åŒè¿›ç¨‹çš„æƒ…å†µï¼Œ</span></span><br><span class="line">            <span class="comment">//å¦‚æœåœ¨åŒä¸€è¿›ç¨‹å°±è®©`holder.provider = null;`</span></span><br><span class="line">            holder = ActivityManager.getService().getContentProvider(</span><br><span class="line">                    getApplicationThread(), auth, userId, stable);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RemoteException ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> ex.rethrowFromSystemServer();</span><br><span class="line">        &#125;</span><br><span class="line">       <span class="comment">//å¤±è´¥</span></span><br><span class="line">       <span class="keyword">if</span> (holder == <span class="keyword">null</span>) &#123;</span><br><span class="line">            Slog.e(TAG, <span class="string">"Failed to find provider info for "</span> + auth);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Install provider will increment the reference count for us, and break</span></span><br><span class="line">        <span class="comment">// any ties in the race.</span></span><br><span class="line">        <span class="comment">//å¦‚æœåœ¨åŒä¸€è¿›ç¨‹ï¼Œåˆ™è¿›è¡Œç›¸åº”çš„å¤„ç†</span></span><br><span class="line">        holder = installProvider(c, holder, holder.info,</span><br><span class="line">                <span class="keyword">true</span> <span class="comment">/*noisy*/</span>, holder.noReleaseNeeded, stable);</span><br><span class="line">        <span class="keyword">return</span> holder.provider;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><code>ApplicationContentResolver</code>é€šè¿‡è°ƒç”¨<code>ActivityThreadçš„acquireProvider</code>æ–¹æ³•æ¥è·å–<code>ContentProvider</code>;<code>ActivityThread</code>å…ˆä¼šåˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨è¦æ±‚çš„<code>IContentProvider</code>,<br>å¦‚æœå­˜åœ¨å°±ç›´æ¥è¿”å›ï¼Œå¦‚æœä¸å­˜åœ¨å°±è°ƒç”¨AMSçš„<code>getContentProviderImpl()</code>å’Œ<code>installProvider</code>æ¥è·å–ã€‚</p>
<p>å…³äºAMSè·å–IContentProviderçš„è¯¦ç»†æµç¨‹ï¼Œå¯ä»¥çœ‹<a href="https://juejin.im/entry/5bfcf8566fb9a049ba414362" target="_blank" rel="noopener">ContentProviderå¯åŠ¨è¿‡ç¨‹åˆ†æ</a></p>
<h2 id="ContactsContractè¯¦è§£"><a href="#ContactsContractè¯¦è§£" class="headerlink" title="ContactsContractè¯¦è§£"></a>ContactsContractè¯¦è§£</h2><p><code>ContactsContract</code>æ˜¯å­˜å‚¨è”ç³»äººçš„æ•°æ®è¡¨çš„å¸¸é‡å­—æ®µï¼Œå®ƒæœ‰å‡ ä¸ªå¸¸ç”¨çš„å†…éƒ¨ç±»å¦‚ä¸‹ï¼š</p>
<ul>
<li>ContactsContract.Dataï¼šæ•°æ®è¡¨çš„å¸¸é‡ï¼ŒåŒ…å«ä¸åŸå§‹è”ç³»äººå…³è”çš„æ•°æ®ç‚¹ã€‚ æ•°æ®è¡¨çš„æ¯ä¸€è¡Œé€šå¸¸ç”¨äºå­˜å‚¨å•æ¡è”ç³»ä¿¡æ¯ï¼ˆä¾‹å¦‚ç”µè¯å·ç ï¼‰åŠå…¶ç›¸å…³å…ƒæ•°æ®ï¼ˆä¾‹å¦‚ï¼Œå®ƒæ˜¯å·¥ä½œå·ç è¿˜æ˜¯å®¶åº­å·ç ï¼‰</li>
<li>ContactsContract.CommonDataKindsï¼šç”¨äºå®šä¹‰å­˜å‚¨åœ¨ContactsContract.Dataè¡¨ä¸­çš„å…¬å…±æ•°æ®ç±»å‹çš„å®¹å™¨ã€‚</li>
<li>ContactsContract.Contactsï¼šè”ç³»äººè¡¨çš„å¸¸é‡ï¼ŒåŒ…å«ä»£è¡¨åŒä¸€ä¸ªäººçš„æ¯ä¸ªåŸå§‹è”ç³»äººèšåˆçš„è®°å½•</li>
</ul>
<blockquote>
<p>è”ç³»äººæ•°æ®æ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼ˆå…·ä½“ä½ç½®åœ¨data/data/com.android.providers.contacts/databasesä¸­ï¼‰ï¼Œæ ¹æ®å…¶MIMEç±»å‹æ¥åˆ¤æ–­å…¶ä½ç½®æ‰€ä»£è¡¨çš„æ„ä¹‰ã€‚å¦‚<br><code>ContactsContract.CommonDataKinds.Phone.NUMBER</code>å’Œ<code>ContactsContract.CommonDataKinds.Email.ADDRESS</code>éƒ½è¡¨ç¤º<br><code>data1</code>,ä½†æ˜¯åœ¨æ•°æ®åº“ä¸­ä¸åŒçš„MIMEç±»å‹çš„<code>data1</code>è¡¨ç¤ºä¸åŒçš„æ•°æ®ã€‚</p>
</blockquote>
<p>æ•°æ®åº“ä¸­<code>data</code>è¡¨çš„å­—æ®µå’Œæ•°æ®å¦‚ä¸‹ï¼ˆå­—æ®µå¤ªå¤šï¼Œåªæˆªå–äº†éƒ¨åˆ†ï¼‰ </p>
<p><img src="/2019/05/29/Androidåº”ç”¨ä¹‹é—´æ•°æ®çš„äº¤äº’-è·å–ç³»ç»Ÿåº”ç”¨çš„æ•°æ®/1.png" alt></p>
<p>MIMEç±»å‹å¦‚ä¸‹</p>
<p><img src="/2019/05/29/Androidåº”ç”¨ä¹‹é—´æ•°æ®çš„äº¤äº’-è·å–ç³»ç»Ÿåº”ç”¨çš„æ•°æ®/2.png" alt></p>
<p>é€šè¿‡<code>MIME</code>ç±»å‹æ¥è·å–æ‰€éœ€è¦çš„æ•°æ®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Uri p = ContactsContract.Data.CONTENT_URI;</span><br><span class="line">Cursor id = getActivity().getContentResolver().query(p,<span class="keyword">new</span> String[]&#123;ContactsContract.Data.CONTACT_ID&#125;,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">while</span> (id.moveToNext())&#123;</span><br><span class="line">    Cursor cursor=getActivity().getContentResolver().query(p, <span class="keyword">null</span>,ContactsContract.Data.CONTACT_ID+<span class="string">"= ?"</span>, <span class="keyword">new</span> String[]&#123;id.getString(id.getColumnIndex(ContactsContract.Data.CONTACT_ID))&#125;, <span class="keyword">null</span>);</span><br><span class="line">    Person person = <span class="keyword">new</span> Person();</span><br><span class="line">    <span class="keyword">byte</span>[] image = <span class="keyword">null</span>;</span><br><span class="line">    StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">while</span> (cursor.moveToNext())&#123;</span><br><span class="line">            String mime = cursor.getString(cursor.getColumnIndex(ContactsContract.Data.MIMETYPE));</span><br><span class="line">            Log.d(<span class="string">"==========="</span>,<span class="string">"mime = "</span>+mime);</span><br><span class="line">            <span class="keyword">if</span> (mime.equals(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE))&#123;</span><br><span class="line">                builder.append(<span class="string">"name = "</span>+cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)));</span><br><span class="line">                builder.append(<span class="string">"number = "</span>+cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (mime.equals(ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE))&#123;</span><br><span class="line">            <span class="comment">//äºŒè¿›åˆ¶æ•°æ®ä¸€èˆ¬æ”¾åœ¨data15ä¸­</span></span><br><span class="line">                image=cursor.getBlob(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Photo.DATA15));</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (mime.equals(ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE))&#123;</span><br><span class="line">                builder.append(<span class="string">"email = "</span>+cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.ADDRESS)));</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (mime.equals(ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE))&#123;</span><br><span class="line">                builder.append(<span class="string">"address = "</span>+cursor.getString(cursor.getColumnIndex(ContactsContract.</span><br><span class="line">                        CommonDataKinds.StructuredPostal.STREET)));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    String con=builder.toString();</span><br><span class="line">    Log.d(<span class="string">"==========="</span>,con);</span><br><span class="line">    cursor.close();</span><br><span class="line">    &#125;</span><br><span class="line">id.close();</span><br></pre></td></tr></table></figure>
<p><code>ContentResolver()</code>è¿˜æœ‰<code>insert</code>ã€<code>delete</code>ã€<code>update</code>æ–¹æ³•ï¼Œå…¶ç”¨æ³•ä¸<code>query</code>ç±»ä¼¼ï¼Œè¿™é‡Œä¸å†ä»‹ç»ã€‚</p>
<h2 id="è·å–å…¶ä»–ç³»ç»Ÿåº”ç”¨æ•°æ®"><a href="#è·å–å…¶ä»–ç³»ç»Ÿåº”ç”¨æ•°æ®" class="headerlink" title="è·å–å…¶ä»–ç³»ç»Ÿåº”ç”¨æ•°æ®"></a>è·å–å…¶ä»–ç³»ç»Ÿåº”ç”¨æ•°æ®</h2><h3 id="CalendarContract"><a href="#CalendarContract" class="headerlink" title="CalendarContract"></a>CalendarContract</h3><p><code>CalendarContract</code>æ˜¯å­˜å‚¨æ—¥å†å’Œäº‹ä»¶ç›¸å…³ä¿¡æ¯å­—æ®µè¡¨ï¼Œä¸<code>ContactsContract</code>ç±»ä¼¼ã€‚<code>CalendarContract</code>ä¹Ÿæœ‰å‡ ä¸ªå†…éƒ¨ç±»ï¼Œå¸¸ç”¨çš„æ˜¯<code>CalendarContract.Events</code>ï¼ŒåŒ…å«è¯¸å¦‚äº‹ä»¶æ ‡é¢˜ï¼Œä½ç½®ï¼Œå¼€å§‹æ—¶é—´ï¼Œç»“æŸæ—¶é—´ç­‰ä¿¡æ¯ã€‚<code>CalendarContract.Events</code>çš„ä½¿ç”¨å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    Uri p = CalendarContract.Events.CONTENT_URI;</span><br><span class="line">    Cursor cursor=getActivity().getContentResolver().query(p, <span class="keyword">null</span>,<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">while</span> (cursor.moveToNext())&#123;</span><br><span class="line">        StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">       builder.append(<span class="string">"æ ‡é¢˜ : "</span>+cursor.getString(cursor.getColumnIndex(CalendarContract.Events.TITLE))+<span class="string">"\n"</span>)</span><br><span class="line">               .append(<span class="string">"èµ·å§‹æ—¶é—´ ï¼š"</span>+cursor.getString(cursor.getColumnIndex(CalendarContract.Events.DTSTART))+<span class="string">"\n"</span>)</span><br><span class="line">               .append(<span class="string">"ç»“æŸæ—¶é—´ ï¼š"</span>+cursor.getString(cursor.getColumnIndex(CalendarContract.Events.DTEND))+<span class="string">"\n"</span>)</span><br><span class="line">               .append(<span class="string">"æè¿° : "</span>+cursor.getString(cursor.getColumnIndex(CalendarContract.Events.DESCRIPTION))+<span class="string">"\n"</span>);</span><br><span class="line">        contents.add(builder.toString());</span><br><span class="line">    &#125;</span><br><span class="line">cursor.close();</span><br></pre></td></tr></table></figure></p>
<p>æ›´å¤šå…³äº<code>CalendarContract</code>çš„ä½¿ç”¨ï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚</p>
<h3 id="MediaStore"><a href="#MediaStore" class="headerlink" title="MediaStore"></a>MediaStore</h3><p><code>MediaStore</code>åŒ…å«å†…éƒ¨å’Œå¤–éƒ¨å­˜å‚¨è®¾å¤‡ä¸Šæ‰€æœ‰å¯ç”¨åª’ä½“çš„å…ƒæ•°æ®ã€‚å…¶å†…éƒ¨ç±»å¦‚ä¸‹ï¼š</p>
<ul>
<li>MediaStore.Audioï¼šé›†è£…ç®±æ‰€æœ‰çš„éŸ³é¢‘å†…å®¹ã€‚</li>
<li>MediaStore.Filesï¼šåª’ä½“æä¾›ç¨‹åºè¡¨ï¼ŒåŒ…å«åª’ä½“å­˜å‚¨ä¸­æ‰€æœ‰æ–‡ä»¶çš„ç´¢å¼•ï¼ŒåŒ…æ‹¬éåª’ä½“æ–‡ä»¶ã€‚</li>
<li>MediaStore.Imagesï¼šåŒ…å«æ‰€æœ‰å¯ç”¨å›¾åƒçš„å…ƒæ•°æ®</li>
<li>interface MediaStore.MediaColumnsï¼šå¤§å¤šæ•°MediaProviderè¡¨çš„å…¬å…±å­—æ®µ</li>
<li>MediaStore.Videoï¼šåŒ…å«æ‰€æœ‰å¯ç”¨è§†é¢‘çš„å…ƒæ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; contents = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">Uri p1 = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;</span><br><span class="line">Cursor cursor1=getActivity().getContentResolver().query(p1, <span class="keyword">null</span>,<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">while</span> (cursor1.moveToNext())&#123;</span><br><span class="line">    StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    builder.append(<span class="string">"æ–‡ä»¶å : "</span>+cursor1.getString(cursor1.getColumnIndex(MediaStore.Images.Media.TITLE))+<span class="string">"\n"</span>)</span><br><span class="line">            .append(<span class="string">"æè¿° ï¼š"</span>+cursor1.getString(cursor1.getColumnIndex(MediaStore.Images.Media.DESCRIPTION))+<span class="string">"\n"</span>)</span><br><span class="line">            .append(<span class="string">"å¤§å° ï¼š"</span>+cursor1.getString(cursor1.getColumnIndex(MediaStore.Images.Media.SIZE))+<span class="string">"\n"</span>)</span><br><span class="line">            .append(<span class="string">"ä½ç½® : "</span>+cursor1.getString(cursor1.getColumnIndex(MediaStore.Images.Media.DATA))+<span class="string">"\n"</span>)</span><br><span class="line">            .append(<span class="string">"æ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼š"</span>+cursor1.getString(cursor1.getColumnIndex(MediaStore.Images.Media.DATE_MODIFIED))+<span class="string">"\n"</span>)</span><br><span class="line">            .append(<span class="string">"DISPLAY_NAME ï¼š"</span>+cursor1.getString(cursor1.getColumnIndex(MediaStore.Images.Media.DISPLAY_NAME))+<span class="string">"\n"</span>)</span><br><span class="line">            .append(<span class="string">"æ—¶é—´ : "</span>+cursor1.getString(cursor1.getColumnIndex(MediaStore.Images.Media.DATE_TAKEN))+<span class="string">"\n"</span>);</span><br><span class="line">    contents.add(builder.toString());</span><br><span class="line">&#125;</span><br><span class="line">cursor1.close();</span><br></pre></td></tr></table></figure>
<h3 id="Settings"><a href="#Settings" class="headerlink" title="Settings"></a>Settings</h3><p><code>Settings</code>ä¸<code>XXXContract</code>ä¸åŒï¼Œå®ƒæ˜¯é€šè¿‡xmlæ–‡ä»¶æ¥å­˜å‚¨æ•°æ®ï¼Œåœ¨æ–‡ä»¶<code>/data/system/users/0/</code>ç›®å½•ä¸‹ï¼Œè·å–è®¾ç½®çš„æ–¹å¼å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        ContentResolver contentResolver=getActivity().getContentResolver();</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &#123;</span><br><span class="line">            builder.append(<span class="string">"wifiæ˜¯å¦å¼€å¯ï¼š"</span>+Settings.Global.getString(contentResolver,Settings.Global.WIFI_ON)+<span class="string">"\n"</span>)</span><br><span class="line">                   .append(<span class="string">"æ•°æ®æµé‡æ˜¯å¦å¼€å¯ï¼š"</span>+Settings.Global.getString(contentResolver,Settings.Global.DATA_ROAMING)+<span class="string">"\n"</span>)</span><br><span class="line">                   .append(Settings.System.NOTIFICATION_SOUND+<span class="string">" "</span>+Settings.System.getString(contentResolver,Settings.System.NOTIFICATION_SOUND)).append(<span class="string">"\n"</span>)</span><br><span class="line">                    .append(Settings.System.SCREEN_BRIGHTNESS+<span class="string">" "</span>+Settings.System.getString(contentResolver,Settings.System.SCREEN_BRIGHTNESS)).append(<span class="string">"\n"</span>)</span><br><span class="line">                    .append(Settings.System.TEXT_SHOW_PASSWORD+<span class="string">" "</span>+Settings.System.getString(contentResolver,Settings.System.TEXT_SHOW_PASSWORD)).append(<span class="string">"\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Log.d(<span class="string">"=============="</span>,builder.toString());</span><br></pre></td></tr></table></figure></p>
<p>æ›´å¤šå…³äº<code>Setting</code>çš„å†…å®¹å¯ä»¥çœ‹<a href="https://blog.csdn.net/myfriend0/article/details/59107989" target="_blank" rel="noopener">Androidç³»ç»ŸAPPä¹‹SettingsProvider</a></p>
<blockquote>
<p>æ³¨æ„ï¼šä»¥ä¸Šçš„æ“ä½œéƒ½æ˜¯éœ€è¦ç”³è¯·æƒé™çš„</p>
</blockquote>
<h3 id="å¼‚æ­¥å¤„ç†"><a href="#å¼‚æ­¥å¤„ç†" class="headerlink" title="å¼‚æ­¥å¤„ç†"></a>å¼‚æ­¥å¤„ç†</h3><p>å¦‚æœè¯·æ±‚æ•°æ®çš„æ“ä½œå¤ªè¿‡è€—æ—¶ï¼Œå¯èƒ½é€ æˆANRï¼Œå› æ­¤éœ€è¦å¼‚æ­¥å¤„ç†ã€‚å¼‚æ­¥å¤„ç†çš„æ–¹å¼æœ‰ï¼š</p>
<ul>
<li>Thread + Handler </li>
<li>AsyncTask </li>
<li><a href="https://juejin.im/post/5a27c56e51882535cd4ab5af" target="_blank" rel="noopener">Loader</a></li>
<li>RxJava</li>
</ul>
<p>å‚è€ƒæ–‡ç« ï¼š<br></p>
<ul>
<li><a href="https://juejin.im/entry/5bfcf8566fb9a049ba414362" target="_blank" rel="noopener">https://juejin.im/entry/5bfcf8566fb9a049ba414362</a></li>
<li><a href="https://blog.csdn.net/myfriend0/article/details/59107989" target="_blank" rel="noopener">https://blog.csdn.net/myfriend0/article/details/59107989</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/22/javaå†…å­˜æº¢å‡ºå¼‚å¸¸/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/javaå†…å­˜æº¢å‡ºå¼‚å¸¸/" itemprop="url">javaå†…å­˜æº¢å‡ºå¼‚å¸¸</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-05-22T20:45:56+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/22/javaå†…å­˜åŒºåŸŸ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/javaå†…å­˜åŒºåŸŸ/" itemprop="url">javaå†…å­˜åŒºåŸŸ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-05-22T20:45:33+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jvm/" itemprop="url" rel="index">
                    <span itemprop="name">jvm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/2019/05/22/javaå†…å­˜åŒºåŸŸ/1.jpg" alt="javaå†…å­˜åŒºåŸŸ"></p>
<h2 id="ç¨‹åºè®¡æ•°å™¨"><a href="#ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h2><p>ç¨‹åºè®¡æ•°å™¨å ç”¨ä¸€å°å—å†…å­˜ç©ºé—´ï¼Œç”¨æ¥æŒ‡ç¤ºå½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç è¡Œå·ã€‚å­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜<br>è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½<br>éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚</p>
<blockquote>
<p>æ¯ä¸€æ¡çº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„æ¡çº¿ç¨‹ä¹‹é—´è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ï¼Œæˆ‘ä»¬ç§°è¿™ç±»å†…å­˜åŒºåŸŸä¸º<br>â€œçº¿ç¨‹ç§æœ‰â€çš„å†…å­˜ã€‚</p>
</blockquote>
<blockquote>
<p>å¦‚æœçº¿ç¨‹æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªJavaæ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤åœ°å€ï¼›å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯native<br>æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼åˆ™ä¸ºç©ºã€‚æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰è§„å®šä»»ä½•<code>OutOfMemoryError</code>æƒ…å†µçš„åŒºåŸŸã€‚</p>
</blockquote>
<h2 id="è™šæ‹Ÿæœºæ ˆ"><a href="#è™šæ‹Ÿæœºæ ˆ" class="headerlink" title="è™šæ‹Ÿæœºæ ˆ"></a>è™šæ‹Ÿæœºæ ˆ</h2><p>è™šæ‹Ÿæœºæ ˆå’Œç¨‹åºè®¡æ•°å™¨ä¸€æ ·ä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶<br>éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ä¸­å°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§<br>åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>ç»å¸¸æœ‰äººæŠŠJavaå†…å­˜åˆ†ä¸ºå †å†…å­˜å’Œæ ˆå†…å­˜ï¼›è¿™é‡Œæ‰€æŒ‡çš„æ ˆæ˜¯æŒ‡è™šæ‹Ÿæœºæ ˆæˆ–è€…è™šæ‹Ÿæœºæ ˆä¸­çš„å±€éƒ¨å˜é‡è¡¨éƒ¨åˆ†</p>
</blockquote>
<p>å±€éƒ¨å˜é‡è¡¨å­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡å¼•ç”¨ï¼ˆreferenceç±»å‹ï¼Œå®ƒä¸ç­‰åŒäºå¯¹è±¡æœ¬èº«ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œæœ‰å¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³<br>çš„ä½ç½®ï¼‰å’ŒreturnAddressç±»å‹ï¼ˆæŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼‰</p>
<h2 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h2><p>è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„nativeæ–¹æ³•æœåŠ¡</p>
<h2 id="Javaå †"><a href="#Javaå †" class="headerlink" title="Javaå †"></a>Javaå †</h2><p>å¯¹äºå¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼ŒJavaå †æ˜¯Javaè™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚Javaå †æ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œå‡ ä¹<br>æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚Javaå †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸï¼Œå› æ­¤å¾ˆå¤šæ—¶å€™ä¹Ÿè¢«ç§°ä¸º<code>GCå †</code></p>
<blockquote>
<p>å½“å‰ä¸»æµçš„è™šæ‹Ÿæœºéƒ½æ˜¯æŒ‰ç…§å¯æ‰©å±•æ¥å®ç°çš„ï¼ˆé€šè¿‡-Xmxå’Œ-Xmsæ§åˆ¶ï¼‰å¦‚æœåœ¨å †ä¸­æ²¡æœ‰å†…å­˜å®Œæˆå®ä¾‹åˆ†é…ï¼Œå¹¶ä¸”å †ä¹Ÿæ— æ³•å†æ‰©å±•<br>æ—¶ï¼Œå°†æŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸</p>
</blockquote>
<h2 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h2><p>æ–¹æ³•åŒºæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚</p>
<h2 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h2><p>è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé™¤äº†ä¿å­˜Classæ–‡ä»¶ä¸­æè¿°çš„ç¬¦å·å¼•ç”¨å¤–ï¼Œè¿˜ä¼šæŠŠç¿»è¯‘å‡ºæ¥çš„ç›´æ¥å¼•ç”¨ä¹Ÿå­˜å‚¨åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­</p>
<blockquote>
<p>æ³¨æ„:å¹¶éé¢„ç½®å…¥Classæ–‡ä»¶ä¸­å¸¸é‡æ± çš„å†…å®¹æ‰èƒ½è¿›å…¥æ–¹æ³•åŒºè¿è¡Œæ—¶å¸¸é‡æ± ï¼Œè¿è¡ŒæœŸé—´ä¹Ÿå¯èƒ½å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œè¿™ç§ç‰¹æ€§è¢«å¼€å‘äººå‘˜åˆ©ç”¨<br>çš„æ¯”è¾ƒå¤šçš„æ˜¯Stringç±»çš„<code>intern()</code>æ–¹æ³•</p>
</blockquote>
<h2 id="ç›´æ¥å†…å­˜"><a href="#ç›´æ¥å†…å­˜" class="headerlink" title="ç›´æ¥å†…å­˜"></a>ç›´æ¥å†…å­˜</h2><p>ç›´æ¥å†…å­˜å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶å†…å­˜çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯jvmè§„èŒƒä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚å®ƒæ˜¯ç”±æœ¬æœºç›´æ¥åˆ†é…å†…å­˜ï¼Œä¸å—Javaå †å¤§å°çš„é™åˆ¶ï¼ˆä½†æ˜¯<br>å—æœ¬æœºæ€»çº¿ç¨‹çš„é™åˆ¶ï¼‰ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šNIO</p>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨ä¸ºæœåŠ¡å™¨è™šæ‹Ÿæœºé…ç½®å‚æ•°æ—¶ï¼Œä¸èƒ½å¿½ç•¥è¿™éƒ¨åˆ†å†…å­˜ï¼Œå¦åˆ™å¯èƒ½å¼•å‘OutOfMemoryErrorå¼‚å¸¸</p>
</blockquote>
<h2 id="HotSpotè™šæ‹Ÿæœºåœ¨Javaå †ä¸­å¯¹è±¡çš„åˆ†é…ã€å¸ƒå±€å’Œè®¿é—®çš„å…¨è¿‡ç¨‹"><a href="#HotSpotè™šæ‹Ÿæœºåœ¨Javaå †ä¸­å¯¹è±¡çš„åˆ†é…ã€å¸ƒå±€å’Œè®¿é—®çš„å…¨è¿‡ç¨‹" class="headerlink" title="HotSpotè™šæ‹Ÿæœºåœ¨Javaå †ä¸­å¯¹è±¡çš„åˆ†é…ã€å¸ƒå±€å’Œè®¿é—®çš„å…¨è¿‡ç¨‹"></a>HotSpotè™šæ‹Ÿæœºåœ¨Javaå †ä¸­å¯¹è±¡çš„åˆ†é…ã€å¸ƒå±€å’Œè®¿é—®çš„å…¨è¿‡ç¨‹</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/22/ã€Šå›¾è§£HTTPã€‹æ ¸å¿ƒæ€»ç»“/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/ã€Šå›¾è§£HTTPã€‹æ ¸å¿ƒæ€»ç»“/" itemprop="url">ã€Šå›¾è§£HTTPã€‹æ ¸å¿ƒæ€»ç»“</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-05-22T20:08:27+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/è®¡ç®—æœºç½‘ç»œ/" itemprop="url" rel="index">
                    <span itemprop="name">è®¡ç®—æœºç½‘ç»œ</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è½¬è½½<a href="https://juejin.im/post/5cd16ba251882541cc70cbf8" target="_blank" rel="noopener">ã€Šå›¾è§£HTTPã€‹æ ¸å¿ƒæ€»ç»“</a></p>
<h2 id="HTTPåè®®çš„ç®€ä»‹"><a href="#HTTPåè®®çš„ç®€ä»‹" class="headerlink" title="HTTPåè®®çš„ç®€ä»‹"></a>HTTPåè®®çš„ç®€ä»‹</h2><p><code>HTTP</code>æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡ï¼Œå±äº<code>TCP/IP</code>ä¸­çš„åº”ç”¨å±‚ã€‚</p>
<h2 id="HTTPåè®®çš„åŸºç¡€çŸ¥è¯†"><a href="#HTTPåè®®çš„åŸºç¡€çŸ¥è¯†" class="headerlink" title="HTTPåè®®çš„åŸºç¡€çŸ¥è¯†"></a>HTTPåè®®çš„åŸºç¡€çŸ¥è¯†</h2><h3 id="å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯"><a href="#å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯" class="headerlink" title="å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯"></a>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯</h3><p>å®¢æˆ·ç«¯æ˜¯æœåŠ¡è¯·æ±‚æ–¹ï¼ŒæœåŠ¡å™¨ç«¯æ˜¯æœåŠ¡æä¾›æ–¹ã€‚</p>
<h3 id="URIå’ŒURL"><a href="#URIå’ŒURL" class="headerlink" title="URIå’ŒURL"></a>URIå’ŒURL</h3><p>URI:URIæ˜¯ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼›</p>
<p>URL:æ˜¯ç»Ÿä¸€èµ„æºå®šä½å™¨;</p>
<blockquote>
<p>URIçš„æ ¼å¼(äº†è§£å³å¯)<br><br><code>[scheme:][//user:password@]host[:port][/path][?query][#fragment]</code><br><br>å¦‚ä¸Šæ˜¯URIçš„å…·ä½“æ ¼å¼ï¼Œä¸‹é¢ä»‹ç»å…¶æ„ä¹‰ï¼š</p>
<ul>
<li><code>scheme:</code>:æ˜¯åè®®æ–¹æ¡ˆï¼Œæ¯”å¦‚<code>http:</code>,<code>https:</code>,<code>file:</code>ç­‰,æ­¤é¡¹å¯é€‰å¯ä¸é€‰</li>
<li><code>[//[user:password@]</code>:æŒ‡å®šç”¨æˆ·åå’Œå¯†ç ä½œä¸ºä»æœåŠ¡å™¨è·å–èµ„æºæ—¶å¿…è¦çš„ç™»é™†ä¿¡æ¯ï¼Œæ­¤é¡¹æ˜¯å¯é€‰é¡¹</li>
<li><code>host</code>:æœåŠ¡å™¨åœ°å€ï¼Œä¾‹å¦‚<code>www.runoob.com</code></li>
<li><code>[:port]</code>ï¼šæœåŠ¡å™¨ç«¯å£å·,ä¾‹å¦‚ï¼š8080ï¼Œæ­¤é¡¹æ˜¯å¯é€‰é¡¹</li>
<li><code>[/path]</code>:æŒ‡å®šæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶è·¯å¾„æ¥å®šä½ç‰¹æŒ‡çš„èµ„æº</li>
<li><code>[?query]</code>:æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚<code>?id=123&amp;pas=123</code></li>
<li><code>[#fragment]</code>:ç‰‡æ®µæ ‡è¯†ç¬¦</li>
</ul>
</blockquote>
<h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><p>è§<a href="https://juejin.im/post/59c6201df265da064428b835" target="_blank" rel="noopener">DNSåŸºç¡€çŸ¥è¯†</a></p>
<h2 id="HTTPçš„ç‰¹ç‚¹"><a href="#HTTPçš„ç‰¹ç‚¹" class="headerlink" title="HTTPçš„ç‰¹ç‚¹"></a>HTTPçš„ç‰¹ç‚¹</h2><h3 id="HTTPé€šè¿‡è¯·æ±‚å’Œå“åº”æ¥è¾¾æˆé€šä¿¡"><a href="#HTTPé€šè¿‡è¯·æ±‚å’Œå“åº”æ¥è¾¾æˆé€šä¿¡" class="headerlink" title="HTTPé€šè¿‡è¯·æ±‚å’Œå“åº”æ¥è¾¾æˆé€šä¿¡"></a>HTTPé€šè¿‡è¯·æ±‚å’Œå“åº”æ¥è¾¾æˆé€šä¿¡</h3><p>å¦‚å›¾ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a920d85391f81d?w=784&amp;h=287&amp;f=jpeg&amp;s=28546" alt></p>
<h2 id="HTTP-æ˜¯æ— çŠ¶æ€åè®®"><a href="#HTTP-æ˜¯æ— çŠ¶æ€åè®®" class="headerlink" title="HTTP æ˜¯æ— çŠ¶æ€åè®®"></a>HTTP æ˜¯æ— çŠ¶æ€åè®®</h2><p>HTTP æ˜¯æ— çŠ¶æ€åè®®ï¼Œå®ƒä¸å¯¹ä¹‹å‰å‘ç”Ÿè¿‡çš„è¯·æ±‚å’Œå“åº”çš„çŠ¶æ€è¿›è¡Œç®¡ç†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— æ³•æ ¹æ®ä¹‹å‰çš„çŠ¶æ€è¿›è¡Œæœ¬æ¬¡çš„è¯·æ±‚å¤„ç†ã€‚</p>
<blockquote>
<p>å‡è®¾è¦æ±‚ç™»å½•è®¤è¯çš„ Web é¡µé¢æœ¬èº«æ— æ³•è¿›è¡ŒçŠ¶æ€çš„ç®¡ç†ï¼ˆä¸è®°å½•å·² ç™»å½•çš„çŠ¶æ€ï¼‰ï¼Œé‚£ä¹ˆæ¯æ¬¡è·³è½¬æ–°é¡µé¢ä¸æ˜¯è¦å†æ¬¡ç™»å½•ï¼Œå°±æ˜¯è¦åœ¨æ¯æ¬¡ è¯·æ±‚æŠ¥æ–‡ä¸­é™„åŠ å‚æ•°æ¥ç®¡ç†ç™»å½•çŠ¶æ€ã€‚</p>
</blockquote>
<p>HTTPä½¿ç”¨ Cookie çš„çŠ¶æ€ç®¡ç†ï¼ŒCookie æŠ€æœ¯é€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­å†™å…¥ Cookie ä¿¡ æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚</p>
<p><code>Cookie</code> ä¼šæ ¹æ®ä»æœåŠ¡å™¨ç«¯å‘é€çš„å“åº”æŠ¥æ–‡å†…çš„ä¸€ä¸ªå«åš <code>Set-Cookie</code> çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜<code>Cookie</code>ã€‚å½“ä¸‹æ¬¡å®¢æˆ·ç«¯å†å¾€è¯¥æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŠ å…¥ <code>Cookie</code> å€¼åå‘é€å‡º å»ã€‚æœåŠ¡å™¨ç«¯å‘ç°å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ <code>Cookie</code> åï¼Œä¼šå»æ£€æŸ¥ç©¶ç«Ÿæ˜¯ä»å“ªä¸€ ä¸ªå®¢æˆ·ç«¯å‘æ¥çš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå¯¹æ¯”æœåŠ¡å™¨ä¸Šçš„è®°å½•ï¼Œæœ€åå¾—åˆ°ä¹‹å‰ çš„çŠ¶æ€ä¿¡æ¯ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a920dec2814363?w=839&amp;h=486&amp;f=jpeg&amp;s=41430" alt></p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a920e216daa2c1?w=848&amp;h=408&amp;f=jpeg&amp;s=38171" alt></p>
<h2 id="HTTPæŠ¥æ–‡"><a href="#HTTPæŠ¥æ–‡" class="headerlink" title="HTTPæŠ¥æ–‡"></a>HTTPæŠ¥æ–‡</h2><p><code>HTTPæŠ¥æ–‡</code>æ˜¯HTTPè¯·æ±‚å’Œå“åº”çš„å•ä½ã€‚ç”¨äºè¯·æ±‚çš„æŠ¥æ–‡å«åš<code>è¯·æ±‚æŠ¥æ–‡</code>ï¼Œè€Œç”¨äºå“åº”çš„æŠ¥æ–‡å«åš<br><code>å“åº”æŠ¥æ–‡</code>ã€‚</p>
<h3 id="æŠ¥æ–‡çš„ç»“æ„å¦‚å›¾"><a href="#æŠ¥æ–‡çš„ç»“æ„å¦‚å›¾" class="headerlink" title="æŠ¥æ–‡çš„ç»“æ„å¦‚å›¾"></a>æŠ¥æ–‡çš„ç»“æ„å¦‚å›¾</h3><p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a920e93e0b67f3?w=780&amp;h=437&amp;f=jpeg&amp;s=42989" alt></p>
<blockquote>
<p>æŠ¥æ–‡ä¸»ä½“å’Œå®ä½“ä¸»ä½“çš„å·®å¼‚ : <br><br>å®ä½“ä½œä¸ºè¯·æ±‚æˆ–å“åº”çš„æœ‰æ•ˆè½½è·æ•°æ®ï¼ˆè¡¥å……é¡¹ï¼‰è¢«ä¼ è¾“ï¼Œå…¶å†…å®¹ç”±å®ä½“é¦–éƒ¨å’Œå®ä½“ä¸»ä½“ç»„æˆã€‚HTTP æŠ¥æ–‡çš„ä¸»ä½“ç”¨äºä¼ è¾“è¯·æ±‚æˆ–å“åº”çš„å®ä½“ä¸»ä½“ã€‚<br>é€šå¸¸ï¼ŒæŠ¥æ–‡ä¸»ä½“ç­‰äºå®ä½“ä¸»ä½“ã€‚åªæœ‰å½“ä¼ è¾“ä¸­è¿›è¡Œç¼–ç æ“ä½œæ—¶ï¼Œå®ä½“ ä¸»ä½“çš„å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œæ‰å¯¼è‡´å®ƒå’ŒæŠ¥æ–‡ä¸»ä½“äº§ç”Ÿå·®å¼‚</p>
</blockquote>
<h3 id="HTTPé¦–éƒ¨å­—æ®µçš„ç»“æ„"><a href="#HTTPé¦–éƒ¨å­—æ®µçš„ç»“æ„" class="headerlink" title="HTTPé¦–éƒ¨å­—æ®µçš„ç»“æ„"></a>HTTPé¦–éƒ¨å­—æ®µçš„ç»“æ„</h3><p><code>é¦–éƒ¨å­—æ®µå: å­—æ®µå€¼</code></p>
<p>å¦‚æœæœ‰å¤šä¸ªå€¼ï¼Œåˆ™<code>é¦–éƒ¨å­—æ®µå: å­—æ®µå€¼1, å­—æ®µå€¼2</code></p>
<blockquote>
<p>å¦‚æœHTTPé¦–éƒ¨å­—æ®µé‡å¤äº†ä¼šå¦‚ä½•ï¼Ÿ<br><br>å½“HTTPæŠ¥æ–‡é¦–éƒ¨ä¸­å‡ºç°ä¸­å‡ºç°äº†ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šå…·æœ‰ç›¸åŒé¦–éƒ¨å­—æ®µåæ—¶ä¼šæ€ä¹ˆæ ·ï¼Ÿè¿™ç§æƒ…å†µ<br>åœ¨è§„èŒƒä¸­å°šæœªæ˜ç¡®ï¼Œæ ¹æ®æµè§ˆå™¨å†…éƒ¨å¤„ç†é€»è¾‘çš„ä¸åŒï¼Œç»“æœå¯èƒ½å¹¶ä¸ä¸€è‡´ã€‚</p>
</blockquote>
<p>HTTPé¦–éƒ¨å­—æ®µåˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>é€šç”¨é¦–éƒ¨å­—æ®µï¼šè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ä¸¤æ–¹éƒ½ä¼šä½¿ç”¨çš„é¦–éƒ¨å­—æ®µ</li>
<li>è¯·æ±‚é¦–éƒ¨å­—æ®µï¼šä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚æŠ¥æ–‡æ—¶ä½¿ç”¨çš„é¦–éƒ¨ã€‚è¡¥å……äº†è¯·æ±‚çš„é™„åŠ å†…å®¹ã€å®¢æˆ·ç«¯ä¿¡æ¯ã€å“åº”å†…å®¹ç›¸å…³ä¼˜å…ˆçº§ç­‰ä¿¡æ¯ã€‚</li>
<li>å“åº”é¦–éƒ¨å­—æ®µï¼šä»æœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯è¿”å›å“åº”æŠ¥æ–‡æ—¶ä½¿ç”¨çš„é¦–éƒ¨ã€‚è¡¥å……äº†å“åº”çš„é™„åŠ å†…å®¹ï¼Œä¹Ÿä¼šä¸ºå®¢æˆ·ç«¯é™„åŠ é¢å¤–çš„å†…å®¹ä¿¡æ¯</li>
<li>å®ä½“é¦–éƒ¨å­—æ®µï¼šé’ˆå¯¹è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡çš„å®ä½“éƒ¨åˆ†ä½¿ç”¨çš„é¦–éƒ¨ã€‚è¡¥å……äº†èµ„æºå†…å®¹çš„æ›´æ–°æ—¶é—´ç­‰ä¸å®ä½“æœ‰å…³çš„ä¿¡æ¯</li>
</ul>
<h2 id="å®ä¾‹åˆ†æ"><a href="#å®ä¾‹åˆ†æ" class="headerlink" title="å®ä¾‹åˆ†æ"></a>å®ä¾‹åˆ†æ</h2><p>ç°åœ¨ä»¥è¯·æ±‚èœé¸Ÿæ•™ç¨‹çš„æŠ¥æ–‡ä¸ºä¾‹æ¥è¿›è¡Œåˆ†æï¼š</p>
<p>è¯·æ±‚æŠ¥æ–‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET /HTTP/<span class="number">1.1</span>        <span class="comment">//è¯·æ±‚è¡Œ</span></span><br><span class="line">Host: www.runoob.com</span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64; rv:<span class="number">66.0</span>) Gecko/<span class="number">20100101</span> Firefox/<span class="number">66.0</span></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,*<span class="comment">/*;q=0.8</span></span><br><span class="line"><span class="comment">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip, deflate, br</span></span><br><span class="line"><span class="comment">Referer: https://cn.bing.com/</span></span><br><span class="line"><span class="comment">Connection: keep-alive</span></span><br><span class="line"><span class="comment">Cookie: Hm_lvt_3eec0b7da6548cf07db3bc477ea905ee=1554627142,1556799533; _ga=GA1.2.579069872.1554627144; Hm_lpvt_3eec0b7da6548cf07db3bc477ea905ee=1556799533; _gid=GA1.2.1514513796.1556799533; _gat_gtag_UA_84264393_2=1</span></span><br><span class="line"><span class="comment">Upgrade-Insecure-Requests: 1 </span></span><br><span class="line"><span class="comment">Cache-Control: max-age=0</span></span><br></pre></td></tr></table></figure>
<p>å“åº”æŠ¥æ–‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK      <span class="comment">//çŠ¶æ€è¡Œ</span></span><br><span class="line">Server: Tengine</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Length: <span class="number">150124</span></span><br><span class="line">Connection: keep-alive</span><br><span class="line">Date: Thu, <span class="number">02</span> May <span class="number">2019</span> <span class="number">09</span>:<span class="number">27</span>:<span class="number">08</span> GMT</span><br><span class="line">Content-Encoding: gzip</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">X-M-Log: QNM:xs446;QNM3:<span class="number">1</span></span><br><span class="line">X-M-Reqid: jVAAADsHtCKO05oV</span><br><span class="line">X-Powered-By: HHVM/<span class="number">3.28</span>.1</span><br><span class="line">X-Qnm-Cache: Hit</span><br><span class="line">Ali-Swift-Global-Savetime: <span class="number">1556270140</span></span><br><span class="line">Via: cache16.l2cn1807[<span class="number">0</span>,<span class="number">200</span>-<span class="number">0</span>,H], cache37.l2cn1807[<span class="number">1</span>,<span class="number">0</span>], cache9.cn1066[<span class="number">0</span>,<span class="number">200</span>-<span class="number">0</span>,H], cache5.cn1066[<span class="number">1</span>,<span class="number">0</span>]</span><br><span class="line">Age: <span class="number">10328</span></span><br><span class="line">X-Cache: HIT TCP_MEM_HIT dirn:<span class="number">11</span>:<span class="number">466942761</span></span><br><span class="line">X-Swift-SaveTime: Thu, <span class="number">02</span> May <span class="number">2019</span> <span class="number">10</span>:<span class="number">36</span>:<span class="number">54</span> GMT</span><br><span class="line">X-Swift-CacheTime: <span class="number">86400</span></span><br><span class="line">Timing-Allow-Origin: *</span><br><span class="line">EagleId: db971b1915567995564074785e</span><br></pre></td></tr></table></figure>
<h3 id="è¯·æ±‚è¡Œå’ŒçŠ¶æ€è¡Œ"><a href="#è¯·æ±‚è¡Œå’ŒçŠ¶æ€è¡Œ" class="headerlink" title="è¯·æ±‚è¡Œå’ŒçŠ¶æ€è¡Œ"></a>è¯·æ±‚è¡Œå’ŒçŠ¶æ€è¡Œ</h3><blockquote>
<p>è¯·æ±‚è¡Œï¼šè¯·æ±‚è¡Œä¸­åŒ…å«ç”¨äºè¯·æ±‚çš„æ–¹æ³•ï¼Œè¯·æ±‚çš„URIå’ŒHTTPç‰ˆæœ¬<br><br>çŠ¶æ€è¡Œï¼šçŠ¶æ€è¡ŒåŒ…å«å“åº”ç»“æœçš„çŠ¶æ€ç ï¼ŒåŸå› çŸ­è¯­å’ŒHTTPç‰ˆæœ¬</p>
</blockquote>
<p>åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­<code>GET /HTTP/1.1</code>æ˜¯è¯·æ±‚è¡Œï¼Œå…¶ä¸­<code>GET</code>ä»£è¡¨è¯·æ±‚çš„æ–¹æ³•ï¼Œ<code>/HTTP/1.1</code>ä»£è¡¨HTTPç‰ˆæœ¬ï¼Œåœ¨è¿™ä¸ªè¯·æ±‚ä¸­æœªå‡ºç°è¯·æ±‚çš„<code>URI</code>ã€‚</p>
<p>åœ¨å“åº”æŠ¥æ–‡ä¸­<code>HTTP/1.1 200 OK</code>æ˜¯çŠ¶æ€è¡Œï¼Œå…¶ä¸­<code>HTTP/1.1</code>æ˜¯è¯·æ±‚çš„ç‰ˆæœ¬ï¼Œ<code>200</code>æ˜¯å“åº”ç»“æœçš„çŠ¶æ€ç ï¼Œè€Œ<code>OK</code><br>åˆ™æ˜¯åŸå› çŸ­è¯­ã€‚</p>
<h3 id="è¯·æ±‚çš„æ–¹æ³•"><a href="#è¯·æ±‚çš„æ–¹æ³•" class="headerlink" title="è¯·æ±‚çš„æ–¹æ³•"></a>è¯·æ±‚çš„æ–¹æ³•</h3><p>GETï¼šGETæ–¹æ³•ç”¨æ¥è®¿é—®ä»¥è¢«URIè¯†åˆ«çš„èµ„æºã€‚æŒ‡å®šçš„èµ„æºç»æœåŠ¡å™¨è§£æåè¿”å›å“åº”çš„å†…å®¹ã€‚å¦‚ä¸‹å›¾</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a920f051089f47?w=643&amp;h=257&amp;f=jpeg&amp;s=14320" alt></p>
<p>POST: POSTæ–¹æ³•ç”¨æ¥ä¼ è¾“å®ä½“çš„ä¸»ä½“ã€‚å¦‚ä¸‹å›¾</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a920f376c74a87?w=643&amp;h=254&amp;f=jpeg&amp;s=14297" alt></p>
<p>å…¶ä»–æ–¹æ³•å¦‚<code>PUT HEAD DELETE OPTIONS TRACE CONNECT</code>ä¸€èˆ¬ä¸ä½¿ç”¨ã€‚ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ä½œç”¨</th>
<th>ä¸ä½¿ç”¨çš„åŸå› </th>
</tr>
</thead>
<tbody>
<tr>
<td>PUT</td>
<td>ç”¨æ¥ä¼ è¾“æ–‡ä»¶</td>
<td>PUTæ–¹æ³•ä¸é‡‡ç”¨ä»»ä½•éªŒè¯æœºåˆ¶ï¼Œå­˜åœ¨å®‰å…¨é—®é¢˜</td>
</tr>
<tr>
<td>HEAD</td>
<td>å’ŒGETæ–¹æ³•ä¸€æ ·ï¼Œä¸è¿‡åªè¿”å›å“åº”é¦–éƒ¨</td>
<td>â€”</td>
</tr>
<tr>
<td>DELETE</td>
<td>ç”¨æ¥åˆ é™¤æ–‡ä»¶</td>
<td>DELETEä¸é‡‡ç”¨ä»»ä½•éªŒè¯æœºåˆ¶ï¼Œå­˜åœ¨å®‰å…¨é—®é¢˜</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>æŸ¥è¯¢é’ˆå¯¹è¯·æ±‚URIæŒ‡å®šçš„èµ„æºæ”¯æŒçš„æ–¹æ³•</td>
<td>â€”-</td>
</tr>
<tr>
<td>TRACE</td>
<td>è®©WEBæœåŠ¡å™¨ç«¯å°†ä¹‹å‰çš„è¯·æ±‚é€šä¿¡è¿”å›ç»™å®¢æˆ·ç«¯</td>
<td>å®¹æ˜“å¼•å‘è·¨ç«™è¿½è¸ªï¼ˆXSTï¼‰æ”»å‡»</td>
</tr>
<tr>
<td>CONNECT</td>
<td>è¦æ±‚åœ¨ä¸ä»£ç†æœåŠ¡å™¨é€šä¿¡æ—¶å»ºç«‹éš§é“ï¼Œå®ç°ç”¨éš§é“åè®®è¿›è¡ŒTCPé€šä¿¡</td>
<td>â€”-</td>
</tr>
</tbody>
</table>
<h3 id="çŠ¶æ€ç "><a href="#çŠ¶æ€ç " class="headerlink" title="çŠ¶æ€ç "></a>çŠ¶æ€ç </h3><p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a9214d497ab1f3?w=723&amp;h=283&amp;f=jpeg&amp;s=43917" alt></p>
<h4 id="2XX"><a href="#2XX" class="headerlink" title="2XX"></a>2XX</h4><h5 id="200-ok"><a href="#200-ok" class="headerlink" title="200 ok"></a>200 ok</h5><p>è¡¨ç¤ºä»å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚åœ¨æœåŠ¡å™¨ç«¯è¢«æ­£å¸¸å¤„ç†äº†</p>
<h5 id="204-Not-Content"><a href="#204-Not-Content" class="headerlink" title="204 Not Content"></a>204 Not Content</h5><p>è¯¥çŠ¶æ€ç ä»£è¡¨æœåŠ¡å™¨æ¥æ”¶çš„è¯·æ±‚å·²ç»è¢«æˆåŠŸå¤„ç†ï¼Œä½†æ˜¯è¿”å›çš„å“åº”æŠ¥æ–‡ä¸­ä¸åŒ…å«å®ä½“çš„ä¸»ä½“éƒ¨åˆ†</p>
<h5 id="206-Partial-Content"><a href="#206-Partial-Content" class="headerlink" title="206 Partial Content"></a>206 Partial Content</h5><p>è¯¥çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ï¼Œè€ŒæœåŠ¡å™¨æˆåŠŸæ‰§è¡Œäº†è¿™éƒ¨åˆ†çš„GETè¯·æ±‚</p>
<h4 id="3XX"><a href="#3XX" class="headerlink" title="3XX"></a>3XX</h4><h5 id="301-Moved-Permanently"><a href="#301-Moved-Permanently" class="headerlink" title="301 Moved Permanently"></a>301 Moved Permanently</h5><p>æ°¸ä¹…æ€§é‡å®šå‘ï¼Œè¯¥çŠ¶æ€ç è¡¨ç¤ºè¯·æ±‚çš„èµ„æºå·²è¢«åˆ†é…åˆ°æ–°çš„URIï¼Œä»¥ååº”è¯¥<br>ä½¿ç”¨ç°åœ¨æ‰€æŒ‡çš„URIã€‚</p>
<h5 id="302-Found"><a href="#302-Found" class="headerlink" title="302 Found"></a>302 Found</h5><p>ä¸´æ—¶é‡å®šå‘ã€‚è¯¥çŠ¶æ€ç è¡¨æ˜è¯·æ±‚çš„èµ„æºå·²è¢«åˆ†é…äº†æ–°çš„URIï¼Œå¸Œæœ›ç”¨æˆ·æœ¬æ¬¡èƒ½ä½¿ç”¨æ–°çš„URIè®¿é—®ã€‚</p>
<h5 id="303-See-Other"><a href="#303-See-Other" class="headerlink" title="303 See Other"></a>303 See Other</h5><p>è¯¥çŠ¶æ€ç è¡¨ç¤ºç”±äºè¯·æ±‚èµ„æºå­˜åœ¨å¦ä¸€ä¸ªURIï¼Œåº”è¯¥ä½¿ç”¨GETæ–¹æ³•å®šå‘è·å–è¯·æ±‚çš„èµ„æº</p>
<h5 id="304-Not-Modified"><a href="#304-Not-Modified" class="headerlink" title="304 Not Modified"></a>304 Not Modified</h5><p>è¯¥çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯å‘é€é™„å¸¦æ¡ä»¶è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç«¯å…è®¸è¯·æ±‚è®¿é—®èµ„æºï¼Œä½†å› ä¸ºè¯·æ±‚æœªæ»¡è¶³æ¡ä»¶çš„æƒ…å†µåï¼Œ<br>ç›´æ¥è¿”å›304.</p>
<h5 id="307-Temporary-Redirect"><a href="#307-Temporary-Redirect" class="headerlink" title="307 Temporary Redirect"></a>307 Temporary Redirect</h5><p>ä¸´æ—¶é‡å®šå‘ï¼Œå’Œ302ç›¸ä¼¼ã€‚ä½†æ˜¯307ä¸ä¼šä»Postå˜æˆGET</p>
<h4 id="4XX"><a href="#4XX" class="headerlink" title="4XX"></a>4XX</h4><h5 id="400-Bad-Request"><a href="#400-Bad-Request" class="headerlink" title="400 Bad Request"></a>400 Bad Request</h5><p>è¯¥çŠ¶æ€ç è¡¨ç¤ºè¯·æ±‚æŠ¥æ–‡ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚å½“é”™è¯¯å‘ç”Ÿæ—¶ï¼Œéœ€è¦ä¿®æ”¹è¯·æ±‚çš„å†…å®¹åå†æ¬¡å‘é€è¯·æ±‚</p>
<h5 id="401-Unauthorized"><a href="#401-Unauthorized" class="headerlink" title="401 Unauthorized"></a>401 Unauthorized</h5><p>è¯¥çŠ¶æ€ç è¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦é€šè¿‡HTTPè®¤è¯çš„è®¤è¯ä¿¡æ¯ã€‚å¦å¤–è‹¥ä¹‹å‰å·²ç»è¿›è¡Œè¿‡ä¸€æ¬¡è¯·æ±‚ï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·è®¤è¯å¤±è´¥</p>
<h5 id="403-Forbidden"><a href="#403-Forbidden" class="headerlink" title="403 Forbidden"></a>403 Forbidden</h5><p>è¯¥çŠ¶æ€ç è¡¨æ˜å¯¹è¯·æ±‚èµ„æºçš„è®¿é—®è¢«æœåŠ¡å™¨æ‹’ç»äº†</p>
<h5 id="404-Not-Found"><a href="#404-Not-Found" class="headerlink" title="404 Not Found"></a>404 Not Found</h5><p>è¯¥çŠ¶æ€ç è¡¨æ˜æœåŠ¡å™¨ä¸Šæ— æ³•æ‰¾åˆ°è¯·æ±‚çš„èµ„æº</p>
<h4 id="5XX"><a href="#5XX" class="headerlink" title="5XX"></a>5XX</h4><h5 id="500-Internal-Server-Error"><a href="#500-Internal-Server-Error" class="headerlink" title="500 Internal Server Error"></a>500 Internal Server Error</h5><p>è¯¥ä¸»é¢˜ç è¡¨ç¤ºæœåŠ¡å™¨åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯</p>
<h5 id="503-Service-Unavailable"><a href="#503-Service-Unavailable" class="headerlink" title="503 Service Unavailable"></a>503 Service Unavailable</h5><p>è¯¥çŠ¶æ€ç è¡¨æ˜æœåŠ¡å™¨æš‚æ—¶å¤„äºè¶…è´Ÿè½½æˆ–æ­£åœ¨è¿›è¡Œåœæœºç»´æŠ¤ï¼Œç°åœ¨æ— æ³•å¤„ç†è¯·æ±‚ã€‚</p>
<h3 id="HTTPæ‰€æœ‰çš„é¦–éƒ¨å­—æ®µ"><a href="#HTTPæ‰€æœ‰çš„é¦–éƒ¨å­—æ®µ" class="headerlink" title="HTTPæ‰€æœ‰çš„é¦–éƒ¨å­—æ®µ"></a>HTTPæ‰€æœ‰çš„é¦–éƒ¨å­—æ®µ</h3><p>HTTP/1.1å®šä¹‰äº†å¦‚ä¸‹47ç§é¦–éƒ¨åœ°æ®µï¼Œå¦‚ä¸‹</p>
<p>é€šç”¨é¦–éƒ¨å­—æ®µï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a920fd0d3d332e?w=655&amp;h=427&amp;f=jpeg&amp;s=44705" alt></p>
<p>è¯·æ±‚é¦–éƒ¨å­—æ®µï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a920ff9aa1a9f9?w=608&amp;h=728&amp;f=jpeg&amp;s=101123" alt></p>
<p>å“åº”é¦–éƒ¨å­—æ®µï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a9210213d28f19?w=709&amp;h=450&amp;f=jpeg&amp;s=53018" alt></p>
<p>å®ä½“é¦–éƒ¨å­—æ®µï¼š </p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a92106a075a602?w=655&amp;h=455&amp;f=jpeg&amp;s=56957" alt></p>
<p>éHTTP/1.1é¦–éƒ¨å­—æ®µï¼ˆä¸å±äº47ç§ä¸­çš„å­—æ®µï¼‰:<code>Cookie</code>ã€ <code>Set-Cookie</code>ã€ <code>Content-Disposition</code>ç­‰ã€‚</p>
<h3 id="ç«¯åˆ°ç«¯é¦–éƒ¨å’Œé€è·³é¦–éƒ¨"><a href="#ç«¯åˆ°ç«¯é¦–éƒ¨å’Œé€è·³é¦–éƒ¨" class="headerlink" title="ç«¯åˆ°ç«¯é¦–éƒ¨å’Œé€è·³é¦–éƒ¨"></a>ç«¯åˆ°ç«¯é¦–éƒ¨å’Œé€è·³é¦–éƒ¨</h3><p>HTTPå°†ä½¿ç”¨ <code>ç¼“å­˜ä»£ç†</code>å’Œ<code>éç¼“å­˜ä»£ç†</code> çš„é¦–éƒ¨å­—æ®µåˆ†æˆä¸¤ç§ç±»å‹ï¼šç«¯åˆ°ç«¯é¦–éƒ¨ï¼ˆEnd-to-end Headerï¼‰ã€é€è·³é¦–éƒ¨(Hop-by-hop Header)</p>
<blockquote>
<p>ç¼“å­˜ä»£ç†<br><br>ä»£ç†è½¬å‘å“åº”æ—¶ï¼Œç¼“å­˜ä»£ç†ï¼ˆCaching Proxyï¼‰ä¼šé¢„å…ˆå°†èµ„æºçš„å‰¯æœ¬ ï¼ˆç¼“å­˜ï¼‰ä¿å­˜åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šã€‚<br>å½“ä»£ç†å†æ¬¡æ¥æ”¶åˆ°å¯¹ç›¸åŒèµ„æºçš„è¯·æ±‚æ—¶ï¼Œå°±å¯ä»¥ä¸ä»æºæœåŠ¡å™¨é‚£é‡Œè· å–èµ„æºï¼Œè€Œæ˜¯å°†ä¹‹å‰ç¼“å­˜çš„èµ„æºä½œä¸ºå“åº”è¿”å›ã€‚<br><br>é€æ˜ä»£ç†<br><br>è½¬å‘è¯·æ±‚æˆ–å“åº”æ—¶ï¼Œä¸å¯¹æŠ¥æ–‡åšä»»ä½•åŠ å·¥çš„ä»£ç†ç±»å‹è¢«ç§°ä¸ºé€æ˜ä»£ç† ï¼ˆTransparent Proxyï¼‰ã€‚åä¹‹ï¼Œå¯¹æŠ¥æ–‡å†…å®¹è¿›è¡ŒåŠ å·¥çš„ä»£ç†è¢«ç§°ä¸ºé é€æ˜ä»£ç†ã€‚<br><br></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ³¨æ„ï¼šè¿™é‡Œçš„éç¼“å­˜ä»£ç†ä¸ç­‰äºé€æ˜ä»£ç†ï¼›å®ƒä»¬åˆ’åˆ†çš„æ ‡å‡†ä¸ä¸€æ ·ã€‚`ç¼“å­˜ä»£ç†`å’Œ`éç¼“å­˜ä»£ç†`æ˜¯é€šè¿‡æ˜¯å¦ä½¿ç”¨ç¼“å­˜æ¥åˆ’åˆ†çš„ï¼›è€Œ`é€æ˜ä»£ç†`å’Œ`éé€æ˜ä»£ç†`æ˜¯é€šè¿‡æ˜¯å¦ä¼šä¿®æ”¹æŠ¥æ–‡æ¥åˆ’åˆ†ã€‚</span><br></pre></td></tr></table></figure>
<p>ç«¯åˆ°ç«¯é¦–éƒ¨ï¼šåˆ†åœ¨æ­¤ç±»åˆ«ä¸­çš„é¦–éƒ¨ä¼šè½¬å‘ç»™è¯·æ±‚/å“åº”å¯¹åº”çš„æœ€ç»ˆæ¥æ”¶ç›®æ ‡(å³<strong>å…¨ç¨‹æœ‰æ•ˆ</strong>)ï¼Œä¸”å¿…é¡»ä¿å­˜åœ¨ç”±ç¼“å­˜ç”Ÿæˆçš„å“åº”ä¸­ï¼Œå¦å¤–è§„å®šå®ƒå¿…é¡»è¢«è½¬å‘</p>
<p>é€è·³é¦–éƒ¨ï¼šåˆ†åœ¨æ­¤ç±»åˆ«çš„é¦–éƒ¨åªå¯¹<strong>å•æ¬¡è½¬å‘æœ‰æ•ˆ</strong>ï¼Œä¼šå› ä¸ºé€šè¿‡ç¼“å­˜æˆ–ä»£ç†è€Œä¸å†è½¬å‘ã€‚åœ¨HTTP/1.1å’Œä»¥åç‰ˆæœ¬ä¸­ï¼Œå¦‚æœè¦ä½¿ç”¨é€è·³é¦–éƒ¨ï¼Œéœ€è¦é€šè¿‡Connectioné¦–éƒ¨å­—æ®µ</p>
<p>é€è·³é¦–éƒ¨å­—æ®µä¸ºï¼š</p>
<ul>
<li>Connection </li>
<li>Keep-Alive(æ–°å¢å­—æ®µï¼Œå¯å¿½ç•¥) </li>
<li>Proxy-Authenticate </li>
<li>Proxy-Authorization </li>
<li>Trailer </li>
<li>TE </li>
<li>Transfer-Encoding </li>
<li>Upgrade</li>
</ul>
<p>å…¶ä»–å­—æ®µéƒ½ä¸ºç«¯åˆ°ç«¯é¦–éƒ¨</p>
<h3 id="é€šç”¨é¦–éƒ¨å­—æ®µ"><a href="#é€šç”¨é¦–éƒ¨å­—æ®µ" class="headerlink" title="é€šç”¨é¦–éƒ¨å­—æ®µ"></a>é€šç”¨é¦–éƒ¨å­—æ®µ</h3><p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a920fd0d3d332e?w=655&amp;h=427&amp;f=jpeg&amp;s=44705" alt></p>
<p>åœ¨å®ä¾‹çš„è¯·æ±‚æŠ¥æ–‡ä¸­å‡ºç°çš„é€šç”¨é¦–éƒ¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Connection: keep-alive</span><br><span class="line">Cache-Control: max-age=<span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å®ä¾‹çš„å“åº”æŠ¥æ–‡ä¸­å‡ºç°çš„é€šç”¨é¦–éƒ¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Connection: keep-alive</span><br><span class="line">Date: Thu, <span class="number">02</span> May <span class="number">2019</span> <span class="number">09</span>:<span class="number">27</span>:<span class="number">08</span> GMT</span><br><span class="line">Via: cache16.l2cn1807[<span class="number">0</span>,<span class="number">200</span>-<span class="number">0</span>,H], cache37.l2cn1807[<span class="number">1</span>,<span class="number">0</span>], cache9.cn1066[<span class="number">0</span>,<span class="number">200</span>-<span class="number">0</span>,H], cache5.cn1066[<span class="number">1</span>,<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<h4 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h4><p>é€šè¿‡æŒ‡å®šé¦–éƒ¨å­—æ®µCathe-Controlçš„æŒ‡ä»¤ï¼Œå°±å¯ä»¥æ“ä½œç¼“å­˜çš„å·¥ä½œæœºåˆ¶ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a9212af6e3f579" alt></p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a921303299bde9?w=781&amp;h=470&amp;f=jpeg&amp;s=73135" alt></p>
<p>è¯·æ±‚æŠ¥æ–‡ä¸­<code>Cache-Control: max-age=0</code>è¡¨ç¤ºç¼“å­˜æœåŠ¡å™¨é€šå¸¸éœ€è¦å°†è¯·æ±‚è½¬å‘ç»™æºæœåŠ¡å™¨ã€‚</p>
<h4 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h4><p><code>Connection</code>çš„ä½œç”¨ï¼š</p>
<ol>
<li>æ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µ</li>
<li>ç®¡ç†æŒä¹…åŒ–è¿æ¥</li>
</ol>
<h5 id="æ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µ"><a href="#æ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µ" class="headerlink" title="æ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µ"></a>æ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µ</h5><p><img src="https://user-gold-cdn.xitu.io/2019/5/8/16a96bf3f0296e25?w=720&amp;h=315&amp;f=jpeg&amp;s=38966" alt></p>
<blockquote>
<p>ä»£ç†æœåŠ¡å™¨çš„åŸºæœ¬è¡Œä¸ºå°±æ˜¯æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚åè½¬å‘ç»™å…¶ä»–æœåŠ¡å™¨ã€‚ä»£ç†ä¸æ”¹å˜è¯·æ±‚ URIï¼Œä¼šç›´æ¥å‘é€ç»™å‰æ–¹æŒæœ‰èµ„æºçš„ç›®æ ‡æœåŠ¡å™¨ã€‚ä¸Šé¢ä»‹ç»çš„ç¼“å­˜ä»£ç†æ˜¯ä»£ç†æœåŠ¡å™¨ä½œç”¨çš„ä¸€ç§ã€‚</p>
</blockquote>
<h5 id="ç®¡ç†æŒä¹…åŒ–è¿æ¥"><a href="#ç®¡ç†æŒä¹…åŒ–è¿æ¥" class="headerlink" title="ç®¡ç†æŒä¹…åŒ–è¿æ¥"></a>ç®¡ç†æŒä¹…åŒ–è¿æ¥</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Connection: close <span class="comment">//è¡¨æ˜æœåŠ¡å™¨æƒ³æ–­å¼€è¿æ¥</span></span><br><span class="line">Connection: Keep-Alive <span class="comment">//ä¿æŒæŒä¹…åŒ–è¿æ¥ï¼ˆé»˜è®¤ï¼‰</span></span><br></pre></td></tr></table></figure>
<h4 id="Via"><a href="#Via" class="headerlink" title="Via"></a>Via</h4><p>ç”¨æ¥è¿½è¸ªå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯ä¹‹é—´çš„è¯·æ±‚å’Œå“åº”æŠ¥æ–‡çš„ä¼ è¾“è·¯å¾„ã€‚<br><br>å¦‚<code>Via: cache16.l2cn1807[0,200-0,H], cache37.l2cn1807[1,0], cache9.cn1066[0,200-0,H], cache5.cn1066[1,0]</code></p>
<h4 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h4><p>é¦–éƒ¨å­—æ®µDateè¡¨æ˜åˆ›å»ºHTTPæŠ¥æ–‡çš„æ—¶é—´ï¼Œå¦‚<code>Date: Thu, 02 May 2019 09:27:08 GMT</code>å°±è¡¨ç¤ºåˆ›å»ºæŠ¥æ–‡çš„æ—¶é—´ä¸º2019å¹´5æœˆ2æ—¥ï¼Œæ˜ŸæœŸäºŒã€‚</p>
<h4 id="Pragma"><a href="#Pragma" class="headerlink" title="Pragma"></a>Pragma</h4><p>Pragmaæ˜¯å†å²é—ç•™å­—æ®µï¼Œä»…ä½œä¸ºä¸HTTP/1.0çš„å‘åå…¼å®¹è€Œå®šä¹‰ã€‚</p>
<h4 id="Trailer"><a href="#Trailer" class="headerlink" title="Trailer"></a>Trailer</h4><p>ç”¨æ¥è¯´æ˜åœ¨æŠ¥æ–‡ä¸»ä½“åè®°å½•äº†å“ªäº›é¦–éƒ¨å­—æ®µ</p>
<h4 id="Transfer-Encoding"><a href="#Transfer-Encoding" class="headerlink" title="Transfer-Encoding"></a>Transfer-Encoding</h4><p>è§„å®šä¼ è¾“æŠ¥æ–‡ä¸»ä½“æ—¶é‡‡ç”¨çš„ç¼–ç æ–¹å¼ï¼ˆä»…å¯¹åˆ†å—ä¼ è¾“ç¼–ç æœ‰æ•ˆï¼‰</p>
<h4 id="Upgrade"><a href="#Upgrade" class="headerlink" title="Upgrade"></a>Upgrade</h4><p>ç”¨æ¥æ£€æµ‹HTTPåè®®åŠå…¶ä»–åè®®æ˜¯å¦å¯ä½¿ç”¨æ›´é«˜çš„ç‰ˆæœ¬è¿›è¡Œé€šä¿¡ã€‚</p>
<h4 id="Warning"><a href="#Warning" class="headerlink" title="Warning"></a>Warning</h4><p>å‘Šè¯‰ç”¨æˆ·ä¸€äº›ä¸ç¼“å­˜æœ‰å…³çš„é—®é¢˜çš„è­¦å‘Š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a92138ef2c4d6e?w=763&amp;h=116&amp;f=jpeg&amp;s=18452" alt></p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a9213b90e5293a?w=759&amp;h=451&amp;f=jpeg&amp;s=75608" alt></p>
<h3 id="è¯·æ±‚é¦–éƒ¨å­—æ®µ"><a href="#è¯·æ±‚é¦–éƒ¨å­—æ®µ" class="headerlink" title="è¯·æ±‚é¦–éƒ¨å­—æ®µ"></a>è¯·æ±‚é¦–éƒ¨å­—æ®µ</h3><p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a920ff9aa1a9f9?w=608&amp;h=728&amp;f=jpeg&amp;s=101123" alt></p>
<p>è¯·æ±‚æŠ¥æ–‡ï¼ˆå»é™¤äº†é€šç”¨é¦–éƒ¨å­—æ®µï¼‰</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Host: www.runoob.com</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:66.0) Gecko/20100101 Firefox/66.0</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Referer: https://cn.bing.com/</span><br><span class="line">Cookie: Hm_lvt_3eec0b7da6548cf07db3bc477ea905ee=1554627142,1556799533; _ga=GA1.2.579069872.1554627144; Hm_lpvt_3eec0b7da6548cf07db3bc477ea905ee=1556799533; _gid=GA1.2.1514513796.1556799533; _gat_gtag_UA_84264393_2=1</span><br><span class="line">Upgrade-Insecure-Requests: 1 </span><br><span class="line">Cache-Control: max-age=0</span><br></pre></td></tr></table></figure>
<h4 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h4><p>å‘Šè¯‰æœåŠ¡å™¨è¯·æ±‚çš„èµ„æºæ‰€å¤„çš„äº’è”ç½‘ä¸»æœºåå’Œç«¯å£å·ï¼Œå¦‚<code>Host: www.runoob.com</code>ã€‚<em>Hostæ˜¯å”¯ä¸€å¿…é¡»åŒ…å«åœ¨è¯·æ±‚å†…çš„é¦–éƒ¨å­—æ®µ</em></p>
<h4 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User-Agent"></a>User-Agent</h4><p>ç”¨æ¥å°†åˆ›å»ºè¯·æ±‚çš„æµè§ˆå™¨å’Œç”¨æˆ·ä»£ç†åç§°ç­‰ä¿¡æ¯ä¼ è¾¾ç»™æœåŠ¡å™¨ã€‚</p>
<p>ä¾‹å¦‚ä¸Šé¢çš„è¯·æ±‚é¦–éƒ¨:<br><br><code>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:66.0) Gecko/20100101 Firefox/66.0</code></p>
<h4 id="Accept"><a href="#Accept" class="headerlink" title="Accept"></a>Accept</h4><p>é€šçŸ¥æœåŠ¡å™¨å¯ä»¥å¤„ç†çš„åª’ä½“ç±»å‹åŠåª’ä½“ç±»å‹çš„ç›¸å¯¹ä¼˜å…ˆçº§</p>
<p>ä¾‹å¦‚<code>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</code></p>
<h5 id="åª’ä½“ç±»å‹"><a href="#åª’ä½“ç±»å‹" class="headerlink" title="åª’ä½“ç±»å‹"></a>åª’ä½“ç±»å‹</h5><p>æ–‡æœ¬æ–‡ä»¶</p>
<p>text/html, text/plain, text/css â€¦<br>application/xhtml+xml, application/xml â€¦</p>
<p>å›¾ç‰‡æ–‡ä»¶</p>
<p>image/jpeg, image/gif, image/png â€¦</p>
<p>è§†é¢‘æ–‡ä»¶</p>
<p>video/mpeg, video/quicktime â€¦</p>
<p>åº”ç”¨ç¨‹åºä½¿ç”¨çš„äºŒè¿›åˆ¶æ–‡ä»¶</p>
<p>application/octet-stream, application/zip</p>
<h5 id="ä¼˜å…ˆçº§"><a href="#ä¼˜å…ˆçº§" class="headerlink" title="ä¼˜å…ˆçº§"></a>ä¼˜å…ˆçº§</h5><p>ä½¿ç”¨<code>q=</code>æ¥é¢å¤–è¡¨ç¤ºæƒé‡å€¼ï¼Œç”¨<code>;</code>è¿›è¡Œåˆ†éš”ã€‚æƒé‡å€¼çš„èŒƒå›´æ˜¯0~1ï¼ˆå¯ç²¾ç¡®åˆ°å°æ•°ç‚¹å3ä½ï¼‰ï¼Œä¸”1ä¸ºæœ€å¤§å€¼ã€‚ä¸æŒ‡å®š<br>æƒé‡å€¼æ—¶ï¼Œé»˜è®¤æƒé‡ä¸ºq=1.0.å½“æœåŠ¡å™¨æä¾›å¤šä¸ªå†…å®¹æ—¶ä¼šé¦–å…ˆè¿”å›æƒé‡å€¼æœ€é«˜çš„åª’ä½“ç±»å‹ã€‚</p>
<h4 id="Accept-Charset"><a href="#Accept-Charset" class="headerlink" title="Accept-Charset"></a>Accept-Charset</h4><p><code>Accept-Charset</code>é¦–éƒ¨å­—æ®µå¯ç”¨æ¥é€šçŸ¥æœåŠ¡å™¨ç”¨æˆ·ä»£ç†æ”¯æŒçš„å­—ç¬¦é›†åŠå­—ç¬¦é›†çš„ç›¸å¯¹ä¼˜å…ˆé¡ºåºã€‚å¦å¤–å¯ä¸€æ¬¡æ€§æŒ‡å®šå¤šç§å­—ç¬¦é›†ã€‚ä¸é¦–éƒ¨å­—æ®µ<br><code>Accept</code>ç›¸åŒçš„å¯ç”¨æƒé‡qå€¼æ¥è¡¨ç¤ºç›¸å¯¹ä¼˜å…ˆçº§</p>
<h4 id="Accept-Encoding"><a href="#Accept-Encoding" class="headerlink" title="Accept-Encoding"></a>Accept-Encoding</h4><p>Accept-Encodingé¦–éƒ¨å­—æ®µç”¨æ¥å‘ŠçŸ¥æœåŠ¡å™¨ç”¨æˆ·ä»£ç†æ”¯æŒçš„å†…å®¹ç¼–ç åŠå†…å®¹ç¼–ç çš„ä¼˜å…ˆçº§é¡ºåºã€‚å¯ä¸€æ¬¡æ€§æŒ‡å®šå¤šç§å†…å®¹ç¼–ç ï¼Œå¯ç”¨æƒé‡qæ¥æŒ‡å®šä¼˜å…ˆçº§<br>ä¾‹å¦‚<code>Accept-Encoding: gzip, deflate, br</code></p>
<h4 id="Accept-Language"><a href="#Accept-Language" class="headerlink" title="Accept-Language"></a>Accept-Language</h4><p>é¦–éƒ¨å­—æ®µAccept-Languageç”¨æ¥å‘Šè¯‰æœåŠ¡å™¨ç”¨æˆ·ä»£ç†èƒ½å¤Ÿå¤„ç†çš„è¯­è¨€ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªè¯­è¨€ï¼Œå¯ä»¥ä½¿ç”¨qæ¥å†³å®šä¼˜å…ˆçº§ã€‚<br>ä¾‹å¦‚<code>Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</code></p>
<h4 id="Authorization"><a href="#Authorization" class="headerlink" title="Authorization"></a>Authorization</h4><p>ç”¨æ¥å‘Šè¯‰æœåŠ¡å™¨ï¼Œç”¨æˆ·ä»£ç†çš„è®¤è¯ä¿¡æ¯</p>
<h4 id="Expect"><a href="#Expect" class="headerlink" title="Expect"></a>Expect</h4><p>å‘ŠçŸ¥æœåŠ¡å™¨æœŸæœ›å‡ºç°æŸç§ç‰¹å®šçš„è¡Œä¸º</p>
<h4 id="From"><a href="#From" class="headerlink" title="From"></a>From</h4><p>å‘Šè¯‰æœåŠ¡å™¨ä½¿ç”¨ç”¨æˆ·ä»£ç†çš„ç”¨æˆ·çš„ç”µå­é‚®ç®±åœ°å€</p>
<h4 id="If-Match"><a href="#If-Match" class="headerlink" title="If-Match"></a>If-Match</h4><p>å‘Šè¯‰æœåŠ¡å™¨åŒ¹é…èµ„æºæ‰€ç”¨çš„å®ä½“æ ‡è®°ï¼ˆETagï¼‰å€¼ï¼ŒæœåŠ¡å™¨ä¼šå¯¹æ¯”If-Matchçš„å­—æ®µå€¼å’Œèµ„æºçš„ETagå€¼ï¼Œä»…<br>å½“ä¸¤è€…ä¸€è‡´æ—¶æ‰æ‰§è¡Œè¯·æ±‚.åä¹‹åˆ™è¿”å›çŠ¶ç 412</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a92141eb9e0c68?w=770&amp;h=665&amp;f=jpeg&amp;s=57956" alt></p>
<h4 id="If-Modified-Since"><a href="#If-Modified-Since" class="headerlink" title="If-Modified-Since"></a>If-Modified-Since</h4><p>å‘Šè¯‰æœåŠ¡å™¨è‹¥If-Modified-Sinceå­—æ®µå€¼æ—©äºèµ„æºæ›´æ–°çš„æ—¶é—´ï¼Œåˆ™å¸Œæœ›èƒ½å¤„ç†è¯¥è¯·æ±‚ã€‚<br>åä¹‹å¦‚æœåœ¨If-Modified-SinceæŒ‡å®šçš„æ—¶é—´æ—¥æœŸä¹‹åï¼Œå¦‚æœè¯·æ±‚çš„èµ„æºéƒ½æ²¡æœ‰æ›´æ–°ï¼Œåˆ™<br>è¿”å›çš„çŠ¶æ€ç  304</p>
<h4 id="If-None-Match"><a href="#If-None-Match" class="headerlink" title="If-None-Match"></a>If-None-Match</h4><p>ä¸If-Matchç›¸å</p>
<h4 id="If-Range"><a href="#If-Range" class="headerlink" title="If-Range"></a>If-Range</h4><p>å‘Šè¯‰æœåŠ¡å™¨è‹¥æŒ‡å®šçš„If-Rangeå­—æ®µå€¼ï¼ˆETagå€¼æˆ–è€…æ—¶é—´ï¼‰å’Œè¯·æ±‚èµ„æºçš„ETagå€¼æˆ–æ—¶é—´ç›¸ä¸€è‡´æ—¶ï¼Œåˆ™ä½œä¸ºèŒƒå›´è¯·æ±‚å¤„ç†ã€‚<br>åä¹‹ï¼Œåˆ™è¿”å›å…¨ä½“èµ„æºã€‚å¦‚å›¾ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a92147f4f3e5ca?w=822&amp;h=783&amp;f=jpeg&amp;s=74478" alt></p>
<h4 id="If-Unmodified-Since"><a href="#If-Unmodified-Since" class="headerlink" title="If-Unmodified-Since"></a>If-Unmodified-Since</h4><p>ä¸If-Modified-Sinceä½œç”¨ç›¸å</p>
<h4 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h4><p>å¯¹äºåªéœ€è·å–éƒ¨åˆ†èµ„æºçš„èŒƒå›´è¯·æ±‚ï¼ŒåŒ…å«é¦–éƒ¨å­—æ®µ<code>Range</code>å³å¯å‘ŠçŸ¥æœåŠ¡å™¨èµ„æºçš„æŒ‡å®šèŒƒå›´ã€‚<br>æ¥æ”¶åˆ°é™„å¸¦<code>Range</code>é¦–éƒ¨å­—æ®µè¯·æ±‚çš„æœåŠ¡å™¨ï¼Œä¼šåœ¨å¤„ç†è¯·æ±‚ä¹‹åè¿”å›<code>206</code>.æ— æ³•å¤„ç†è¯¥èŒƒå›´çš„<br>è¯·æ±‚æ—¶ï¼Œåˆ™ä¼šè¿”å›<code>200</code>çš„å“åº”åŠå…¨éƒ¨èµ„æºã€‚</p>
<h4 id="Referer"><a href="#Referer" class="headerlink" title="Referer"></a>Referer</h4><p>å‘Šè¯‰æœåŠ¡å™¨è¯·æ±‚çš„åŸå§‹URI</p>
<p>ä¾‹å¦‚ï¼š<code>Referer: https://cn.bing.com/</code>è¯´æ˜æˆ‘æ˜¯ä»å¾®è½¯å¿…åº”è¯·æ±‚çš„</p>
<h4 id="Upgrade-Insecure-Requests"><a href="#Upgrade-Insecure-Requests" class="headerlink" title="Upgrade-Insecure-Requests"></a>Upgrade-Insecure-Requests</h4><p><code>Upgrade-Insecure-Requests</code>æ˜¯ä¸€ä¸ªè¯·æ±‚é¦–éƒ¨ï¼Œç”¨æ¥å‘æœåŠ¡å™¨ç«¯å‘é€ä¿¡å·ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯ä¼˜å…ˆé€‰æ‹©åŠ å¯†åŠå¸¦æœ‰èº«ä»½éªŒè¯çš„å“åº”ã€‚ä¸å±äº47ç§æŠ¥æ–‡é¦–éƒ¨å­—æ®µã€‚</p>
<h4 id="TE"><a href="#TE" class="headerlink" title="TE"></a>TE</h4><p>å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯èƒ½å¤Ÿå¤„ç†çš„ä¼ è¾“ç¼–ç æ–¹å¼åŠç›¸å¯¹ä¼˜å…ˆçº§</p>
<h3 id="Transfer-Encoding-TE-Content-Encoding-Accept-Encodingå››ä¸ªé¦–éƒ¨å­—æ®µçš„åŒºåˆ«"><a href="#Transfer-Encoding-TE-Content-Encoding-Accept-Encodingå››ä¸ªé¦–éƒ¨å­—æ®µçš„åŒºåˆ«" class="headerlink" title="Transfer-Encoding,TE,Content-Encoding,Accept-Encodingå››ä¸ªé¦–éƒ¨å­—æ®µçš„åŒºåˆ«"></a>Transfer-Encoding,TE,Content-Encoding,Accept-Encodingå››ä¸ªé¦–éƒ¨å­—æ®µçš„åŒºåˆ«</h3><ul>
<li>Transfer-Encodingï¼šç”¨äºæŒ‡å®šä¼ è¾“æŠ¥æ–‡ä¸»ä½“æ—¶ä½¿ç”¨çš„ç¼–ç æ–¹å¼ï¼Œå±äºé€è·³é¦–éƒ¨ï¼Œå³åªåœ¨ä¸¤ä¸ªèŠ‚ç‚¹é—´æœ‰æ•ˆã€‚ </li>
<li>TEï¼šç”¨äºå‘ŠçŸ¥æœåŠ¡å™¨å®¢æˆ·ç«¯èƒ½å¤Ÿå¤„ç†çš„ç¼–ç æ–¹å¼å’Œç›¸å¯¹ä¼˜å…ˆçº§ï¼Œå±äºé€è·³é¦–éƒ¨ï¼Œå³åªåœ¨ä¸¤ä¸ªèŠ‚ç‚¹é—´æœ‰æ•ˆã€‚ </li>
<li>Content-Encodingï¼šç”¨äºæŒ‡å®šæŠ¥æ–‡ä¸»ä½“å·²ç»é‡‡ç”¨çš„ç¼–ç æ–¹å¼ï¼Œå±äºç«¯åˆ°ç«¯é¦–éƒ¨ï¼Œå³åœ¨æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­æœ‰æ•ˆã€‚ </li>
<li>Accept-Encodingï¼šç”¨äºå‘ŠçŸ¥æœåŠ¡å™¨å®¢æˆ·ç«¯èƒ½å¤Ÿå¤„ç†çš„ç¼–ç æ–¹å¼å’Œç›¸å¯¹ä¼˜å…ˆçº§ï¼Œå±äºç«¯åˆ°ç«¯é¦–éƒ¨ï¼Œå³åœ¨æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­æœ‰æ•ˆã€‚ </li>
</ul>
<p>å¾ˆæ˜¾ç„¶ï¼Œ<code>Transfer-Encoding</code>å’Œ<code>TE</code>æ˜¯ä¸€ç»„ï¼Œ<code>Content-Encoding</code>å’Œ<code>Accept-Encoding</code>æ˜¯ä¸€ç»„ã€‚<br>æ ¹æœ¬åŒºåˆ«åœ¨äºï¼Œ<code>Content-Encoding</code>å’Œ<code>Accept-Encoding</code>é™åˆ¶çš„æ˜¯æŠ¥æ–‡ä¸»ä½“åœ¨æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ç¼–ç æ–¹å¼ï¼Œå…¨å±€æœ‰æ•ˆï¼›<code>Transfer-Encoding</code>å’Œ<code>TE</code>é™åˆ¶çš„æ˜¯æŠ¥æ–‡ä¸»ä½“åœ¨ä¸¤ä¸ªèŠ‚ç‚¹é—´ï¼ˆæºæœåŠ¡å™¨å’Œä»£ç†æœåŠ¡å™¨ä¹‹é—´ã€ä»£ç†æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ç­‰ï¼‰ä¼ è¾“æ—¶ä½¿ç”¨çš„ç¼–ç æ–¹å¼ï¼Œåªåœ¨ä¸¤èŠ‚ç‚¹é—´æœ‰æ•ˆã€‚</p>
<p>è½¬è‡ª<a href="https://blog.csdn.net/swt369/article/details/77847896" target="_blank" rel="noopener">åŒºåˆ†Transfer-Encoding,TE,Content-Encoding,Accept-Encodingå››ä¸ªé¦–éƒ¨å­—æ®µ</a></p>
<h3 id="å“åº”é¦–éƒ¨å­—æ®µ"><a href="#å“åº”é¦–éƒ¨å­—æ®µ" class="headerlink" title="å“åº”é¦–éƒ¨å­—æ®µ"></a>å“åº”é¦–éƒ¨å­—æ®µ</h3><p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a9210213d28f19?w=709&amp;h=450&amp;f=jpeg&amp;s=53018" alt></p>
<p>å“åº”æŠ¥æ–‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Server: Tengine</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">X-M-Log: QNM:xs446;QNM3:<span class="number">1</span></span><br><span class="line">X-M-Reqid: jVAAADsHtCKO05oV</span><br><span class="line">X-Powered-By: HHVM/<span class="number">3.28</span>.1</span><br><span class="line">X-Qnm-Cache: Hit</span><br><span class="line">Ali-Swift-Global-Savetime: <span class="number">1556270140</span></span><br><span class="line">Age: <span class="number">10328</span></span><br><span class="line">X-Cache: HIT TCP_MEM_HIT dirn:<span class="number">11</span>:<span class="number">466942761</span></span><br><span class="line">X-Swift-SaveTime: Thu, <span class="number">02</span> May <span class="number">2019</span> <span class="number">10</span>:<span class="number">36</span>:<span class="number">54</span> GMT</span><br><span class="line">X-Swift-CacheTime: <span class="number">86400</span></span><br><span class="line">Timing-Allow-Origin: *</span><br><span class="line">EagleId: db971b1915567995564074785e</span><br></pre></td></tr></table></figure>
<h4 id="Accept-Ranges"><a href="#Accept-Ranges" class="headerlink" title="Accept-Ranges"></a>Accept-Ranges</h4><p>é¦–éƒ¨å­—æ®µAccept-Rangesæ˜¯ç”¨æ¥å‘Šè¯‰å®¢æˆ·ç«¯æœåŠ¡å™¨æ˜¯å¦èƒ½å¤„ç†èŒƒå›´è¯·æ±‚ï¼Œä»¥æŒ‡å®šè·å–æœåŠ¡å™¨ç«¯<br>æŸä¸ªéƒ¨åˆ†çš„èµ„æºã€‚å¯ä»¥æŒ‡å®šçš„å€¼ä¸º<code>bytes</code>(è¡¨ç¤ºæ¥å—èŒƒå›´è¯·æ±‚)å’Œ<code>none</code>ï¼ˆè¡¨ç¤ºä¸æ¥å—èŒƒå›´è¯·æ±‚ï¼‰.</p>
<h4 id="Age"><a href="#Age" class="headerlink" title="Age"></a>Age</h4><p>å‘Šè¯‰å®¢æˆ·ç«¯ï¼ŒæºæœåŠ¡å™¨åœ¨å¤šä¹…å‰åˆ›å»ºäº†å“åº”ã€‚å­—æ®µå€¼çš„å•ä½ä¸ºç§’ã€‚</p>
<h4 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a>ETag</h4><p>ä¸»è¦ç”¨äºæ£€éªŒç¼“å­˜æ˜¯å¦æ”¹å˜ã€‚å®ƒå‘Šè¯‰å®¢æˆ·ç«¯å®ä½“æ ‡è¯†ï¼Œæ˜¯ä¸€ç§å¯å°†èµ„æºä»¥å­—ç¬¦ä¸²çš„å½¢å¼åšå”¯ä¸€æ ‡è¯†çš„æ–¹å¼ã€‚æœåŠ¡å™¨ä¼šä¸ºæ¯ä»½èµ„æºåˆ†é…å¯¹åº”çš„ETagå€¼</p>
<p>å¦å¤–å½“èµ„æºæ›´æ–°æ—¶ï¼ŒETagå€¼ä¹Ÿéœ€è¦æ›´æ–°ã€‚å½“èµ„æºè¢«ç¼“å­˜æ—¶ï¼Œå°±ä¼šè¢«åˆ†é…å”¯ä¸€çš„æ ‡è¯†ã€‚è‹¥åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­<br>å‡ºç°è¿æ¥çš„ä¸­æ–­ï¼Œå†è¿æ¥çš„æƒ…å†µï¼Œéƒ½ä¼šä¾ç…§ETagå€¼æ¥æŒ‡å®šèµ„æºã€‚</p>
<p>ETagä¸­æœ‰å¼ºETagå€¼å’Œå¼±ETagå€¼</p>
<p>å¼ºETagå€¼ï¼Œæ— è®ºå®ä½“å‘ç”Ÿå¤šä¹ˆç»†å¾®çš„å˜åŒ–éƒ½ä¼šæ”¹å˜å…¶å€¼ã€‚</p>
<p>å¼±ETagå€¼ï¼Œåªç”¨äºæç¤ºèµ„æºæ˜¯å¦ç›¸åŒã€‚åªæœ‰èµ„æºå‘ç”Ÿäº†æ ¹æœ¬æ”¹å˜ï¼Œäº§ç”Ÿå·®å¼‚æ—¶æ‰ä¼šæ”¹å˜<code>ETag</code>å€¼ã€‚è¿™æ—¶ï¼Œ<br>ä¼šåœ¨å­—æ®µå€¼æœ€å¼€å§‹å¤„é™„åŠ  <code>W/</code></p>
<h4 id="Location"><a href="#Location" class="headerlink" title="Location"></a>Location</h4><p>å°†å“åº”æ¥å—æ–¹å¼•é¢†åˆ°æŸä¸ªä¸è¯·æ±‚URIä½ç½®ä¸åŒçš„èµ„æºã€‚åŸºæœ¬ä¸Šï¼Œè¯¥å­—æ®µä¼šé…åˆ3XXçš„å“åº”ï¼Œæä¾›é‡å®šå‘çš„URIã€‚</p>
<h4 id="Proxy-Authenticate"><a href="#Proxy-Authenticate" class="headerlink" title="Proxy-Authenticate"></a>Proxy-Authenticate</h4><p>ä¼šæŠŠç”±ä»£ç†æœåŠ¡å™¨æ‰€è¦æ±‚çš„è®¤è¯ä¿¡æ¯å‘ç”Ÿç»™å®¢æˆ·ç«¯</p>
<h4 id="Retry-After"><a href="#Retry-After" class="headerlink" title="Retry-After"></a>Retry-After</h4><p>å‘Šè¯‰å®¢æˆ·ç«¯åº”è¯¥åœ¨å¤šä¹…ä¹‹åå†å‘é€è¯·æ±‚ã€‚ä¸»è¦é…åˆçŠ¶æ€ç 503å“åº”æˆ–3xxå“åº”ä¸€èµ·ä½¿ç”¨ã€‚å­—æ®µå€¼å¯ä»¥æŒ‡å®šä¸ºå…·ä½“çš„æ—¥æœŸæ—¶é—´ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ›å»ºå“åº”åçš„ç§’æ•°</p>
<h4 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h4><p>å‘Šè¯‰å®¢æˆ·ç«¯å½“å‰æœåŠ¡å™¨ä¸Šå®‰è£…çš„HTTPæœåŠ¡å™¨åº”ç”¨ç¨‹åºçš„ä¿¡æ¯</p>
<h4 id="Vary"><a href="#Vary" class="headerlink" title="Vary"></a>Vary</h4><p>å¯¹ç¼“å­˜è¿›è¡Œæ§åˆ¶ã€‚å…·ä½“è§<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Vary" target="_blank" rel="noopener">è¿™é‡Œ</a></p>
<h4 id="WWW-Authenticate"><a href="#WWW-Authenticate" class="headerlink" title="WWW-Authenticate"></a>WWW-Authenticate</h4><p>ç”¨äºHTTPè®¿é—®è®¤è¯</p>
<h3 id="å®ä½“é¦–éƒ¨å­—æ®µ"><a href="#å®ä½“é¦–éƒ¨å­—æ®µ" class="headerlink" title="å®ä½“é¦–éƒ¨å­—æ®µ"></a>å®ä½“é¦–éƒ¨å­—æ®µ</h3><p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a92106a075a602?w=655&amp;h=455&amp;f=jpeg&amp;s=56957" alt></p>
<h4 id="Allow"><a href="#Allow" class="headerlink" title="Allow"></a>Allow</h4><p>å‘Šè¯‰å®¢æˆ·ç«¯æ”¯æŒçš„è¯·æ±‚æ–¹æ³•</p>
<h4 id="Content-Encoding"><a href="#Content-Encoding" class="headerlink" title="Content-Encoding"></a>Content-Encoding</h4><p>å‘ŠçŸ¥å®¢æˆ·ç«¯æœåŠ¡å™¨å¯¹å®ä½“çš„ä¸»ä½“éƒ¨åˆ†é€‰ç”¨çš„å†…å®¹ç¼–ç æ–¹å¼ã€‚å†…å®¹ç¼–ç æ˜¯æŒ‡åœ¨ä¸ä¸¢å¤±å®ä½“ä¿¡æ¯çš„å‰æä¸‹æ‰€è¿›è¡Œçš„å‹ç¼©</p>
<p>ä¸»è¦é‡‡ç”¨ä»¥ä¸‹4ç§å†…å®¹ç¼–ç çš„æ–¹å¼</p>
<ul>
<li>gzip</li>
<li>compress</li>
<li>deflate</li>
<li>identity</li>
</ul>
<h4 id="Content-Language"><a href="#Content-Language" class="headerlink" title="Content-Language"></a>Content-Language</h4><p>å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œå®ä½“ä½¿ç”¨çš„è¯­è¨€</p>
<h4 id="Content-Length"><a href="#Content-Length" class="headerlink" title="Content-Length"></a>Content-Length</h4><p>è¡¨æ˜å®ä½“ä¸»ä½“éƒ¨åˆ†çš„å¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ã€‚å¯¹å®ä½“ä¸»ä½“è¿›è¡Œå†…å®¹ç¼–ç ä¼ è¾“æ—¶ï¼Œä¸èƒ½å†ä½¿ç”¨Content-Length<br>é¦–éƒ¨å­—æ®µ</p>
<h4 id="Content-Location"><a href="#Content-Location" class="headerlink" title="Content-Location"></a>Content-Location</h4><p>ç»™å‡ºæŠ¥æ–‡ä¸»ä½“éƒ¨åˆ†ç›¸å¯¹åº”çš„URIã€‚å’Œé¦–éƒ¨å­—æ®µLocationä¸åŒï¼ŒContent-Locationè¡¨ç¤ºçš„æ˜¯æŠ¥æ–‡ä¸»ä½“è¿”å›èµ„æºå¯¹åº”çš„URI</p>
<h4 id="Content-MD5"><a href="#Content-MD5" class="headerlink" title="Content-MD5"></a>Content-MD5</h4><p>é¦–éƒ¨å­—æ®µ Content-MD5 æ˜¯ä¸€ä¸²ç”± MD5 ç®—æ³•ç”Ÿæˆçš„å€¼ï¼Œå…¶ç›®çš„åœ¨äºæ£€ æŸ¥æŠ¥æ–‡ä¸»ä½“åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦ä¿æŒå®Œæ•´ï¼Œä»¥åŠç¡®è®¤ä¼ è¾“åˆ°è¾¾ã€‚</p>
<h4 id="Content-Range"><a href="#Content-Range" class="headerlink" title="Content-Range"></a>Content-Range</h4><p>é’ˆå¯¹èŒƒå›´è¯·æ±‚ï¼Œè¿”å›å“åº”æ—¶ä½¿ç”¨çš„é¦–éƒ¨å­—æ®µContent-Rangeï¼Œèƒ½å‘Šè¯‰å®¢æˆ·ç«¯ä½œä¸ºå“åº”è¿”å›çš„å®ä½“çš„å“ªä¸ªéƒ¨åˆ†<br>ç¬¦åˆèŒƒå›´è¯·æ±‚ã€‚å­—æ®µå€¼ä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œè¡¨ç¤ºå½“å‰å‘é€éƒ¨åˆ†åŠæ•´ä¸ªå®ä½“å¤§å°ã€‚</p>
<h4 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content-Type"></a>Content-Type</h4><p>è¯´æ˜å®ä½“ä¸»ä½“å†…å¯¹è±¡çš„åª’ä½“ç±»å‹ï¼Œå’Œé¦–éƒ¨å­—æ®µ<code>Accept</code>ä¸€æ ·ï¼Œå­—æ®µå€¼ç”¨<code>type/subtype</code>å½¢å¼èµ‹å€¼</p>
<p><code>Http Header</code>é‡Œçš„<code>Content-Type</code>ä¸€èˆ¬æœ‰è¿™ä¸‰ç§ï¼š</p>
<ul>
<li>application/x-www-form-urlencodedï¼šæ•°æ®è¢«ç¼–ç ä¸ºåç§°/å€¼å¯¹(è¿™æ˜¯æ ‡å‡†çš„ç¼–ç æ ¼å¼)ã€‚</li>
<li>multipart/form-dataï¼š æ•°æ®è¢«ç¼–ç ä¸ºä¸€æ¡æ¶ˆæ¯ï¼Œé¡µä¸Šçš„æ¯ä¸ªæ§ä»¶å¯¹åº”æ¶ˆæ¯ä¸­çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚</li>
<li>text/plainï¼š æ•°æ®ä»¥çº¯æ–‡æœ¬å½¢å¼(text/json/xml/html)è¿›è¡Œç¼–ç ï¼Œå…¶ä¸­ä¸å«ä»»ä½•æ§ä»¶æˆ–æ ¼å¼å­—ç¬¦(postmanè½¯ä»¶é‡Œæ ‡çš„æ˜¯RAW)</li>
</ul>
<blockquote>
<p>formçš„enctypeå±æ€§ä¸ºç¼–ç æ–¹å¼ï¼Œå¸¸ç”¨æœ‰ä¸¤ç§ï¼š<code>application/x-www-form-urlencoded</code>å’Œ<code>multipart/form-data</code>ï¼Œé»˜è®¤ä¸º<code>application/x-www-form-urlencoded</code>ã€‚<br><br>å½“<code>action</code>ä¸º<code>get</code>æ—¶å€™ï¼Œæµè§ˆå™¨ç”¨<code>x-www-form-urlencoded</code>çš„ç¼–ç æ–¹å¼æŠŠ<code>form</code>æ•°æ®è½¬æ¢æˆä¸€ä¸ªå­—ä¸²<code>ï¼ˆname1=value1&amp;name2=value2...ï¼‰</code>ï¼Œç„¶åæŠŠè¿™ä¸ªå­—ä¸²è¿½åŠ åˆ°urlåé¢ï¼Œç”¨?åˆ†å‰²ï¼ŒåŠ è½½è¿™ä¸ªæ–°çš„urlã€‚<br><br>å½“<code>action</code>ä¸º<code>post</code>æ—¶å€™ï¼Œæµè§ˆå™¨æŠŠ<code>form</code>æ•°æ®å°è£…åˆ°<code>http body</code>ä¸­ï¼Œç„¶åå‘é€åˆ°<code>server</code>ã€‚ å¦‚æœæ²¡æœ‰<code>type=file</code>çš„æ§ä»¶ï¼Œç”¨é»˜è®¤çš„<code>application/x-www-form-urlencoded</code>å°±å¯ä»¥äº†ã€‚ ä½†æ˜¯å¦‚æœæœ‰<code>type=file</code>çš„è¯ï¼Œå°±è¦ç”¨åˆ°<code>multipart/form-data</code>äº†ã€‚<br><br>å½“<code>action</code>ä¸º<code>post</code>ä¸”<code>Content-Type</code>ç±»å‹æ˜¯<code>multipart/form-data</code>ï¼Œæµè§ˆå™¨ä¼šæŠŠæ•´ä¸ªè¡¨å•ä»¥æ§ä»¶ä¸ºå•ä½åˆ†å‰²ï¼Œå¹¶ä¸ºæ¯ä¸ªéƒ¨åˆ†åŠ ä¸Š<code>Content-Disposition</code>(form-dataæˆ–è€…file),<code>Content-Type</code>(é»˜è®¤ä¸º<code>text/plain</code>),<code>name</code>(æ§ä»¶name)ç­‰ä¿¡æ¯ï¼Œå¹¶åŠ ä¸Šåˆ†å‰²ç¬¦ã€‚</p>
</blockquote>
<p>è½¬è‡ª<a href="https://www.cnblogs.com/52fhy/p/5436673.html" target="_blank" rel="noopener">Http Headeré‡Œçš„Content-Type </a></p>
<h4 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h4><p>ä¼šå°†èµ„æºå¤±æ•ˆçš„æ—¥æœŸå‘Šè¯‰å®¢æˆ·ç«¯</p>
<h4 id="Last-Modified"><a href="#Last-Modified" class="headerlink" title="Last-Modified"></a>Last-Modified</h4><p>æŒ‡æ˜èµ„æºæœ€ç»ˆä¿®æ”¹çš„æ—¶é—´</p>
<h3 id="ä¸ºCookieæœåŠ¡çš„é¦–éƒ¨å­—æ®µ"><a href="#ä¸ºCookieæœåŠ¡çš„é¦–éƒ¨å­—æ®µ" class="headerlink" title="ä¸ºCookieæœåŠ¡çš„é¦–éƒ¨å­—æ®µ"></a>ä¸ºCookieæœåŠ¡çš„é¦–éƒ¨å­—æ®µ</h3><h4 id="Set-Cookie"><a href="#Set-Cookie" class="headerlink" title="Set-Cookie"></a>Set-Cookie</h4><p>å¼€å§‹çŠ¶æ€ç®¡ç†æ‰€ä½¿ç”¨çš„Cookieä¿¡æ¯ï¼ˆå“åº”é¦–éƒ¨å­—æ®µï¼‰</p>
<h4 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h4><p>å‘Šè¯‰æœåŠ¡å™¨ï¼Œå½“å®¢æˆ·ç«¯æƒ³è·å–HTTPçŠ¶æ€ç®¡ç†æ”¯æŒæ—¶ï¼Œå°±ä¼šåœ¨è¯·æ±‚ä¸­åŒ…å«ä»æœåŠ¡å™¨æ¥å—åˆ°çš„Cookieã€‚æ¥æ”¶åˆ°å¤šä¸ª<br>Cookieæ—¶ï¼ŒåŒæ—¶å¯ä»¥ä»¥å¤šä¸ªCookieå½¢å¼å‘é€</p>
<h2 id="å…¶ä»–é¦–éƒ¨å­—æ®µ"><a href="#å…¶ä»–é¦–éƒ¨å­—æ®µ" class="headerlink" title="å…¶ä»–é¦–éƒ¨å­—æ®µ"></a>å…¶ä»–é¦–éƒ¨å­—æ®µ</h2><p>HTTPé¦–éƒ¨å­—æ®µæ˜¯å¯ä»¥è‡ªè¡Œæ‰©å±•çš„ã€‚æ‰€ä»¥åœ¨WEBæœåŠ¡å™¨å’Œæµè§ˆå™¨åº”ç”¨ä¸Šï¼Œä¼šå‡ºç°å„ç§éæ ‡å‡†çš„é¦–éƒ¨å­—æ®µ</p>
<h3 id="X-Frame-Options"><a href="#X-Frame-Options" class="headerlink" title="X-Frame-Options"></a>X-Frame-Options</h3><p>å±äºå“åº”é¦–éƒ¨ï¼Œç”¨äºæ§åˆ¶ç½‘ç«™å†…å®¹åœ¨å…¶ä»–webç½‘ç«™çš„Frameæ ‡ç­¾å†…çš„æ˜¾ç¤ºé—®é¢˜ã€‚å…¶ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢<br>ç‚¹å‡»åŠ«æŒæ”»å‡»</p>
<p>æœ‰ä¸¤ä¸ªå¯æŒ‡å®šçš„å­—æ®µå€¼<br>DENY:æ‹’ç»<br>SAMEORIGIN:ä»…åœ¨åŒæºåŸŸåä¸‹çš„é¡µé¢åŒ¹é…æ—¶è®¸å¯</p>
<h3 id="X-XSS-Protection"><a href="#X-XSS-Protection" class="headerlink" title="X-XSS-Protection"></a>X-XSS-Protection</h3><p>å±äºå“åº”é¦–éƒ¨ï¼Œå®ƒæ˜¯é’ˆå¯¹è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰çš„ä¸€ç§å¯¹ç­–ï¼Œç”¨äºæ§åˆ¶æµè§ˆå™¨XSSé˜²æŠ¤æœºåˆ¶å¼€å…³ã€‚</p>
<p>å­—æ®µå€¼ï¼š<br>0ï¼šå°†XSSè¿‡æ»¤è®¾ç½®ä¸ºæ— æ•ˆçŠ¶æ€<br>1ï¼šå°†XSSè¿‡æ»¤è®¾ç½®ä¸ºæœ‰æ•ˆçŠ¶æ€</p>
<h3 id="DNT"><a href="#DNT" class="headerlink" title="DNT"></a>DNT</h3><p>å±äºè¯·æ±‚å­—æ®µï¼Œæ„å‘³æ‹’ç»ä¸ªäººä¿¡æ¯è¢«é‡‡é›†ï¼Œæ˜¯è¡¨ç¤ºæ‹’ç»è¢«ç²¾å‡†å¹¿å‘Šè¿½è¸ªçš„ä¸€ç§æ–¹æ³•</p>
<p>å­—æ®µå€¼<br>0ï¼šåŒæ„è¢«è¿½è¸ª<br>1ï¼šæ‹’ç»è¢«è¿½è¸ª</p>
<h3 id="P3P"><a href="#P3P" class="headerlink" title="P3P"></a>P3P</h3><p>å±äºå“åº”é¦–éƒ¨ï¼Œé€šè¿‡åˆ©ç”¨ P3Pï¼ˆThe Platform for Privacy Preferencesï¼Œåœ¨çº¿éšç§åå¥½å¹³å°ï¼‰æŠ€æœ¯ï¼Œå¯ä»¥è®© Web ç½‘ç«™ä¸Š çš„ä¸ªäººéšç§å˜æˆä¸€ç§ä»…ä¾›ç¨‹åºå¯ç†è§£çš„å½¢å¼ï¼Œä»¥è¾¾åˆ°ä¿æŠ¤ç”¨æˆ·éšç§çš„ ç›®çš„ã€‚</p>
<h2 id="åè®®ä¸­å¯¹X-å‰ç¼€çš„åºŸé™¤"><a href="#åè®®ä¸­å¯¹X-å‰ç¼€çš„åºŸé™¤" class="headerlink" title="åè®®ä¸­å¯¹X-å‰ç¼€çš„åºŸé™¤"></a>åè®®ä¸­å¯¹X-å‰ç¼€çš„åºŸé™¤</h2><p>åœ¨HTTPç­‰å¤šç§åè®®ä¸­ï¼Œé€šè¿‡ç»™éæ ‡å‡†å‚æ•°åŠ ä¸Šå‰ç¼€X-ï¼Œæ¥åŒºåˆ«äºæ ‡å‡†å‚æ•°ï¼Œå¹¶ä½¿é‚£äº›éæ ‡å‡†å‚æ•°ä½œä¸ºæ‰©å±•å˜æˆå¯èƒ½ï¼ˆå¦‚ä¸Šé¢çš„å“åº”é¦–éƒ¨ï¼‰ã€‚ä½†æ˜¯è¿™ç§ç®€å•ç²—æš´çš„åšæ³•æ²¡æœ‰ä»»ä½•å¥½å¤„ï¼Œå› æ­¤è¢«æè®®åœæ­¢ã€‚ç„¶è€Œå¯¹å·²ç»åœ¨ä½¿ç”¨ä¸­çš„X-å‰ç¼€æ¥è¯´ï¼Œä¸åº”è¯¥è¦æ±‚å…¶å˜æ›´ã€‚</p>
<h2 id="HTTPçš„ç¼ºç‚¹"><a href="#HTTPçš„ç¼ºç‚¹" class="headerlink" title="HTTPçš„ç¼ºç‚¹"></a>HTTPçš„ç¼ºç‚¹</h2><ul>
<li>é€šä¿¡ä½¿ç”¨æ˜æ–‡ï¼ˆä¸åŠ å¯†ï¼‰ï¼Œå†…å®¹å¯èƒ½è¢«çªƒå¬</li>
<li>ä¸éªŒè¯é€šä¿¡æ–¹çš„èº«ä»½ï¼Œå› æ­¤æœ‰å¯èƒ½é­å—ä¼ªè£…</li>
<li>æ— æ³•è¯æ˜æŠ¥æ–‡çš„å®Œæ•´æ€§ï¼Œæ‰€ä»¥å†…å®¹å¯èƒ½è¢«ç¯¡æ”¹</li>
</ul>
<p>HTTP+ åŠ å¯† + è®¤è¯ + å®Œæ•´æ€§ä¿æŠ¤ =HTTPS </p>
<p>HTTPS å¹¶éæ˜¯åº”ç”¨å±‚çš„ä¸€ç§æ–°åè®®ã€‚åªæ˜¯ HTTP é€šä¿¡æ¥å£éƒ¨åˆ†ç”¨ SSLï¼ˆSecure Socket Layerï¼‰å’Œ TLSï¼ˆTransport Layer Securityï¼‰åè®®ä»£ æ›¿è€Œå·²ã€‚<br>é€šå¸¸ï¼ŒHTTP ç›´æ¥å’Œ TCP é€šä¿¡ã€‚å½“ä½¿ç”¨ SSL æ—¶ï¼Œåˆ™æ¼”å˜æˆå…ˆå’Œ SSL é€š ä¿¡ï¼Œå†ç”± SSL å’Œ TCP é€šä¿¡äº†ã€‚ç®€è¨€ä¹‹ï¼Œæ‰€è°“ HTTPSï¼Œå…¶å®å°±æ˜¯èº«æŠ« SSL åè®®è¿™å±‚å¤–å£³çš„ HTTP</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a92154eb3a0039?w=592&amp;h=298&amp;f=png&amp;s=49918" alt></p>
<p>åœ¨é‡‡ç”¨ SSL åï¼ŒHTTP å°±æ‹¥æœ‰äº† HTTPS çš„åŠ å¯†ã€è¯ä¹¦å’Œå®Œæ•´æ€§ä¿æŠ¤ è¿™äº›åŠŸèƒ½ã€‚</p>
<p>SSL æ˜¯ç‹¬ç«‹äº HTTP çš„åè®®ï¼Œæ‰€ä»¥ä¸å…‰æ˜¯ HTTP åè®®ï¼Œå…¶ä»–è¿è¡Œåœ¨åº” ç”¨å±‚çš„ SMTP å’Œ Telnet ç­‰åè®®å‡å¯é…åˆ SSL åè®®ä½¿ç”¨ã€‚å¯ä»¥è¯´ SSL æ˜¯ å½“ä»Šä¸–ç•Œä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ç½‘ç»œå®‰å…¨æŠ€æœ¯ã€‚</p>
<h2 id="åŠ å¯†"><a href="#åŠ å¯†" class="headerlink" title="åŠ å¯†"></a>åŠ å¯†</h2><p>åŠ å¯†å’Œè§£å¯†åŒç”¨ä¸€ä¸ªå¯†é’¥çš„æ–¹å¼ç§°ä¸ºå…±äº«å¯†é’¥åŠ å¯†ï¼ˆCommon key crypto systemï¼‰ï¼Œä¹Ÿè¢«å«åšå¯¹ç§°å¯†é’¥åŠ å¯†</p>
<p>å…±äº«å¯†é’¥åŠ å¯†çš„å›°å¢ƒ</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a92158084c1816?w=638&amp;h=456&amp;f=jpeg&amp;s=32324" alt></p>
<p>ä»¥å…±äº«å¯†é’¥æ–¹å¼åŠ å¯†æ—¶å¿…é¡»å°†å¯†é’¥ä¹Ÿå‘ç»™å¯¹æ–¹ã€‚å¯ç©¶ç«Ÿæ€æ ·æ‰èƒ½ å®‰å…¨åœ°è½¬äº¤ï¼Ÿåœ¨äº’è”ç½‘ä¸Šè½¬å‘å¯†é’¥æ—¶ï¼Œå¦‚æœé€šä¿¡è¢«ç›‘å¬é‚£ä¹ˆå¯†é’¥ å°±å¯ä¼šè½å…¥æ”»å‡»è€…ä¹‹æ‰‹ï¼ŒåŒæ—¶ä¹Ÿå°±å¤±å»äº†åŠ å¯†çš„æ„ä¹‰ã€‚å¦å¤–è¿˜å¾— è®¾æ³•å®‰å…¨åœ°ä¿ç®¡æ¥æ”¶åˆ°çš„å¯†é’¥ã€‚</p>
<p>å…¬å¼€å¯†é’¥åŠ å¯†ä½¿ç”¨ä¸€å¯¹éå¯¹ç§°çš„å¯†é’¥ã€‚ä¸€æŠŠå«åšç§æœ‰å¯†é’¥ ï¼ˆprivate keyï¼‰ï¼Œå¦ä¸€æŠŠå«åšå…¬å¼€å¯†é’¥ï¼ˆpublic keyï¼‰ã€‚é¡¾åæ€ ä¹‰ï¼Œç§æœ‰å¯†é’¥ä¸èƒ½è®©å…¶ä»–ä»»ä½•äººçŸ¥é“ï¼Œè€Œå…¬å¼€å¯†é’¥åˆ™å¯ä»¥éšæ„å‘ å¸ƒï¼Œä»»ä½•äººéƒ½å¯ä»¥è·å¾—ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a9215bfd8e5a8a?w=797&amp;h=661&amp;f=jpeg&amp;s=57497" alt></p>
<h2 id="HTTPS-é‡‡ç”¨æ··åˆåŠ å¯†æœºåˆ¶"><a href="#HTTPS-é‡‡ç”¨æ··åˆåŠ å¯†æœºåˆ¶" class="headerlink" title="HTTPS é‡‡ç”¨æ··åˆåŠ å¯†æœºåˆ¶"></a>HTTPS é‡‡ç”¨æ··åˆåŠ å¯†æœºåˆ¶</h2><p>HTTPS é‡‡ç”¨å…±äº«å¯†é’¥åŠ å¯†å’Œå…¬å¼€å¯†é’¥åŠ å¯†ä¸¤è€…å¹¶ç”¨çš„æ··åˆåŠ å¯† æœºåˆ¶ã€‚è‹¥å¯†é’¥èƒ½å¤Ÿå®ç°å®‰å…¨äº¤æ¢ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½ä¼šè€ƒè™‘ä»…ä½¿ç”¨å…¬å¼€ å¯†é’¥åŠ å¯†æ¥é€šä¿¡ã€‚</p>
<p>ä½†æ˜¯å…¬å¼€å¯†é’¥åŠ å¯†ä¸å…±äº«å¯†é’¥åŠ å¯†ç›¸æ¯”ï¼Œå…¶å¤„ ç†é€Ÿåº¦è¦æ…¢ã€‚<br>æ‰€ä»¥åº”å……åˆ†åˆ©ç”¨ä¸¤è€…å„è‡ªçš„ä¼˜åŠ¿ï¼Œå°†å¤šç§æ–¹æ³•ç»„åˆèµ·æ¥ç”¨äºé€š ä¿¡ã€‚åœ¨äº¤æ¢å¯†é’¥ç¯èŠ‚ä½¿ç”¨å…¬å¼€å¯†é’¥åŠ å¯†æ–¹å¼ï¼Œä¹‹åçš„å»ºç«‹é€šä¿¡äº¤ æ¢æŠ¥æ–‡é˜¶æ®µåˆ™ä½¿ç”¨å…±äº«å¯†é’¥åŠ å¯†æ–¹å¼ã€‚</p>
<h2 id="è¯æ˜å…¬å¼€å¯†é’¥æ­£ç¡®æ€§çš„è¯ä¹¦"><a href="#è¯æ˜å…¬å¼€å¯†é’¥æ­£ç¡®æ€§çš„è¯ä¹¦" class="headerlink" title="è¯æ˜å…¬å¼€å¯†é’¥æ­£ç¡®æ€§çš„è¯ä¹¦"></a>è¯æ˜å…¬å¼€å¯†é’¥æ­£ç¡®æ€§çš„è¯ä¹¦</h2><p>é—æ†¾çš„æ˜¯ï¼Œå…¬å¼€å¯†é’¥åŠ å¯†æ–¹å¼è¿˜æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜çš„ã€‚é‚£å°±æ˜¯æ— æ³•è¯æ˜ å…¬å¼€å¯†é’¥æœ¬èº«å°±æ˜¯è´§çœŸä»·å®çš„å…¬å¼€å¯†é’¥ã€‚æ¯”å¦‚ï¼Œæ­£å‡†å¤‡å’ŒæŸå°æœåŠ¡å™¨ å»ºç«‹å…¬å¼€å¯†é’¥åŠ å¯†æ–¹å¼ä¸‹çš„é€šä¿¡æ—¶ï¼Œå¦‚ä½•è¯æ˜æ”¶åˆ°çš„å…¬å¼€å¯†é’¥å°±æ˜¯åŸ æœ¬é¢„æƒ³çš„é‚£å°æœåŠ¡å™¨å‘è¡Œçš„å…¬å¼€å¯†é’¥ã€‚æˆ–è®¸åœ¨å…¬å¼€å¯†é’¥ä¼ è¾“é€”ä¸­ï¼ŒçœŸ æ­£çš„å…¬å¼€å¯†é’¥å·²ç»è¢«æ”»å‡»è€…æ›¿æ¢æ‰äº†ã€‚</p>
<p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ç”±æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆCAï¼ŒCertificate Authorityï¼‰å’Œå…¶ç›¸å…³æœºå…³é¢å‘çš„å…¬å¼€å¯†é’¥è¯ä¹¦</p>
<p>æœåŠ¡å™¨ä¼šå°†è¿™ä»½ç”±æ•°å­—è¯ä¹¦è®¤è¯æœºæ„é¢å‘çš„å…¬é’¥è¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ï¼Œ<br>ä»¥è¿›è¡Œå…¬å¼€å¯†é’¥åŠ å¯†æ–¹å¼é€šä¿¡ã€‚</p>
<p>å…¬é’¥è¯ä¹¦ä¹Ÿå¯å«åšæ•°å­—è¯ä¹¦æˆ–ç›´æ¥ç§° ä¸ºè¯ä¹¦ã€‚<br>æ¥åˆ°è¯ä¹¦çš„å®¢æˆ·ç«¯å¯ä½¿ç”¨æ•°å­—è¯ä¹¦è®¤è¯æœºæ„çš„å…¬å¼€å¯†é’¥ï¼Œå¯¹é‚£å¼ è¯ä¹¦ ä¸Šçš„æ•°å­—ç­¾åè¿›è¡ŒéªŒè¯ï¼Œä¸€æ—¦éªŒè¯é€šè¿‡ï¼Œå®¢æˆ·ç«¯ä¾¿å¯æ˜ç¡®ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>è®¤è¯æœåŠ¡å™¨çš„å…¬å¼€å¯†é’¥çš„æ˜¯çœŸå®æœ‰æ•ˆçš„æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ã€‚</li>
<li>æœåŠ¡å™¨çš„å…¬å¼€å¯†é’¥æ˜¯å€¼å¾—ä¿¡èµ–çš„ã€‚</li>
</ul>
<p>æ­¤å¤„è®¤è¯æœºå…³çš„å…¬å¼€å¯†é’¥å¿…é¡»å®‰å…¨åœ°è½¬äº¤ç»™å®¢æˆ·ç«¯ã€‚ä½¿ç”¨é€šä¿¡æ–¹å¼ æ—¶ï¼Œå¦‚ä½•å®‰å…¨è½¬äº¤æ˜¯ä¸€ä»¶å¾ˆå›°éš¾çš„äº‹ï¼Œå› æ­¤ï¼Œå¤šæ•°æµè§ˆå™¨å¼€å‘å•†å‘å¸ƒ ç‰ˆæœ¬æ—¶ï¼Œä¼šäº‹å…ˆåœ¨å†…éƒ¨æ¤å…¥å¸¸ç”¨è®¤è¯æœºå…³çš„å…¬å¼€å¯†é’¥ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a921608e553499?w=774&amp;h=609&amp;f=jpeg&amp;s=85974" alt></p>
<h2 id="HTTPS-çš„é€šä¿¡æ­¥éª¤"><a href="#HTTPS-çš„é€šä¿¡æ­¥éª¤" class="headerlink" title="HTTPS çš„é€šä¿¡æ­¥éª¤"></a>HTTPS çš„é€šä¿¡æ­¥éª¤</h2><p><img src="https://user-gold-cdn.xitu.io/2019/5/7/16a9216530d26350?w=742&amp;h=894&amp;f=jpeg&amp;s=60050" alt></p>
<ul>
<li>æ­¥éª¤ 1ï¼š å®¢æˆ·ç«¯é€šè¿‡å‘é€ Client Hello æŠ¥æ–‡å¼€å§‹ SSL é€šä¿¡ã€‚æŠ¥æ–‡ä¸­åŒ… å«å®¢æˆ·ç«¯æ”¯æŒçš„ SSL çš„æŒ‡å®šç‰ˆæœ¬ã€åŠ å¯†ç»„ä»¶ï¼ˆCipher Suiteï¼‰åˆ—è¡¨ï¼ˆæ‰€ ä½¿ç”¨çš„åŠ å¯†ç®—æ³•åŠå¯†é’¥é•¿åº¦ç­‰ï¼‰ã€‚</li>
<li>æ­¥éª¤ 2ï¼š æœåŠ¡å™¨å¯è¿›è¡Œ SSL é€šä¿¡æ—¶ï¼Œä¼šä»¥ Server Hello æŠ¥æ–‡ä½œä¸ºåº”<br>ç­”ã€‚å’Œå®¢æˆ·ç«¯ä¸€æ ·ï¼Œåœ¨æŠ¥æ–‡ä¸­åŒ…å« SSL ç‰ˆæœ¬ä»¥åŠåŠ å¯†ç»„ä»¶ã€‚æœåŠ¡å™¨çš„ åŠ å¯†ç»„ä»¶å†…å®¹æ˜¯ä»æ¥æ”¶åˆ°çš„å®¢æˆ·ç«¯åŠ å¯†ç»„ä»¶å†…ç­›é€‰å‡ºæ¥çš„ã€‚</li>
<li>æ­¥éª¤ 3ï¼š ä¹‹åæœåŠ¡å™¨å‘é€ Certificate æŠ¥æ–‡ã€‚æŠ¥æ–‡ä¸­åŒ…å«å…¬å¼€å¯†é’¥è¯ ä¹¦ã€‚</li>
<li>æ­¥éª¤ 4ï¼š æœ€åæœåŠ¡å™¨å‘é€ Server Hello Done æŠ¥æ–‡é€šçŸ¥å®¢æˆ·ç«¯ï¼Œæœ€åˆé˜¶ æ®µçš„ SSL æ¡æ‰‹åå•†éƒ¨åˆ†ç»“æŸã€‚ </li>
<li>æ­¥éª¤ 5ï¼š SSL ç¬¬ä¸€æ¬¡æ¡æ‰‹ç»“æŸä¹‹åï¼Œå®¢æˆ·ç«¯ä»¥ Client Key Exchange æŠ¥ æ–‡ä½œä¸ºå›åº”ã€‚æŠ¥æ–‡ä¸­åŒ…å«é€šä¿¡åŠ å¯†ä¸­ä½¿ç”¨çš„ä¸€ç§è¢«ç§°ä¸º Pre-master secret çš„éšæœºå¯†ç ä¸²ã€‚è¯¥æŠ¥æ–‡å·²ç”¨æ­¥éª¤ 3 ä¸­çš„å…¬å¼€å¯†é’¥è¿›è¡ŒåŠ å¯†ã€‚ </li>
<li>æ­¥éª¤ 6ï¼š æ¥ç€å®¢æˆ·ç«¯ç»§ç»­å‘é€ Change Cipher Spec æŠ¥æ–‡ã€‚è¯¥æŠ¥æ–‡ä¼šæ ç¤ºæœåŠ¡å™¨ï¼Œåœ¨æ­¤æŠ¥æ–‡ä¹‹åçš„é€šä¿¡ä¼šé‡‡ç”¨ Pre-master secret å¯†é’¥åŠ å¯†ã€‚ </li>
<li>æ­¥éª¤ 7ï¼š å®¢æˆ·ç«¯å‘é€ Finished æŠ¥æ–‡ã€‚è¯¥æŠ¥æ–‡åŒ…å«è¿æ¥è‡³ä»Šå…¨éƒ¨æŠ¥æ–‡çš„ æ•´ä½“æ ¡éªŒå€¼ã€‚è¿™æ¬¡æ¡æ‰‹åå•†æ˜¯å¦èƒ½å¤ŸæˆåŠŸï¼Œè¦ä»¥æœåŠ¡å™¨æ˜¯å¦èƒ½å¤Ÿæ­£ç¡® è§£å¯†è¯¥æŠ¥æ–‡ä½œä¸ºåˆ¤å®šæ ‡å‡†ã€‚</li>
<li>æ­¥éª¤ 8ï¼š æœåŠ¡å™¨åŒæ ·å‘é€ Change Cipher Spec æŠ¥æ–‡ã€‚ </li>
<li>æ­¥éª¤ 9ï¼š æœåŠ¡å™¨åŒæ ·å‘é€ Finished æŠ¥æ–‡ã€‚ </li>
<li>æ­¥éª¤ 10ï¼š æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„ Finished æŠ¥æ–‡äº¤æ¢å®Œæ¯•ä¹‹åï¼ŒSSL è¿æ¥ å°±ç®—å»ºç«‹å®Œæˆã€‚å½“ç„¶ï¼Œé€šä¿¡ä¼šå—åˆ° SSL çš„ä¿æŠ¤ã€‚ä»æ­¤å¤„å¼€å§‹è¿›è¡Œåº”ç”¨ å±‚åè®®çš„é€šä¿¡ï¼Œå³å‘é€ HTTP è¯·æ±‚ã€‚ </li>
<li>æ­¥éª¤ 11ï¼š åº”ç”¨å±‚åè®®é€šä¿¡ï¼Œå³å‘é€ HTTP å“åº”ã€‚ </li>
<li>æ­¥éª¤ 12ï¼š æœ€åç”±å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ã€‚æ–­å¼€è¿æ¥æ—¶ï¼Œå‘é€ close_notify æŠ¥ æ–‡ã€‚ä¸Šå›¾åšäº†ä¸€äº›çœç•¥ï¼Œè¿™æ­¥ä¹‹åå†å‘é€ TCP FIN æŠ¥æ–‡æ¥å…³é—­ä¸ TCP çš„é€šä¿¡ã€‚<br>åœ¨ä»¥ä¸Šæµç¨‹ä¸­ï¼Œåº”ç”¨å±‚å‘é€æ•°æ®æ—¶ä¼šé™„åŠ ä¸€ç§å«åš MACï¼ˆMessage Authentication Codeï¼‰çš„æŠ¥æ–‡æ‘˜è¦ã€‚MAC èƒ½å¤ŸæŸ¥çŸ¥æŠ¥æ–‡æ˜¯å¦é­åˆ°ç¯¡ æ”¹ï¼Œä»è€Œä¿æŠ¤æŠ¥æ–‡çš„å®Œæ•´æ€§ã€‚</li>
</ul>
<blockquote>
<p>SSL å’Œ TLS HTTPS ä½¿ç”¨ SSLï¼ˆSecure Socket Layerï¼‰ å’Œ TLSï¼ˆTransport Layer Securityï¼‰è¿™ä¸¤ä¸ªåè®®ã€‚ SSL æŠ€æœ¯æœ€åˆæ˜¯ç”±æµè§ˆå™¨å¼€å‘å•†ç½‘æ™¯é€šä¿¡å…¬å¸ç‡å…ˆå€¡å¯¼çš„ï¼Œå¼€å‘ è¿‡ SSL3.0 ä¹‹å‰çš„ç‰ˆæœ¬ã€‚ç›®å‰ä¸»å¯¼æƒå·²è½¬ç§»åˆ° IETFï¼ˆInternet Engineering Task Forceï¼ŒInternet å·¥ç¨‹ä»»åŠ¡ç»„ï¼‰çš„æ‰‹ä¸­ã€‚ IETF ä»¥ SSL3.0 ä¸ºåŸºå‡†ï¼Œååˆåˆ¶å®šäº† TLS1.0ã€TLS1.1 å’Œ TLS1.2ã€‚TSL æ˜¯ä»¥ SSL ä¸ºåŸå‹å¼€å‘çš„åè®®ï¼Œæœ‰æ—¶ä¼šç»Ÿä¸€ç§°è¯¥åè®® ä¸º SSLã€‚å½“å‰ä¸»æµçš„ç‰ˆæœ¬æ˜¯ SSL3.0 å’Œ TLS1.0ã€‚ ç”±äº SSL1.0 åè®®åœ¨è®¾è®¡ä¹‹åˆè¢«å‘ç°å‡ºäº†é—®é¢˜ï¼Œå°±æ²¡æœ‰å®é™…æŠ•å…¥ ä½¿ç”¨ã€‚SSL2.0 ä¹Ÿè¢«å‘ç°å­˜åœ¨é—®é¢˜ï¼Œæ‰€ä»¥å¾ˆå¤šæµè§ˆå™¨ç›´æ¥åºŸé™¤äº† è¯¥åè®®ç‰ˆæœ¬ã€‚</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/22/DNSè¯¦è§£/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/DNSè¯¦è§£/" itemprop="url">DNSè¯¦è§£</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-05-22T20:08:00+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/è®¡ç®—æœºç½‘ç»œ/" itemprop="url" rel="index">
                    <span itemprop="name">è®¡ç®—æœºç½‘ç»œ</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è§<a href="https://juejin.im/post/59c6201df265da064428b835" target="_blank" rel="noopener">DNSåŸºç¡€çŸ¥è¯†</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/26/androidçš„å­˜å‚¨è·¯å¾„/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/26/androidçš„å­˜å‚¨è·¯å¾„/" itemprop="url">androidçš„å­˜å‚¨è·¯å¾„</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-26T22:23:12+08:00">
                2019-04-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Androidçš„å‚¨å­˜"><a href="#Androidçš„å‚¨å­˜" class="headerlink" title="Androidçš„å‚¨å­˜"></a>Androidçš„å‚¨å­˜</h2><ul>
<li>å†…éƒ¨å‚¨å­˜</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">context.getFilesDir();</span><br><span class="line"><span class="comment">//åˆ›å»º/data/user/0/com.example.androidbase/filesæ–‡ä»¶å¤¹ï¼Œéšç€åº”ç”¨ä½ç½®çš„æ”¹å˜ï¼Œä½ç½®å¯èƒ½æ”¹å˜</span></span><br><span class="line">context.getCacheDir();</span><br><span class="line"><span class="comment">//åˆ›å»º/data/user/0/com.example.androidbase/cacheæ–‡ä»¶å¤¹å½“éœ€è¦ç©ºé—´æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ é™¤å…¶ä¸­çš„æ–‡ä»¶ï¼ˆå…ˆåˆ é™¤å­˜åœ¨æœ€é•¿æ—¶é—´çš„ï¼‰</span></span><br><span class="line">Environment.getDataDirectory()</span><br><span class="line"><span class="comment">//ä½¿ç”¨Environmentæ¥è·å–</span></span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼š</strong>è¯»å†™ä¸Šè¿°çš„æ–¹æ³•è¿”å›çš„æ–‡ä»¶å¯¹è±¡æ˜¯ï¼Œä¸ç”¨ç”³è¯·æƒé™ï¼Œå½“ç”¨æˆ·å¸è½½appæ—¶ï¼Œç³»ç»Ÿä¼šåˆ é™¤dataç›®å½•ä¸‹æ‰€æœ‰å…³äºè¯¥appçš„æ–‡ä»¶</p>
<ul>
<li>å¤–éƒ¨å‚¨å­˜çš„ç§æœ‰ç›®å½•</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">context.getExternalCacheDir()ï¼š<span class="comment">//ä¸€èˆ¬å­˜æ”¾ä¸´æ—¶ç¼“å­˜æ•°æ®ï¼Œå¯¹åº” æ¸…é™¤ç¼“å­˜</span></span><br><span class="line">context.getExternalFilesDir(String type)ï¼š<span class="comment">//ä¸€èˆ¬æ”¾ä¸€äº›é•¿æ—¶é—´ä¿å­˜çš„æ•°æ®ï¼Œå¯¹åº” æ¸…é™¤æ•°æ®</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨Environmentæ¥è·å–ï¼Œéœ€è¦è·å–æƒé™æ¥æ“ä½œ</span></span><br><span class="line">Environment.getExternalStorageDirectory();</span><br></pre></td></tr></table></figure>
<p>ä¸ä¸Šè¿°çš„å¯¹åº”æ–¹æ³•çš„ä¸åŒç‚¹</p>
<ul>
<li>ç³»ç»Ÿä¸€èˆ¬ä¸ä¼šæ¸…ç†åœ¨é‡Œé¢çš„æ–‡ä»¶</li>
<li>ç”¨æˆ·å¯èƒ½æ“ä½œåœ¨é‡Œé¢çš„æ–‡ä»¶ï¼Œä½¿ç”¨æ—¶åº”è¯¥åŠ ä¸ªéç©ºåˆ¤æ–­</li>
<li>è·å–WRITE_EXTERNAL_STORAGEçš„å…¶ä»–åº”ç”¨å¯ä»¥æ“ä½œè¯¥æ–‡ä»¶</li>
</ul>
<p>æ³¨æ„: éšåº”ç”¨å¸è½½ååˆ é™¤</p>
<ul>
<li>typeçš„å–å€¼<br>type:(å¯ä»¥ä¸ºnullï¼Œä¸ºnullæ—¶ï¼š /storage/emulated/0/Android/data/com.example.androidbase/files)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DIRECTORY_MUSIC, ä¸ºDIRECTORY_MUSICæ—¶ï¼š/storage/emulated/<span class="number">0</span>/Android/data/com.example.androidbase/files/Music</span><br><span class="line">DIRECTORY_PODCASTS,</span><br><span class="line">DIRECTORY_RINGTONES,</span><br><span class="line">DIRECTORY_ALARMS,</span><br><span class="line">DIRECTORY_NOTIFICATIONS,</span><br><span class="line">DIRECTORY_PICTURES,</span><br><span class="line">DIRECTORY_MOVIES.</span><br></pre></td></tr></table></figure>
<ul>
<li>å¤–éƒ¨å‚¨å­˜çš„å…¬å…±ç›®å½•</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éœ€è¦ç”³è¯·æƒé™</span></span><br><span class="line"><span class="comment"> * Typeçš„å€¼çœ‹ä¸Šé¢ï¼ˆä¸èƒ½ä¸ºnullï¼‰,æ³¨æ„è¦åˆ›å»ºæ–‡ä»¶æ—¶ä¸èƒ½ä½¿ç”¨ Fileçš„ mkdir() å’Œ mkdirs() æ–¹æ³•ï¼Œå®ƒä»¬åªä¼šåˆ›å»ºç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> *createNewFile()æˆ–è€…ä¸ä½¿ç”¨ éƒ½å¯ä»¥åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Environment.getExternalStoragePublicDirectory(String type);</span><br></pre></td></tr></table></figure>
<ul>
<li>å› ä¸ºå¤–éƒ¨å­˜å‚¨å¯èƒ½æ˜¯ä¸å¯ç”¨çš„ï¼Œæ¯”å¦‚é‡åˆ°SDå¡è¢«æ‹”å‡ºç­‰æƒ…å†µæ—¶ã€‚å› æ­¤åœ¨è®¿é—®ä¹‹å‰åº”å¯¹å…¶å¯ç”¨æ€§è¿›è¡Œæ£€æŸ¥ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ£€æŸ¥å¤–éƒ¨å­˜å‚¨æ˜¯å¦å¯ä»¥è¯»å†™*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isExternalStorageWritable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String state = Environment.getExternalStorageState();</span><br><span class="line">    <span class="keyword">if</span> (Environment.MEDIA_MOUNTED.equals(state)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ£€æŸ¥å¤–éƒ¨å­˜å‚¨æ˜¯å¦å¯è¯» */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isExternalStorageReadable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String state = Environment.getExternalStorageState();</span><br><span class="line">    <span class="keyword">if</span> (Environment.MEDIA_MOUNTED.equals(state) ||</span><br><span class="line">        Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æŸ¥è¯¢å‰©ä½™ç©ºé—´</li>
</ul>
<p>å¦‚æœäº‹å…ˆçŸ¥é“æƒ³è¦ä¿å­˜çš„æ–‡ä»¶å¤§å°ï¼Œå¯ä»¥é€šè¿‡æ‰§è¡ŒgetFreeSpace() or getTotalSpace() æ¥åˆ¤æ–­æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥ä¿å­˜æ–‡ä»¶ï¼Œä»è€Œé¿å…å‘ç”ŸIOExceptionã€‚é‚£äº›æ–¹æ³•æä¾›äº†å½“å‰å¯ç”¨çš„ç©ºé—´è¿˜æœ‰å­˜å‚¨ç³»ç»Ÿçš„æ€»å®¹é‡ã€‚ç„¶è€Œï¼Œç³»ç»Ÿå¹¶ä¸èƒ½ä¿è¯å¯ä»¥å†™å…¥é€šè¿‡getFreeSpace()æŸ¥è¯¢åˆ°çš„å®¹é‡æ–‡ä»¶ï¼Œ å¦‚æœæŸ¥è¯¢çš„å‰©ä½™å®¹é‡æ¯”æˆ‘ä»¬çš„æ–‡ä»¶å¤§å°å¤šå‡ MBï¼Œæˆ–è€…è¯´æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨ç‡è¿˜ä¸è¶³90%ï¼Œè¿™æ ·åˆ™å¯ä»¥ç»§ç»­è¿›è¡Œå†™çš„æ“ä½œï¼Œå¦åˆ™æœ€å¥½ä¸è¦å†™è¿›å»ã€‚</p>
<blockquote>
<p>å¹¶æ²¡æœ‰å¼ºåˆ¶è¦æ±‚åœ¨å†™æ–‡ä»¶ä¹‹å‰å»æ£€æŸ¥å‰©ä½™å®¹é‡ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•å…ˆåšå†™çš„åŠ¨ä½œï¼Œç„¶åé€šè¿‡æ•è· IOException ã€‚è¿™ç§åšæ³•ä»…é€‚åˆäºäº‹å…ˆå¹¶ä¸çŸ¥é“æƒ³è¦å†™çš„æ–‡ä»¶çš„ç¡®åˆ‡å¤§å°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨æŠŠPNGå›¾ç‰‡è½¬æ¢æˆJPEGä¹‹å‰ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“æœ€ç»ˆç”Ÿæˆçš„å›¾ç‰‡å¤§å°æ˜¯å¤šå°‘ã€‚</p>
</blockquote>
<ul>
<li>æ‰‹åŠ¨åˆ é™¤æ–‡ä»¶</li>
</ul>
<blockquote>
<p>åœ¨ä¸éœ€è¦ä½¿ç”¨æŸäº›æ–‡ä»¶çš„æ—¶å€™åº”åˆ é™¤å®ƒã€‚åˆ é™¤æ–‡ä»¶æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯ç›´æ¥æ‰§è¡Œæ–‡ä»¶çš„delete()æ–¹æ³•ã€‚</p>
</blockquote>
<p><code>myFile.delete();</code></p>
<blockquote>
<p>å¦‚æœæ–‡ä»¶æ˜¯ä¿å­˜åœ¨internal storageï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Contextæ¥è®¿é—®å¹¶é€šè¿‡æ‰§è¡ŒdeleteFile()è¿›è¡Œåˆ é™¤</p>
</blockquote>
<p><code>Context.deleteFile(fileName);</code></p>
<p>æ›´è¯¦ç»†çš„å¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a href="https://juejin.im/post/58b557de128fe10065e93cc8" target="_blank" rel="noopener">Androidå­˜å‚¨ï¼ˆ1ï¼‰â€“ ä½ è¿˜åœ¨ä¹±ç”¨Androidå­˜å‚¨å˜›ï¼ï¼ï¼</a></li>
<li><a href="https://juejin.im/entry/58cb92415c497d0057b6c1a9" target="_blank" rel="noopener">Android å­˜å‚¨è·¯å¾„ä½ äº†è§£å¤šå°‘</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/13/javaæ³¨è§£/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/13/javaæ³¨è§£/" itemprop="url">javaæ³¨è§£</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-13T15:48:08+08:00">
                2019-04-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å…ƒæ³¨è§£"><a href="#å…ƒæ³¨è§£" class="headerlink" title="å…ƒæ³¨è§£"></a>å…ƒæ³¨è§£</h2><p>å…ƒæ³¨è§£æ˜¯ä¸€ç§å¯ä»¥æ³¨è§£åˆ°æ³¨è§£ä¸Šçš„æ³¨è§£ï¼Œæ˜¯ä¸€ç§åŸºæœ¬çš„æ³¨è§£ï¼Œå…ƒæ³¨è§£æœ‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span> ï¼šè§£é‡Šè¿™ä¸ªæ³¨è§£çš„å­˜æ´»æ—¶é—´</span><br><span class="line"><span class="meta">@Documented</span> ï¼šå°†æ³¨è§£ä¸­çš„å…ƒç´ åŒ…å«åˆ°Javadocä¸­å»</span><br><span class="line"><span class="meta">@Target</span> ï¼šæŒ‡å®šæ³¨è§£çš„åº”ç”¨åœºæ™¯</span><br><span class="line"><span class="meta">@Inherited</span> ï¼šæŒ‡å®šæ³¨è§£æ˜¯å¦ä¼šè¢«å­ç±»ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼šé‡å†™çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œå¦‚æœè¦é‡å†™çš„æ–¹æ³•æœ‰æ³¨è§£ï¼Œåˆ™é‡å†™çš„æ–¹æ³•ä¹Ÿä¼šå‡ºç°è¯¥æ³¨è§£</span><br><span class="line"><span class="meta">@Repeatable</span>() ï¼šå¯é‡å¤ï¼ˆJava <span class="number">1.8</span> æ‰åŠ è¿›æ¥çš„ï¼‰</span><br></pre></td></tr></table></figure>
<h3 id="Retention"><a href="#Retention" class="headerlink" title="@Retention"></a>@Retention</h3><p>@Retentionå–å€¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>RetentionPolicy.SOURCE æ³¨è§£åªåœ¨æºç é˜¶æ®µä¿ç•™ï¼Œåœ¨ç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘æ—¶å®ƒå°†è¢«ä¸¢å¼ƒå¿½è§†ã€‚ä¾‹å¦‚ï¼ˆ@Overrideï¼‰</li>
<li>RetentionPolicy.CLASS æ³¨è§£åªè¢«ä¿ç•™åˆ°ç¼–è¯‘è¿›è¡Œçš„æ—¶å€™ï¼Œå®ƒå¹¶ä¸ä¼šè¢«åŠ è½½åˆ° JVM ä¸­ã€‚ ä¾‹å¦‚ï¼ˆ@NotNullï¼‰</li>
<li>RetentionPolicy.RUNTIME æ³¨è§£å¯ä»¥ä¿ç•™åˆ°ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œå®ƒä¼šè¢«åŠ è½½è¿›å…¥åˆ° JVM ä¸­ï¼Œæ‰€ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶å¯ä»¥è·å–åˆ°å®ƒä»¬.ä¾‹å¦‚Retrofit2ä¸­çš„ï¼ˆ@GET()ï¼‰</li>
</ul>
<h3 id="Target"><a href="#Target" class="headerlink" title="@Target"></a>@Target</h3><p><code>@Target</code>çš„å–å€¼å¦‚ä¸‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ElementType.ANNOTATION_TYPE å¯ä»¥ç»™ä¸€ä¸ªæ³¨è§£è¿›è¡Œæ³¨è§£</span><br><span class="line">ElementType.CONSTRUCTOR å¯ä»¥ç»™æ„é€ æ–¹æ³•è¿›è¡Œæ³¨è§£</span><br><span class="line">ElementType.FIELD å¯ä»¥ç»™å±æ€§è¿›è¡Œæ³¨è§£</span><br><span class="line">ElementType.LOCAL_VARIABLE å¯ä»¥ç»™å±€éƒ¨å˜é‡è¿›è¡Œæ³¨è§£</span><br><span class="line">ElementType.METHOD å¯ä»¥ç»™æ–¹æ³•è¿›è¡Œæ³¨è§£</span><br><span class="line">ElementType.PACKAGE å¯ä»¥ç»™ä¸€ä¸ªåŒ…è¿›è¡Œæ³¨è§£ï¼ˆä½¿ç”¨æ–¹æ³•å¾ˆç‰¹æ®Šï¼‰</span><br><span class="line">ElementType.PARAMETER å¯ä»¥ç»™ä¸€ä¸ªæ–¹æ³•å†…çš„å‚æ•°è¿›è¡Œæ³¨è§£</span><br><span class="line">ElementType.TYPE å¯ä»¥ç»™ä¸€ä¸ªç±»å‹è¿›è¡Œæ³¨è§£ï¼Œæ¯”å¦‚ç±»ã€æ¥å£ã€æšä¸¾å¦‚æœä¸å£°æ˜åˆ™å¯ä»¥åº”ç”¨äºæ‰€æœ‰çš„æ³¨è§£</span><br></pre></td></tr></table></figure>
<h3 id="Repeatable"><a href="#Repeatable" class="headerlink" title="@Repeatable()"></a>@Repeatable()</h3><p>è¡¨ç¤ºæ³¨è§£çš„å€¼æ˜¯å¦å¯ä»¥å–å¤šä¸ª</p>
<h3 id="Inherited"><a href="#Inherited" class="headerlink" title="@Inherited"></a>@Inherited</h3><p>æŒ‡å®šæ³¨è§£æ˜¯å¦ä¼šè¢«å­ç±»ä½¿ç”¨ï¼Œæ¯”å¦‚å¦‚æœä¸€ä¸ªè¶…ç±»è¢« @Inherited æ³¨è§£è¿‡çš„æ³¨è§£è¿›è¡Œæ³¨è§£çš„è¯ï¼Œé‚£ä¹ˆå¦‚æœå®ƒçš„å­ç±»æ²¡æœ‰è¢«ä»»ä½•æ³¨è§£åº”ç”¨çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå­ç±»å°±ç»§æ‰¿äº†è¶…ç±»çš„æ³¨è§£</p>
<h3 id="Documented"><a href="#Documented" class="headerlink" title="@Documented"></a>@Documented</h3><p>ä¸æ–‡æ¡£æœ‰å…³çš„å…ƒæ³¨è§£ï¼Œåœ¨ç”Ÿæˆjavadocæ–‡æ¡£çš„æ—¶å€™å°†è¯¥Annotationä¹Ÿå†™å…¥åˆ°æ–‡æ¡£ä¸­</p>
<h2 id="æ³¨è§£çš„å®šä¹‰"><a href="#æ³¨è§£çš„å®šä¹‰" class="headerlink" title="æ³¨è§£çš„å®šä¹‰"></a>æ³¨è§£çš„å®šä¹‰</h2><h2 id="æ³¨è§£çš„å±æ€§"><a href="#æ³¨è§£çš„å±æ€§" class="headerlink" title="æ³¨è§£çš„å±æ€§"></a>æ³¨è§£çš„å±æ€§</h2><p>æ³¨è§£çš„å±æ€§ä¹Ÿå«åšæˆå‘˜å˜é‡ã€‚æ³¨è§£åªæœ‰æˆå‘˜å˜é‡ï¼Œæ²¡æœ‰æ–¹æ³•ã€‚æ³¨è§£çš„æˆå‘˜å˜é‡åœ¨æ³¨è§£çš„å®šä¹‰ä¸­ä»¥â€œæ— å½¢å‚çš„æ–¹æ³•â€å½¢å¼æ¥å£°æ˜ï¼Œå…¶æ–¹æ³•åå®šä¹‰äº†è¯¥æˆå‘˜å˜é‡çš„åå­—ï¼Œå…¶è¿”å›å€¼å®šä¹‰äº†è¯¥æˆå‘˜å˜é‡çš„ç±»å‹</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ³¨è§£ä¸­å®šä¹‰å±æ€§æ—¶å®ƒçš„ç±»å‹å¿…é¡»æ˜¯ 8 ç§åŸºæœ¬æ•°æ®ç±»å‹å¤–åŠ  ç±»ã€æ¥å£ã€æ³¨è§£åŠå®ƒä»¬çš„æ•°ç»„ã€‚</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/11/javaæ—¥æœŸå’Œæ—¶é—´api/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lichukuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/user.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/11/javaæ—¥æœŸå’Œæ—¶é—´api/" itemprop="url">javaæ—¥æœŸå’Œæ—¶é—´api</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-11T08:57:30+08:00">
                2019-04-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>java8ä¹‹åæ¨å‡ºäº†æ–°çš„time api.</p>
<p>java.timeåŒ…ä¸‹æœ‰5ä¸ªåŒ…ç»„æˆ(å¤§éƒ¨åˆ†äººç”¨åˆ°åŸºç¡€åŒ…å’ŒformatåŒ…å°±è¶³å¤Ÿäº†)</p>
<ul>
<li>java.time â€“ åŒ…å«å€¼å¯¹è±¡çš„åŸºç¡€åŒ…</li>
<li>java.time.chrono â€“ æä¾›å¯¹ä¸åŒçš„æ—¥å†ç³»ç»Ÿçš„è®¿é—®</li>
<li>java.time.format â€“ æ ¼å¼åŒ–å’Œè§£ææ—¶é—´å’Œæ—¥æœŸ</li>
<li>java.time.temporal â€“ åŒ…æ‹¬åº•å±‚æ¡†æ¶å’Œæ‰©å±•ç‰¹æ€§</li>
<li>java.time.zone â€“ åŒ…å«æ—¶åŒºæ”¯æŒçš„ç±»</li>
</ul>
<p>æ³¨æ„ï¼šjava.timeåŒ…ä¸‹æ‰€æœ‰ç±»éƒ½æ˜¯ä¸å¯å˜çš„ã€çº¿ç¨‹å®‰å…¨çš„</p>
<h2 id="è§„èŒƒ"><a href="#è§„èŒƒ" class="headerlink" title="è§„èŒƒ"></a>è§„èŒƒ</h2><p>javaçš„<code>Date</code>å’Œ<code>Time API</code>è§„èŒƒè¦æ±‚Javaä½¿ç”¨çš„æ—¶é—´å°ºåº¦ä¸º:</p>
<ul>
<li>æ¯å¤©<code>86400</code>ç§’</li>
<li>æ¯å¤©æ­£åˆä¸å®˜æ–¹æ—¶é—´ç²¾å‡†åŒ¹é…</li>
<li>åœ¨æ—¶é—´ç‚¹ä¸Šï¼Œä»¥ç²¾ç¡®çš„æ–¹å¼ä¸å®˜æ–¹æ—¶é—´æ¥è¿‘åŒ¹é…</li>
</ul>
<h2 id="Instant"><a href="#Instant" class="headerlink" title="Instant"></a>Instant</h2><p>åœ¨<code>java</code>ä¸­ï¼Œ<code>Instant</code>è¡¨ç¤ºæ—¶é—´çº¿ä¸Šçš„æŸä¸€ç‚¹ã€‚<code>ã€è¯¥æ—¶é—´çº¿çš„åŸç‚¹ä¸º:ç©¿è¿‡ä¼¦æ•¦æ ¼æ—å¨æ²»çš‡å®¶å¤©æ–‡å°çš„æœ¬åˆå­åˆçº¿æ‰€å¤„æ—¶åŒº
çš„</code>1970å¹´1æœˆ1æ—¥çš„åˆå¤œ`</p>
<p>Instantçš„å¸¸ç”¨æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Instant <span class="title">now</span><span class="params">()</span> <span class="comment">//è·å–å½“å‰æ—¶é—´</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">getEpochSecond</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">toEpochMilli</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getNano</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">Instant <span class="title">plusMillis</span><span class="params">(<span class="keyword">long</span> millisToAdd)</span><span class="comment">//è¿”å›å½“å‰æ—¶é—´å¢åŠ æŒ‡å®šæ¯«ç§’æ•°åçš„æ—¶é—´</span></span></span><br><span class="line"><span class="function">Instant <span class="title">plusNanos</span><span class="params">(<span class="keyword">long</span> millisToAdd)</span><span class="comment">//è¿”å›å½“å‰æ—¶é—´å¢åŠ æŒ‡å®šçº³ç§’æ•°åçš„æ—¶é—´</span></span></span><br><span class="line"><span class="function">Instant <span class="title">plusSeconds</span><span class="params">(<span class="keyword">long</span> millisToAdd)</span><span class="comment">//è¿”å›å½“å‰æ—¶é—´å¢åŠ æŒ‡å®šç§’æ•°åçš„æ—¶é—´</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isAfter</span><span class="params">(Instant otherInstant)</span></span>;</span><br><span class="line"><span class="keyword">boolean</span> instant.isBefore(Instant otherInstant);</span><br><span class="line"></span><br><span class="line">MIN <span class="comment">//æœ€å°å€¼ï¼Œä»£è¡¨åŸç‚¹å‰çš„åäº¿å¹´</span></span><br><span class="line">MAX <span class="comment">//æœ€å¤§å€¼ï¼Œä»£è¡¨å…¬å…ƒ 1000 000 000å¹´çš„12æœˆ31æ—¥</span></span><br></pre></td></tr></table></figure>
<p>å®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Instant instant = Instant.now();</span><br><span class="line">        System.out.println(instant.toString());</span><br><span class="line">        System.out.println(instant.getEpochSecond());<span class="comment">//è¿”å›ä»åŸç‚¹åˆ°ç°åœ¨çš„ç§’æ•°</span></span><br><span class="line">        System.out.println(instant.getNano());<span class="comment">//å½“å‰ä¸€ç§’å†…çš„ç¬¬å‡ çº³ç§’</span></span><br><span class="line">        System.out.println(instant.toEpochMilli());<span class="comment">//è¿”å›ä»åŸç‚¹åˆ°ç°åœ¨çš„æ¯«ç§’æ•°</span></span><br><span class="line">        System.out.println(instant.plusMillis(<span class="number">10000</span>));</span><br><span class="line">        System.out.println(instant.plusNanos(<span class="number">1000</span>));;</span><br><span class="line">        System.out.println(instant.plusSeconds(<span class="number">1000</span>));;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">ç»“æœ:</span><br><span class="line"></span><br><span class="line"><span class="number">2019</span>-<span class="number">04</span>-<span class="number">11</span>T01:<span class="number">38</span>:<span class="number">22.067</span>Z</span><br><span class="line"><span class="number">1554946702</span></span><br><span class="line"><span class="number">67000000</span></span><br><span class="line"><span class="number">1554946702067</span></span><br><span class="line"><span class="number">2019</span>-<span class="number">04</span>-<span class="number">11</span>T01:<span class="number">38</span>:<span class="number">32.067</span>Z</span><br><span class="line"><span class="number">2019</span>-<span class="number">04</span>-<span class="number">11</span>T01:<span class="number">38</span>:<span class="number">22.067001</span>Z</span><br><span class="line"><span class="number">2019</span>-<span class="number">04</span>-<span class="number">11</span>T01:<span class="number">55</span>:<span class="number">02.067</span>Z</span><br></pre></td></tr></table></figure>
<h2 id="Duration"><a href="#Duration" class="headerlink" title="Duration"></a>Duration</h2><p><code>Duration</code>æ˜¯ä¸¤ä¸ªæ—¶åˆ»ä¹‹é—´çš„æ—¶é—´é‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Instant start = Instant.now();</span><br><span class="line">run();<span class="comment">//å»¶æ—¶æ–¹æ³•</span></span><br><span class="line">Instant end = Instant.now();</span><br><span class="line">Duration t = Duration.between(start,end);</span><br><span class="line">System.out.println(t.toDays());<span class="comment">//è·å–æ—¶é—´ç»è¿‡çš„å¤©æ•°</span></span><br><span class="line">System.out.println(t.toHours());<span class="comment">//è·å–æ—¶é—´ç»è¿‡çš„å°æ—¶æ•°</span></span><br><span class="line">System.out.println(t.toMinutes());<span class="comment">//è·å–æ—¶é—´ç»è¿‡çš„åˆ†é’Ÿæ•°</span></span><br><span class="line">System.out.println(t.getSeconds());<span class="comment">//è·å–æ—¶é—´ç»è¿‡çš„ç§’æ•°</span></span><br><span class="line">System.out.println(t.toMillis());<span class="comment">//è·å–æ—¶é—´ç»è¿‡çš„æ¯«ç§’æ•°</span></span><br><span class="line">System.out.println(t.toNanos());<span class="comment">//è·å–æ—¶é—´ç»è¿‡çš„çº³ç§’æ•°</span></span><br><span class="line">System.out.println(t.toString());</span><br><span class="line">System.out.println(t.getNano());<span class="comment">//å’ŒInstant.getNano()æ–¹æ³•ç›¸åŒ</span></span><br><span class="line"></span><br><span class="line">Duration plus = t.plusDays(<span class="number">1</span>);<span class="comment">//åœ¨å½“å‰DurationåŠ ä¸ŠæŒ‡å®šå¤©æ•°çš„æ—¶é—´ï¼Œå…¶ä»–plusXXX()ä¸å†ä»‹ç»</span></span><br><span class="line">Duration min = t.minusDays(<span class="number">1</span>);<span class="comment">//åœ¨å½“å‰Durationå‡å»æŒ‡å®šå¤©æ•°çš„æ—¶é—´ï¼Œå…¶ä»–minusXXX()ä¸å†ä»‹ç»</span></span><br></pre></td></tr></table></figure>
<h2 id="æœ¬åœ°æ—¶é—´"><a href="#æœ¬åœ°æ—¶é—´" class="headerlink" title="æœ¬åœ°æ—¶é—´"></a>æœ¬åœ°æ—¶é—´</h2><p>è½¬è½½<a href="https://www.jianshu.com/p/19bd58b30660" target="_blank" rel="noopener">java 8çš„java.timeåŒ…(éå¸¸å€¼å¾—æ¨è)</a></p>
<ul>
<li>LocalDateTimeï¼šå­˜å‚¨äº†æ—¥æœŸå’Œæ—¶é—´</li>
<li>LocalDateï¼šåªå­˜å‚¨äº†æ—¥æœŸ</li>
<li>LocalTimeï¼šåªå­˜å‚¨äº†æ—¶é—´ï¼Œå¦‚ï¼š14:02:43.455ã€‚(åé¢çš„.455è¡¨ç¤ºæ¯«ç§’å€¼çš„æœ€åä¸‰ä½,ä½¿ç”¨.withNano(0)å¯æŠŠæ¯«ç§’å€¼è®¾ä¸º0)</li>
</ul>
<p>java.time.LocalDateTime</p>
<p>æ­¤ç±»æ˜¾ç¤ºçš„æ˜¯å¹´æœˆæ—¥æ—¶åˆ†ç§’(é»˜è®¤çš„æ ¼å¼ä¸º:2017-01-01T01:01:01.555)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">LocalDateTime now = LocalDateTime.now();</span><br><span class="line">        System.out.println(now.toString());</span><br><span class="line">        System.out.println(now.getYear());</span><br><span class="line">        System.out.println(now.getMonthValue());</span><br><span class="line">        System.out.println(now.getDayOfMonth());</span><br><span class="line">        System.out.println(now.getHour()); <span class="comment">//24å°æ—¶åˆ¶</span></span><br><span class="line">        System.out.println(now.getMinute());</span><br><span class="line">        System.out.println(now.getSecond());</span><br><span class="line">        System.out.println(now.getNano()); <span class="comment">//æ¯«ç§’å€¼çš„åä¸‰ä½ä½œä¸ºå‰ä¸‰ä½åé¢è¡¥6ä¸ªé›¶</span></span><br><span class="line"></span><br><span class="line">æ‰“å°çš„ç»“æœä¸º:  </span><br><span class="line"><span class="number">2017</span>-<span class="number">03</span>-<span class="number">21</span>T20:<span class="number">26</span>:<span class="number">18.317</span></span><br><span class="line"><span class="number">2017</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">21</span></span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="number">26</span></span><br><span class="line"><span class="number">18</span></span><br><span class="line"><span class="number">317000000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//èƒ½å¤Ÿè‡ªå®šä¹‰æ—¶é—´</span></span><br><span class="line">        LocalDateTime time = LocalDateTime.of(<span class="number">2017</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        System.out.println(time); <span class="comment">//2017-01-01T01:01:01</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨plusæ–¹æ³•å¢åŠ å¹´ä»½</span></span><br><span class="line">        LocalDateTime time = LocalDateTime.of(<span class="number">2017</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ”¹å˜æ—¶é—´åä¼šè¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹nextYearTime</span></span><br><span class="line">        LocalDateTime nextYearTime = time.plusYears(<span class="number">1</span>); </span><br><span class="line"></span><br><span class="line">        System.out.println(nextYearTime); <span class="comment">//2018-01-01T01:01:01</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨minusæ–¹æ³•å‡å¹´ä»½</span></span><br><span class="line">        LocalDateTime time = LocalDateTime.of(<span class="number">2017</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        LocalDateTime lastYearTime = time.minusYears(<span class="number">1</span>);</span><br><span class="line">        System.out.println(lastYearTime); <span class="comment">//2016-01-01T01:01:01</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨withæ–¹æ³•è®¾ç½®æœˆä»½</span></span><br><span class="line">        LocalDateTime time = LocalDateTime.of(<span class="number">2017</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        LocalDateTime changeTime = time.withMonth(<span class="number">12</span>);</span><br><span class="line">        System.out.println(changeTime); <span class="comment">//2017-12-01T01:01:01</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ¤æ–­å½“å‰å¹´ä»½æ˜¯å¦é—°å¹´</span></span><br><span class="line">        System.out.println(<span class="string">"isLeapYear :"</span> + time.isLeapYear());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ¤æ–­å½“å‰æ—¥æœŸå±äºæ˜ŸæœŸå‡ </span></span><br><span class="line">        LocalDateTime time = LocalDateTime.now();</span><br><span class="line">        DayOfWeek dayOfWeek = time.getDayOfWeek();</span><br><span class="line">        System.out.println(dayOfWeek); <span class="comment">//WEDNESDAY</span></span><br></pre></td></tr></table></figure>
<p>LocalDate</p>
<p>æ­¤ç±»æ˜¾ç¤ºçš„æ˜¯å¹´æœˆæ—¥(é»˜è®¤çš„æ ¼å¼ä¸º:2017-01-01)<br>ç”¨æ³•ä¸LocalDateTimeç±»å¤§è‡´ä¸€æ ·</p>
<p>LocalTime</p>
<p>æ­¤ç±»æ˜¾ç¤ºçš„æ˜¯æ—¶åˆ†ç§’å’Œæ¯«ç§’å€¼çš„åä¸‰ä½(21:26:35.693)<br>ç”¨æ³•ä¸LocalDateTimeç±»å¤§è‡´ä¸€æ ·</p>
<h2 id="TemporalAdjusters"><a href="#TemporalAdjusters" class="headerlink" title="TemporalAdjusters"></a>TemporalAdjusters</h2><p><code>TemporalAdjusters</code>æ˜¯è°ƒèŠ‚å™¨ï¼Œé€šè¿‡<code>with</code>æ–¹æ³•æ¥è°ƒèŠ‚æ—¶é—´</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">ofDateAdjuster</span><span class="params">(UnaryOperator&lt;LocalDate&gt; dateBasedAdjuster)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">firstDayOfMonth</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">lastDayOfMonth</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">firstDayOfNextMonth</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">firstDayOfYear</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">lastDayOfYear</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">firstDayOfNextYear</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">firstInMonth</span><span class="params">(DayOfWeek dayOfWeek)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">lastInMonth</span><span class="params">(DayOfWeek dayOfWeek)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">dayOfWeekInMonth</span><span class="params">(<span class="keyword">int</span> ordinal, DayOfWeek dayOfWeek)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">next</span><span class="params">(DayOfWeek dayOfWeek)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">nextOrSame</span><span class="params">(DayOfWeek dayOfWeek)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">previous</span><span class="params">(DayOfWeek dayOfWeek)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TemporalAdjuster <span class="title">previousOrSame</span><span class="params">(DayOfWeek dayOfWeek)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalDate now = LocalDate.now();</span><br><span class="line">System.out.println(now.with(TemporalAdjusters.firstDayOfMonth()));</span><br></pre></td></tr></table></figure>
<h2 id="DateTimeFormatter"><a href="#DateTimeFormatter" class="headerlink" title="DateTimeFormatter"></a>DateTimeFormatter</h2><p>è½¬è½½<a href="https://www.jianshu.com/p/19bd58b30660" target="_blank" rel="noopener">java 8çš„java.timeåŒ…(éå¸¸å€¼å¾—æ¨è)</a></p>
<p>æ­¤ç±»çš„åŠŸèƒ½ä¸SimpleDateFormatç±»çš„åŠŸèƒ½ç±»ä¼¼,æ­¤ç±»ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„,åœ¨å†™æˆæ—¶é—´å¤„ç†å·¥å…·ç±»æ—¶,å¯ä½œä¸ºé™æ€æˆå‘˜å˜é‡,è€Œä¸ç”¨æ¯æ¬¡éƒ½newä¸€ä¸ªSimpleDateFormatå®ä¾‹,æ­¤ç±»æ˜¯ç”¨æ¥åˆ›å»ºæ—¥æœŸæ˜¾ç¤ºçš„æ¨¡æ¿,ç„¶åå¯¹äºæ—¥æœŸçš„æ ¼å¼åŒ–å’Œè§£æè¿˜æ˜¯ä½¿ç”¨LocalDateTimeç­‰ç±»çš„parseé™æ€æ–¹æ³•å’Œformatæ–¹æ³•,å…¶æ¨¡æ¿å±æ€§æ ¼å¼æ˜¯å’ŒSimpleDateFormatä¸€æ ·çš„,è¯·çœ‹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">G å¹´ä»£æ ‡å¿—ç¬¦</span><br><span class="line">y å¹´</span><br><span class="line">M æœˆ</span><br><span class="line">d æ—¥</span><br><span class="line">h æ—¶ (<span class="number">12</span>å°æ—¶åˆ¶)</span><br><span class="line">H æ—¶ (<span class="number">24</span>å°æ—¶åˆ¶)</span><br><span class="line">m åˆ†</span><br><span class="line">s ç§’</span><br><span class="line">S æ¯«ç§’</span><br><span class="line">E æ˜ŸæœŸå‡ </span><br><span class="line">D ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©</span><br><span class="line">F ä¸€æœˆä¸­ç¬¬å‡ ä¸ªæ˜ŸæœŸ(ä»¥æ¯ä¸ªæœˆ<span class="number">1</span>å·ä¸ºç¬¬ä¸€å‘¨,<span class="number">8</span>å·ä¸ºç¬¬äºŒå‘¨ä¸ºæ ‡å‡†è®¡ç®—)</span><br><span class="line">w ä¸€å¹´ä¸­ç¬¬å‡ ä¸ªæ˜ŸæœŸ</span><br><span class="line">W ä¸€æœˆä¸­ç¬¬å‡ ä¸ªæ˜ŸæœŸ(ä¸åŒäºFçš„è®¡ç®—æ ‡å‡†,æ˜¯ä»¥æ˜ŸæœŸä¸ºæ ‡å‡†è®¡ç®—æ˜ŸæœŸæ•°,ä¾‹å¦‚<span class="number">1</span>å·æ˜¯æ˜ŸæœŸä¸‰,æ˜¯å½“æœˆçš„ç¬¬ä¸€å‘¨,é‚£ä¹ˆ<span class="number">5</span>å·ä¸ºæ˜ŸæœŸæ—¥å°±å·²ç»æ˜¯å½“æœˆçš„ç¬¬äºŒå‘¨äº†)</span><br><span class="line">a ä¸Šåˆ / ä¸‹åˆ æ ‡è®°ç¬¦</span><br><span class="line">k æ—¶ (<span class="number">24</span>å°æ—¶åˆ¶,å…¶å€¼ä¸Hçš„ä¸åŒç‚¹åœ¨äº,å½“æ•°å€¼å°äº<span class="number">10</span>æ—¶,å‰é¢ä¸ä¼šæœ‰<span class="number">0</span>)</span><br><span class="line">K æ—¶ (<span class="number">12</span>å°æ—¶å€¼,å…¶å€¼ä¸hçš„ä¸åŒç‚¹åœ¨äº,å½“æ•°å€¼å°äº<span class="number">10</span>æ—¶,å‰é¢ä¸ä¼šæœ‰<span class="number">0</span>)</span><br><span class="line">z æ—¶åŒº</span><br></pre></td></tr></table></figure>
<p>å¯¹äºæ­¤ç±»ä½¿ç”¨å…ˆæ¥ä¸ªç®€å•çš„æ–°æ—§apiå¯¹æ¯”æ¼”ç¤º:</p>
<p>Dateè½¬String</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//ä½¿ç”¨Dateå’ŒSimpleDateFormat</span></span><br><span class="line">  SimpleDateFormat simpleDateFormat = </span><br><span class="line">                  <span class="keyword">new</span> SimpleDateFormat(<span class="string">"G yyyyå¹´MMæœˆddå· E a hhæ—¶mmåˆ†ssç§’"</span>);</span><br><span class="line">  </span><br><span class="line">  String format = simpleDateFormat.format(<span class="keyword">new</span> Date());</span><br><span class="line">  </span><br><span class="line">  System.out.println(format); </span><br><span class="line">  <span class="comment">//æ‰“å°: å…¬å…ƒ 2017å¹´03æœˆ21å· æ˜ŸæœŸäºŒ ä¸‹åˆ 06æ—¶38åˆ†20ç§’</span></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="comment">//ä½¿ç”¨jdk1.8 LocalDateTimeå’ŒDateTimeFormatter</span></span><br><span class="line">  LocalDateTime now = LocalDateTime.now();</span><br><span class="line">  DateTimeFormatter pattern = </span><br><span class="line">             DateTimeFormatter.ofPattern(<span class="string">"G yyyyå¹´MMæœˆddå· E a hhæ—¶mmåˆ†ssç§’"</span>);</span><br><span class="line">  String format = now.format(pattern);</span><br><span class="line">  System.out.println(format);</span><br><span class="line"><span class="comment">//æ‰“å°: å…¬å…ƒ 2017å¹´03æœˆ21å· æ˜ŸæœŸäºŒ ä¸‹åˆ 06æ—¶38åˆ†20ç§’</span></span><br></pre></td></tr></table></figure>
<p>Stringè½¬Date</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//ä½¿ç”¨Dateå’ŒSimpleDateFormat</span></span><br><span class="line">SimpleDateFormat simpleDateFormat = </span><br><span class="line">          <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd hh:mm:ss"</span>);</span><br><span class="line"></span><br><span class="line">Date date = simpleDateFormat.parse(<span class="string">"2017-12-03 10:15:30"</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(simpleDateFormat.format(date));</span><br><span class="line"><span class="comment">//æ‰“å° 2017-12-03 10:15:30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨jdk1.8 LocalDateTimeå’ŒDateTimeFormatter</span></span><br><span class="line">DateTimeFormatter pattern = </span><br><span class="line">            DateTimeFormatter.ofPattern(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸¥æ ¼æŒ‰ç…§ISO yyyy-MM-ddéªŒè¯ï¼Œ03å†™æˆ3éƒ½ä¸è¡Œ</span></span><br><span class="line">LocalDateTime dt = LocalDateTime.parse(<span class="string">"2017-12-03 10:15:30"</span>,pattern); </span><br><span class="line"></span><br><span class="line">System.out.println(dt.format(pattern));</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/user.jpg" alt="lichukuan">
            
              <p class="site-author-name" itemprop="name">lichukuan</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">62</span>
                  <span class="site-state-item-name">åšå®¢</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lichukuan</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
